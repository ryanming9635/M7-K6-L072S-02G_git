C51 COMPILER V8.16   HS_DISPLAYOSD                                                         03/04/2011 15:51:19 PAGE 1   


C51 COMPILER V8.16, COMPILATION OF MODULE HS_DISPLAYOSD
OBJECT MODULE PLACED IN .\Output\HS_DisplayOSD.obj
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE HS_DisplayOSD.c COMPACT OPTIMIZE(9,SIZE) BROWSE INCDIR(.\Include\) DEBUG OB
                    -JECTEXTEND CODE LISTINCLUDE SYMBOLS PRINT(.\Source\HS_DisplayOSD.lst) OBJECT(.\Output\HS_DisplayOSD.obj)

line level    source

   1          #include "Config.h"
   1      =1  /*****************************************************************************/
   2      =1  /*                           System Configurations                           */
   3      =1  /*                                                      rev 0.10 include auto test                                               */
   4      =1  // 0.11 change DTV, PC input initial download data correct for Charge Pump
   5      =1  // 0.12 correct phase measurement routine '>>3'
   6      =1  // 0.13 enable function for SPI control... only EXT MCU case
   7      =1  // 0.14 corrected PC measurement......
   8      =1  // 0.0a test function only for CVBS, SVIDEO
   9      =1  // 0.15 corrected DTV scaler setting for panel resolutions
  10      =1  // 0.0b panel for AND 640x480 TICON panel
  11      =1  // 0.16 corrected COMPONENT scaler setting for panel resolutions        11/21/2007
  12      =1  // 0.0c automatic chip test
  13      =1  // 0.17 add monitor function, osd grid for writing grid
  14      =1  // 0.18 add component, dtv pc for analogpanel, 12/06/2007
  15      =1  // 0.19 correct pal input for CES, 12/20/2007
  16      =1  // 0.1a CCFL control, 12/28/2007
  17      =1  // 0.19 Multi Grid for Banking on Internal MCU  01/17/2008
  18      =1  // 0.20 CCFL contol for backlight brightness    01/21/2008
  19      =1  // 0.21 CCFL contol for backlight brightness    01/25/2008
  20      =1  // 0.22 phase setting 02/07/2008
  21      =1  // 0.221 display input correction 04/03/2008
  22      =1  // 0.23 PC, DTV mode, no signal display
  23      =1  // 0.24 PC Auto Color adjustment
  24      =1  // 0.25 revised PC Auto Clock adjustment - find divide number and phase
  25      =1  // 0.26 Digital RGB for TW8826
  26      =1  // 0.27 Correct LVDS control                                    08/22/2008
  27      =1  // 0.28 Add WSVGA resolution                                    10/23/2008
  28      =1  // 0.29 Add NEW GRID                                                    11/14/2008
  29      =1  // 0.30 Fix DTV input                                                   12/10/2008
  30      =1  // 0.31 Add 1080i23, 24, 25A, 25B                               01/20/2009
  31      =1  // 0.32 TCON setting FIX all mode                               01/22/2009
  32      =1  // 0.33 autodetect is auto on/off by dip sw1    02/02/2009
  33      =1  // 0.34 Fix autocolor function and clamp position 02/08/2009
  34      =1  /*****************************************************************************/
  35      =1  #ifndef __CONFIG_H__
  36      =1  #define __CONFIG_H__
  37      =1  
  38      =1  //#define INTERNAL_MCU -- defined by Project Compiler session
  39      =1  
  40      =1  
  41      =1  //-----------------------------------------------------------------------------
  42      =1  //              Firmware Version
  43      =1  //-----------------------------------------------------------------------------
  44      =1  #define FWVER                   0x140                   // Rev 0.14
  45      =1  //-----------------------------------------------------------------------------
  46      =1  //              Compiler
  47      =1  //-----------------------------------------------------------------------------
  48      =1  #define KEILC                                           // Keil C 5.0
  49      =1  //-----------------------------------------------------------------------------
  50      =1  //              MPU Clock
  51      =1  //-----------------------------------------------------------------------------
  52      =1  #ifndef INTERNAL_MCU
  53      =1  //#define CLOCK_11M                                     // 11.0592MHz
C51 COMPILER V8.16   HS_DISPLAYOSD                                                         03/04/2011 15:51:19 PAGE 2   

  54      =1  #define CLOCK_22M                                       // 22.1184MHz
  55      =1  #else                                                           // INTERNAL_MCU
           =1 #define CLOCK_27M                                       // 27MHz
           =1 #define REG_START_ADDRESS       0xc000          // register start 0xc000, for page0, 0xc100-page1 
           =1 #endif
  59      =1  //-----------------------------------------------------------------------------
  60      =1  //              TW88 Version
  61      =1  //-----------------------------------------------------------------------------
  62      =1  #define TW8816
  63      =1  //-----------------------------------------------------------------------------
  64      =1  //              Options for Backlight control
  65      =1  //-----------------------------------------------------------------------------
  66      =1  //#define       BACKLIGHT_CCFL
  67      =1  //#define       BACKLIGHT_LED
  68      =1  #define BACKLIGHT_PWM
  69      =1  
  70      =1  //-----------------------------------------------------------------------------
  71      =1  //              Panel Resolution
  72      =1  //-----------------------------------------------------------------------------
  73      =1  // ---- Select Default Panel
  74      =1  //
  75      =1  //#define UXGA                                          // 1600 x 1200
  76      =1  //#define SXGA                                          // 1280 x 1024
  77      =1  //#define XGA  // 1024 x 768
  78      =1  #ifdef XGA
           =1         #define LVDS                                    
           =1         #define PWIDTH  1024
           =1         #define PHEIGHT 768
           =1 #endif
  83      =1  //#define SVGA                                          //  800 x 600
  84      =1  //#define VGA                                           //  640 x 480
  85      =1  #ifdef VGA
           =1         #define PWIDTH  640
           =1         #define PHEIGHT 480
           =1         //#define       HITACHI_640_B_160               //--> 640 x 160
           =1         #define AND_640_480
           =1 #endif
  91      =1  //#define WXGA                                          // 1280 x 768 (15:9) // 1366 x 768 (16:9)
  92      =1  #ifdef WXGA
           =1     //#define WX_SHARP_LQ106K1LA
           =1         #define PWIDTH  1280
           =1         #define PHEIGHT 768
           =1 #endif
  97      =1  //#define WSVGA                                         // 1024 x 600   *** only video mode
  98      =1  #ifdef WSVGA
           =1         #define PWIDTH  1024
           =1         #define PHEIGHT 600
           =1         #define UNIDEN_1024_600
           =1 #endif
 103      =1  #define WVGA                                            //  800 x 480
 104      =1  #ifdef WVGA
 105      =1          #define PWIDTH  800
 106      =1          #define PHEIGHT 600//480
 107      =1          // If WVGA, you have to select panel.
 108      =1          //#define AU_10INCH
 109      =1          //#define WVGA_TPO
 110      =1          //#define SAMSUNG_10INCH
 111      =1          //#define SAMSUNG_TICONLESS_10INCH
 112      =1          //#define SHARP_TICONLESS_7INCH
 113      =1          #define AU_TICONLESS_7INCH
 114      =1          //#define INNOLUX_AT080TN03
 115      =1          //#define AU_TICONLESS_7INCH_CCFL
C51 COMPILER V8.16   HS_DISPLAYOSD                                                         03/04/2011 15:51:19 PAGE 3   

 116      =1          //#define CMO                   // CHIMEI panel
 117      =1          //#define AU_TICONLESS_10INCH
 118      =1          //#define HITACHI_T01
 119      =1          //#define HITACHI_TX23D12
 120      =1          //#define HITACHI_TX18D24
 121      =1          //#define HITACHI_TX18D16
 122      =1          //#define TMD_LTA070A320F
 123      =1          //#define TMD_LTA080B
 124      =1  #endif  //WVGA
 125      =1  //#define HVGA                                          //  480 x 320
 126      =1  //#define QVGA                                          //  320 x 240   *** only video mode
 127      =1  #ifdef QVGA
           =1         #define PWIDTH  320
           =1         #define PHEIGHT 240
           =1         //#define HITACHI_TX09D73
           =1         //#define AU_DELTARGB
           =1         //#define SHARP_LQ050Q5DR01
           =1         //#define SHARP_LQ035
           =1         //#define       TMD
           =1 #endif
 136      =1  
 137      =1  //#define WQVGA                                         //  480 x 234   *** only video mode
 138      =1  #ifdef WQVGA
           =1         #define PWIDTH  480
           =1         #define PHEIGHT 240
           =1         // If WQVGA, you have to select panel   
           =1     #define ANALOG_7INCH
           =1         //#define       PWIDTH  400
           =1         //#define PHEIGHT       240
           =1         //#define SHARP_LQ043T3DX02             //  400 x 237
           =1         //#define LG_ANALOG
           =1         //#define TMD_ANALOG                            //TMD_LTA05B352A
           =1         //#define       T_51945GD                               // Optorex Panel
           =1 #endif  // WQVGA
 150      =1  
 151      =1  //if LVDS pannel disable TICONLESS
 152      =1  
 153      =1  //-----------------------------------------------------------------------------
 154      =1  //---- Add Support One more panel with DIPSW#1
 155      =1  //---- Ex. Add Analog AU 7" Panel with Default Panel for evalution
 156      =1  //#define ADD_ANALOGPANEL               // Added Analog panel(AU7") from default set panel(expect WQVGA) with DIP #1 sw
             -itch.(DIP#1=L:ANALOG, H:DEFAULT)
 157      =1                                                          // It can't support WQVGA and ADD_ANALOGPANEL same time!!
 158      =1          //#define ADD_ANALOG_7INCH
 159      =1          //#define ADD_TMD_LTA05B352A
 160      =1                                                                          
 161      =1  //---- Support Wide panel function
 162      =1  #if (defined WXGA) || (defined WSVGA) || (defined WVGA) || (defined WQVGA)
 163      =1  #define WIDE_SCREEN                             // Can support 4 display mode, i.e. Normal, Wide, Full, Zoom
 164      =1  #endif                                                          // Tested panasonic WVGA panel.
 165      =1  
 166      =1  //-----------------------------------------------------------------------------
 167      =1  //              Panel Vendor Specific
 168      =1  //-----------------------------------------------------------------------------
 169      =1  
 170      =1  //-----------------------------------------------------------------------------
 171      =1  //              TV Tuner
 172      =1  //-----------------------------------------------------------------------------
 173      =1  #define PHILIPS                         0
 174      =1  #define ALPS                            1               // ALPS, LG
 175      =1  #define TEMIC                           2
 176      =1  #define TVAVA                           3
C51 COMPILER V8.16   HS_DISPLAYOSD                                                         03/04/2011 15:51:19 PAGE 4   

 177      =1  #define LGTUNER                         4
 178      =1  #define SAMSUNGMUTITUNER        5
 179      =1  
 180      =1  #define TVTunerDevice           4
 181      =1  //-----------------------------------------------------------------------------
 182      =1  //              IR Remote Controller Type
 183      =1  //-----------------------------------------------------------------------------
 184      =1  //#define REMO_RC5                                      // RC5 style
 185      =1  #define TECHWELL_REMOCON
 186      =1  //#define REMO_NEC                                      // NEC style
 187      =1  //#define PHILIPS_REMOCON // New remocon 
 188      =1  
 189      =1  
 190      =1  //-----------------------------------------------------------------------------
 191      =1  //              I2C Device Access Address Mapping
 192      =1  //-----------------------------------------------------------------------------
 193      =1  
 194      =1  #define EEPROMI2CAddress        0xa0    // EEPROM (24C16)
 195      =1  #define TW88I2CAddress          0x8a    // TW880x
 196      =1  
 197      =1  #define MSPI2CAddress           0x80    // MSP
 198      =1  
 199      =1  //-----------------------------------------------------------------------------
 200      =1  //              Options for Possible Inputs
 201      =1  //-----------------------------------------------------------------------------
 202      =1  #define         AWT
 203      =1  //#define       E_Wintek 
 204      =1  //#define SUPPORT_SVIDEO                     //andy Awt 20090914
 205      =1  //#define SUPPORT_COMPONENT                     // support component analog to decoder//andy Awt 20090914
 206      =1  
 207      =1  //#define SUPPORT_DTV                           // support DTV input through component( to ADC ).//andy Awt 20090914
 208      =1  #define SUPPORT_PC                              // support PC function
 209      =1  //#define SUPPORT_DVI                           // support DVI input
 210      =1  #define SUPPORT_SDCARD
 211      =1  
 212      =1  //#define SUPPORT_RS485
 213      =1  
 214      =1  //-----------------------------------------------------------------------------
 215      =1  //              Options for Possible Standards
 216      =1  //              Default:NTSC
 217      =1  //-----------------------------------------------------------------------------
 218      =1  #define SUPPORT_PAL                     
 219      =1  #define SUPPORT_SECAM
 220      =1  #define SUPPORT_NTSC4           
 221      =1  #define SUPPORT_PALM    
 222      =1  #define SUPPORT_PALN            
 223      =1  #define SUPPORT_PAL60           
 224      =1  
 225      =1  
 226      =1  //#define ID_CHECK_BY_FW                        // in Video mode, check input system ID by firmware
 227      =1  
 228      =1  //-----------------------------------------------------------------------------
 229      =1  //              Options for Debugging/Release
 230      =1  //-----------------------------------------------------------------------------
 231      =1  //#define SUPPORT_PATTERN                       // support LCD test pattern
 232      =1  
 233      =1  
 234      =1  #ifndef WQVGA
 235      =1          #ifndef QVGA
 236      =1  #define SUPPORT_OSDPOSITIONMOVE
 237      =1          #endif
 238      =1  #endif
C51 COMPILER V8.16   HS_DISPLAYOSD                                                         03/04/2011 15:51:19 PAGE 5   

 239      =1  
 240      =1  #define SERIAL                                  // include serial communication routines
 241      =1  
 242      =1  //#define SUPPORT_DEBUG                         // Support to use Read & Write in debug OSD Window by remocon.
 243      =1  
 244      =1  //#define DEBUG                                         // include debug information
 245      =1  #ifdef DEBUG
           =1         //#define DEBUG_MAIN
           =1         //#define DEBUG_TIME
           =1         //#define DEBUG_KEYREMO
           =1         //#define DEBUG_TW88
           =1         //#define DEBUG_DECODER
           =1         //#define DEBUG_I2C
           =1         //#define DEBUG_EEP
           =1         //#define DEBUG_OSD
           =1         //#define DEBUG_AUDIO
           =1         //#define DEBUG_SETPANEL
           =1         //#define DEBUG_DTV
           =1         #define DEBUG_PC
           =1         //#define DEBUG_PC_MEAS
           =1         #define DEBUG_PC_COLOR
           =1         //#define DEBUG_COMPONENT
           =1         //#define DEBUG_BANK
           =1         //#define DEBUG_PAUSE
           =1         //#define DEBUG_MCU
           =1 #endif
 265      =1  
 266      =1  #define AUTOCALC_PC                                     // in PC mode, Enable Auto Calcuration
 267      =1  //#define SUPPORT_USERCOLORFROMTXT      // Use color setting of text file in Color mode=USER MODE which is as B
             -rightness(Reg10), Contast(Reg11),
 268      =1                                                                          //    Sat_U(Reg13),Sat_V(Reg14),Sharpness(Reg12,Reg78)                                                                  
 269      =1  //#define SUPPORT_GAMMA
 270      =1  
 271      =1  //#define CHIP_MANUAL_TEST                      // DIPSW#1
 272      =1  
 273      =1  #ifndef INTERNAL_MCU
 274      =1  //#define NO_INITIALIZE                         // After Power switch turn on with DIP SW4 Enable(Low), or pressed MENU button 
             -for internal MCU
 275      =1                                      //     micom works to access only I2C bus by serial command.
 276      =1  #endif
 277      =1  
 278      =1  //#define SUPPORT_KRS_OSDDEMO           // For KRS Company Demo 
 279      =1  //#define SUPPORT_LINE_OSDDEMO
 280      =1  
 281      =1  //-----------------------------------------------------------------------------
 282      =1  //              Special Features
 283      =1  //-----------------------------------------------------------------------------
 284      =1  
 285      =1  #ifndef INTERNAL_MCU
 286      =1  //#define       SUPPORT_DELTA_RGB
 287      =1  #endif
 288      =1  #define SUPPORT_SELECTKEY                       // choose the keymap of using select key or left,right key.
 289      =1  //-----------------------------------------------------------------------------
 290      =1  #endif  //__CONFIG_H__
   2          #include "typedefs.h"
   1      =1  #ifndef __TYPEDEFS__
   2      =1  #define __TYPEDEFS__
   3      =1  
   4      =1  
   5      =1  #define DATA            data
   6      =1  #define PDATA           pdata
   7      =1  #define IDATA           data
C51 COMPILER V8.16   HS_DISPLAYOSD                                                         03/04/2011 15:51:19 PAGE 6   

   8      =1  #define CODE            code
   9      =1  #define CODE_P
  10      =1  #define PDATA_P
  11      =1  #define IDATA_P
  12      =1  #define DATA_P
  13      =1  
  14      =1  #define INTERRUPT( num, name ) name() interrupt num
  15      =1  
  16      =1  #define _between(x, a, b)       (a<=x && x<=b)
  17      =1  #define _swap(a, b)                     { a^=b; b^=a; a^=b; }
  18      =1  
  19      =1  typedef unsigned char   Register;
  20      =1  typedef unsigned char   BYTE;
  21      =1  typedef unsigned short  WORD;
  22      =1  typedef unsigned long   DWORD;
  23      =1  
  24      =1  #define TRUE    1
  25      =1  #define FALSE   0
  26      =1  
  27      =1  //VInputStdDetectMode
  28      =1  #define AUTO    0
  29      =1  
  30      =1  //VInputStd
  31      =1  #define NTSC    1                       
  32      =1  #define PAL             2
  33      =1  #define SECAM   3
  34      =1  #define NTSC4   4
  35      =1  #define PALM    5
  36      =1  #define PALN    6
  37      =1  #define PAL60   7
  38      =1  
  39      =1  #define MAXINPUTSTD     PAL60+1 // 
  40      =1  
  41      =1  #define UNKNOWN 0xfe
  42      =1  #define NOINPUT 0       //0xff
  43      =1  
  44      =1  
  45      =1  
  46      =1  
  47      =1  #define NIL                     0xff
  48      =1  
  49      =1  enum SourceModeTypeEnum
  50      =1  {       
  51      =1          AVMode,            // 0
  52      =1          VGAMode,       // 1
  53      =1          CAM_D,         // 2
  54      =1          CAM_A,         // 3
  55      =1          CAM_B,         // 4
  56      =1          CAM_C,         // 5
  57      =1          CAM_R,         // 6
  58      =1          CAM_AB,        // 7
  59      =1          CAM_CR,        // 8
  60      =1          CAM_AR,        // 9
  61      =1          CAM_RB,        // 10
  62      =1          CAM_AC,        // 11
  63      =1          CAM_CB,        // 12
  64      =1          CAM_RAB_T,     // 13
  65      =1          CAM_RAB_H,     // 14
  66      =1  
  67      =1          CAM_QUAD,      // 15
  68      =1          CAM_ABR_T3,    // 16
  69      =1          CAM_ABR_T4,    // 17
C51 COMPILER V8.16   HS_DISPLAYOSD                                                         03/04/2011 15:51:19 PAGE 7   

  70      =1          SEQ,           // 18
  71      =1          CAM_BA,                 //19
  72      =1          
  73      =1          CAM_BC,
  74      =1          CAM_BR,
  75      =1          CAM_CA,
  76      =1          CAM_ABC,
  77      =1          CAM_ABR,
  78      =1          CAM_ACR,
  79      =1          CAM_BAC,
  80      =1          CAM_BAR,
  81      =1          CAM_BCR,
  82      =1          CAM_CAB,
  83      =1          CAM_CAR,
  84      =1          CAM_CBR,        
  85      =1          CAM_NUM
  86      =1  };
  87      =1  
  88      =1  typedef unsigned char SourceModeType;
  89      =1  
  90      =1  #endif  /* __TYPEDEFS__ */
   3          #include "i2c.h"
   1      =1  #ifndef __I2C_H__
   2      =1  #define __I2C_H__
   3      =1  
   4      =1  
   5      =1  void I2CReadByte3(BYTE *);
   6      =1  void I2CRead8Byte(BYTE *);
   7      =1  #if 0
           =1 void I2CReadByteMSP(BYTE addr, BYTE index, BYTE *pd, BYTE cnt);
           =1 #endif
  10      =1  BYTE I2CWriteByte2(BYTE);
  11      =1  BYTE I2CWriteByte3(BYTE*);
  12      =1  BYTE I2CWrite8Byte(BYTE *);
  13      =1  
  14      =1  void I2CStart(void);
  15      =1  void I2CWriteData(BYTE value);
  16      =1  BYTE I2CReadData(void);
  17      =1  #if 0
           =1 BYTE I2CReadDataWithACK(void);
           =1 #endif
  20      =1  void I2CStop(void);
  21      =1  void I2Cdelay(void);
  22      =1  
  23      =1  
  24      =1  #define WriteTW88(a,b)          WriteI2C(TW88I2CAddress, a, b)
  25      =1  #define ReadTW88(a)                     ReadI2C(TW88I2CAddress, a)
  26      =1  
  27      =1  BYTE WriteTW88_Wait     (BYTE, BYTE);
  28      =1  void WriteADC           (BYTE, BYTE);
  29      =1  BYTE ReadADC            (BYTE);
  30      =1  BYTE ReadADC_TW88(BYTE index);
  31      =1  void WriteADC_TW88(BYTE index, BYTE dat);
  32      =1  
  33      =1  void WriteEEP           (WORD, BYTE);
  34      =1  BYTE ReadEEP            (WORD);
  35      =1  
  36      =1  
  37      =1  BYTE ReadI2C            (BYTE addr, BYTE index);
  38      =1  void WriteI2C           (BYTE addr, BYTE index, BYTE val);
  39      =1  
  40      =1  void WriteI2Cn_(BYTE addr, BYTE *val, BYTE cnt);
C51 COMPILER V8.16   HS_DISPLAYOSD                                                         03/04/2011 15:51:19 PAGE 8   

  41      =1  void WriteI2Cn (BYTE addr, BYTE index, BYTE *val, BYTE cnt);
  42      =1  void WriteI2CnD(BYTE addr, BYTE index, BYTE val, BYTE cnt);
  43      =1  
  44      =1  void ReadI2Cmn(BYTE addr, BYTE wcnt, BYTE rcnt, BYTE *rwdata);
  45      =1  
  46      =1  #define         WriteADC(a,b)   WriteADC_TW88(a,b)
  47      =1  #define         ReadADC(a)              ReadADC_TW88(a)
  48      =1  
  49      =1  #endif  /* __I2C_H__ */
   4          #include "main.h"
   1      =1  #ifndef __MAIN__
   2      =1  #define __MAIN__
   3      =1  
   4      =1  #define ON                                      1
   5      =1  #define OFF                                     0
   6      =1  //#define Hs_debug
   7      =1  //#define       DVR
   8      =1  
   9      =1  //================= DIP SW Definition =========================================
  10      =1  ///#define PIXEL_SINGLE         P0_0
  11      =1  #define DIP_PANEL_SWITCH        P0_0    // Samsung(0) // Sharp-Noticon(1)
  12      =1  #define DIP_AUTO_DETECT         P0_1
  13      =1  #define DIP_EDGE_ENHANCE        P0_2
  14      =1  #define DIP_BW_STRETCH          P0_3
  15      =1  
  16      =1  #define Panel_Enable()          P4=P4|0x08 //andy 980908
  17      =1  #define Panel_Disable()                 P4=P4&0xf7
  18      =1  
  19      =1  #define SetBacklight()      P4=P4|0x04
  20      =1  #define clrBacklight()      P4=P4&0xfb
  21      =1  
  22      =1  
  23      =1  //InputSelection
  24      =1  struct struct_IdName {
  25      =1          BYTE    Id;
  26      =1          BYTE    Name[16];
  27      =1  };
  28      =1  
  29      =1  #define CH_TW2835              1
  30      =1  #define CH_CAMD                2
  31      =1  #define CH_AV                  3
  32      =1  #define PC                                         7
  33      =1  #define ChineseDefaultMenu   8
  34      =1  
  35      =1  #define SVIDEO                          2
  36      =1  #define COMPONENT                       3
  37      =1  //#define ANALOGDTV                     4
  38      =1  #define DTV                                     4
  39      =1  #define TV                                      5
  40      =1  #define SCART                           6
  41      =1  
  42      =1  #define DIGITALVGA                      8
  43      =1  
  44      =1  #define AIRTV                           0 //9
  45      =1  #define CABLETV                         1 //0xa
  46      =1  
  47      =1  
  48      =1  #define TVTUNER                         0xd             //10
  49      =1  #define MUTE                            1       
  50      =1  #define MENU                            2       
  51      =1  #define TVVOL                           4       
  52      =1  #define CC                                      8       
C51 COMPILER V8.16   HS_DISPLAYOSD                                                         03/04/2011 15:51:19 PAGE 9   

  53      =1  #define INPUTINFO                       0x10
  54      =1  #define PCINFO                          0x20
  55      =1  #define GAUGEINFO           0x40
  56      =1  //#define RATINGINFO                    0x40
  57      =1  #define TVCHN                           0x80
  58      =1  //#define MUTE                          0x40
  59      =1  
  60      =1  #define YPBPR_480i                      0
  61      =1  #define YPBPR_576i                      1
  62      =1  #define YPBPR_480p                      2
  63      =1  #define YPBPR_576p                      3
  64      =1  #define YPBPR_1080i                     4
  65      =1  #define YPBPR_720p                      5
  66      =1  #define YPBPR_720p50            6
  67      =1  
  68      =1  
  69      =1  //--------------------------- P0 Define -----------------------------
  70      =1  #define SEL_MIX                 P0_6    // 
  71      =1  //--------------------------- P1 Define -----------------------------
  72      =1  #define SEL_DVI                 P3_5    //LJY062001             
  73      =1  
  74      =1  #define TW88HWReset                     P3_4    //LJY001010 //LJY000721
  75      =1  #define PowerUp             P1_4
  76      =1  //======================= CDS Control ================================= 
  77      =1  #define CDS_CTRL           P1_5
  78      =1  extern BYTE     SelectModeType;
  79      =1  extern BYTE InputSelection;
  80      =1  extern BYTE SEQTime;
  81      =1  extern BYTE     Priority;
  82      =1  extern BYTE AutoDayNight;
  83      =1  extern BYTE PowerFlag;
  84      =1  
  85      =1  BYTE keyIn(void);
  86      =1  void TimerForRemocon(void);
  87      =1  void TimerForTick(void);
  88      =1  void DisableRemoconInt(void);
  89      =1  BYTE SetSupport_remocon(BYTE newd);
  90      =1  
  91      =1  void delay(BYTE cnt);
  92      =1  
  93      =1  BYTE RS_ready(void);
  94      =1  BYTE RS_rx(void);
  95      =1  void RS_tx(BYTE tx_buf);
  96      =1  
  97      =1  BYTE RS2_rx(void);
  98      =1  void RS2_tx(BYTE tx_buf);
  99      =1  
 100      =1  void NewLine(void);
 101      =1  void PutsP(PDATA_P BYTE *ptr);
 102      =1  #ifdef Hs_debug
           =1 void MonWriteI2C(BYTE addr, BYTE index, BYTE val);
           =1 BYTE MonReadI2C(BYTE addr, BYTE index);
           =1 #endif
 106      =1  BYTE Asc1Bin(BYTE asc);
 107      =1  BYTE Asc2Bin(PDATA_P BYTE *s);
 108      =1  
 109      =1  void I2CDeviceInitialize( CODE_P BYTE *RegSet);
 110      =1  
 111      =1  //void RestartSystemClock(WORD clock_hm);
 112      =1  WORD GetTime_ms(void);
 113      =1  BYTE GetTime_H(void);
 114      =1  BYTE GetTime_M(void);
C51 COMPILER V8.16   HS_DISPLAYOSD                                                         03/04/2011 15:51:19 PAGE 10  

 115      =1  void ChangeTime_H( char add );
 116      =1  void ChangeTime_M( char add );
 117      =1  //WORD GetWakeupTime(void);
 118      =1  //void SetWakeupTime(WORD wtime);
 119      =1  
 120      =1  
 121      =1  //WORD GetOffTime(void);
 122      =1  //void SetOffTime(WORD wtime);
 123      =1  //BYTE GetSleepTimer(void);
 124      =1  //void SetSleepTimer(BYTE stime);
 125      =1  WORD DiffTime_ms( WORD stime, WORD etime );
 126      =1  //void SetLastBlockedTime(void);
 127      =1  void SetLastCCTime(void);                               //ljy010904...CC_FIX_CLEAR_ON_TIME
 128      =1  
 129      =1  void SetOSDLastKeyInTime(void);
 130      =1  WORD GetOSDLastKeyInTime(void);
 131      =1  WORD GetIVF(void);
 132      =1  DWORD GetIHF(void);
 133      =1  BYTE ReadVInputSTD(void);
 134      =1  void SetVInputStd(BYTE newd);
 135      =1  BYTE GetVInputStd(void);
 136      =1  BYTE GetInputSelection(void);
 137      =1  #ifdef ADD_ANALOGPANEL
           =1 BYTE IsAnalogOn(void);
           =1 #endif
 140      =1  void InitVideoData(BYTE src);
 141      =1  void ChangeVInputStdDetectMode(BYTE val);
 142      =1  BYTE GetVInputStdInx(void);
 143      =1  
 144      =1  void MonWriteI2Cn_(BYTE addr, BYTE *val, BYTE cnt) ;
 145      =1  
 146      =1  ///void Usage(void);
 147      =1  #ifdef Hs_debug
           =1         void Prompt(void);
           =1 #endif
 150      =1  void DebugKeyIn(BYTE ikey);
 151      =1  void DVIPowerDown(bit flag);
 152      =1  void PowerDown_XTAL(bit flag);
 153      =1  
 154      =1  void ChangeInput(BYTE newsel);
 155      =1  
 156      =1  
 157      =1  void WaitPowerOn(void);
 158      =1  void PowerOff(void);
 159      =1  BYTE GetNextInputSelection(void);
 160      =1  
 161      =1  BYTE WantToStopTVScan(void);
 162      =1  
 163      =1  //BYTE IsTW8801(void);
 164      =1  //BYTE IsTW8803(void);
 165      =1  //BYTE ConvertVideoVSAT(BYTE reg);
 166      =1  
 167      =1  BYTE IsNoInput(void);
 168      =1  void LoadEEPROM (void);
 169      =1  void Hs_InitVars(void);
 170      =1  void AdjustAutoDayNight(BYTE val);
 171      =1  void ACCPowerControl(void);
 172      =1  struct RegisterInfo
 173      =1  {
 174      =1     int  Min;
 175      =1     int  Max;
 176      =1     int  Default;
C51 COMPILER V8.16   HS_DISPLAYOSD                                                         03/04/2011 15:51:19 PAGE 11  

 177      =1  };
 178      =1  struct LongRegisterInfo
 179      =1  {
 180      =1     WORD Min;
 181      =1     WORD Max;
 182      =1     WORD Default;
 183      =1  };
 184      =1  
 185      =1  #endif  // __MAIN__
   5          #include "tw88.h"
   1      =1  #ifndef __TW88__
   2      =1  #define __TW88__
   3      =1  
   4      =1  #include "main.h"
   1      =2  #ifndef __MAIN__
           =2 #define __MAIN__
           =2 
           =2 #define ON                                      1
           =2 #define OFF                                     0
           =2 //#define Hs_debug
           =2 //#define       DVR
           =2 
           =2 //================= DIP SW Definition =========================================
           =2 ///#define PIXEL_SINGLE         P0_0
           =2 #define DIP_PANEL_SWITCH        P0_0    // Samsung(0) // Sharp-Noticon(1)
           =2 #define DIP_AUTO_DETECT         P0_1
           =2 #define DIP_EDGE_ENHANCE        P0_2
           =2 #define DIP_BW_STRETCH          P0_3
           =2 
           =2 #define Panel_Enable()          P4=P4|0x08 //andy 980908
           =2 #define Panel_Disable()                 P4=P4&0xf7
           =2 
           =2 #define SetBacklight()      P4=P4|0x04
           =2 #define clrBacklight()      P4=P4&0xfb
           =2 
           =2 
           =2 //InputSelection
           =2 struct struct_IdName {
           =2         BYTE    Id;
           =2         BYTE    Name[16];
           =2 };
           =2 
           =2 #define CH_TW2835              1
           =2 #define CH_CAMD                2
           =2 #define CH_AV                  3
           =2 #define PC                                         7
           =2 #define ChineseDefaultMenu   8
           =2 
           =2 #define SVIDEO                          2
           =2 #define COMPONENT                       3
           =2 //#define ANALOGDTV                     4
           =2 #define DTV                                     4
           =2 #define TV                                      5
           =2 #define SCART                           6
           =2 
           =2 #define DIGITALVGA                      8
           =2 
           =2 #define AIRTV                           0 //9
           =2 #define CABLETV                         1 //0xa
           =2 
           =2 
           =2 #define TVTUNER                         0xd             //10
C51 COMPILER V8.16   HS_DISPLAYOSD                                                         03/04/2011 15:51:19 PAGE 12  

           =2 #define MUTE                            1       
           =2 #define MENU                            2       
           =2 #define TVVOL                           4       
           =2 #define CC                                      8       
           =2 #define INPUTINFO                       0x10
           =2 #define PCINFO                          0x20
           =2 #define GAUGEINFO           0x40
           =2 //#define RATINGINFO                    0x40
           =2 #define TVCHN                           0x80
           =2 //#define MUTE                          0x40
           =2 
           =2 #define YPBPR_480i                      0
           =2 #define YPBPR_576i                      1
           =2 #define YPBPR_480p                      2
           =2 #define YPBPR_576p                      3
           =2 #define YPBPR_1080i                     4
           =2 #define YPBPR_720p                      5
           =2 #define YPBPR_720p50            6
           =2 
           =2 
           =2 //--------------------------- P0 Define -----------------------------
           =2 #define SEL_MIX                 P0_6    // 
           =2 //--------------------------- P1 Define -----------------------------
           =2 #define SEL_DVI                 P3_5    //LJY062001             
           =2 
           =2 #define TW88HWReset                     P3_4    //LJY001010 //LJY000721
           =2 #define PowerUp             P1_4
           =2 //======================= CDS Control ================================= 
           =2 #define CDS_CTRL           P1_5
           =2 extern BYTE     SelectModeType;
           =2 extern BYTE InputSelection;
           =2 extern BYTE SEQTime;
           =2 extern BYTE     Priority;
           =2 extern BYTE AutoDayNight;
           =2 extern BYTE PowerFlag;
           =2 
           =2 BYTE keyIn(void);
           =2 void TimerForRemocon(void);
           =2 void TimerForTick(void);
           =2 void DisableRemoconInt(void);
           =2 BYTE SetSupport_remocon(BYTE newd);
           =2 
           =2 void delay(BYTE cnt);
           =2 
           =2 BYTE RS_ready(void);
           =2 BYTE RS_rx(void);
           =2 void RS_tx(BYTE tx_buf);
           =2 
           =2 BYTE RS2_rx(void);
           =2 void RS2_tx(BYTE tx_buf);
           =2 
           =2 void NewLine(void);
           =2 void PutsP(PDATA_P BYTE *ptr);
           =2 #ifdef Hs_debug
           =2 void MonWriteI2C(BYTE addr, BYTE index, BYTE val);
           =2 BYTE MonReadI2C(BYTE addr, BYTE index);
           =2 #endif
           =2 BYTE Asc1Bin(BYTE asc);
           =2 BYTE Asc2Bin(PDATA_P BYTE *s);
           =2 
           =2 void I2CDeviceInitialize( CODE_P BYTE *RegSet);
           =2 
C51 COMPILER V8.16   HS_DISPLAYOSD                                                         03/04/2011 15:51:19 PAGE 13  

           =2 //void RestartSystemClock(WORD clock_hm);
           =2 WORD GetTime_ms(void);
           =2 BYTE GetTime_H(void);
           =2 BYTE GetTime_M(void);
           =2 void ChangeTime_H( char add );
           =2 void ChangeTime_M( char add );
           =2 //WORD GetWakeupTime(void);
           =2 //void SetWakeupTime(WORD wtime);
           =2 
           =2 
           =2 //WORD GetOffTime(void);
           =2 //void SetOffTime(WORD wtime);
           =2 //BYTE GetSleepTimer(void);
           =2 //void SetSleepTimer(BYTE stime);
           =2 WORD DiffTime_ms( WORD stime, WORD etime );
           =2 //void SetLastBlockedTime(void);
           =2 void SetLastCCTime(void);                               //ljy010904...CC_FIX_CLEAR_ON_TIME
           =2 
           =2 void SetOSDLastKeyInTime(void);
           =2 WORD GetOSDLastKeyInTime(void);
           =2 WORD GetIVF(void);
           =2 DWORD GetIHF(void);
           =2 BYTE ReadVInputSTD(void);
           =2 void SetVInputStd(BYTE newd);
           =2 BYTE GetVInputStd(void);
           =2 BYTE GetInputSelection(void);
           =2 #ifdef ADD_ANALOGPANEL
           =2 BYTE IsAnalogOn(void);
           =2 #endif
           =2 void InitVideoData(BYTE src);
           =2 void ChangeVInputStdDetectMode(BYTE val);
           =2 BYTE GetVInputStdInx(void);
           =2 
           =2 void MonWriteI2Cn_(BYTE addr, BYTE *val, BYTE cnt) ;
           =2 
           =2 ///void Usage(void);
           =2 #ifdef Hs_debug
           =2         void Prompt(void);
           =2 #endif
           =2 void DebugKeyIn(BYTE ikey);
           =2 void DVIPowerDown(bit flag);
           =2 void PowerDown_XTAL(bit flag);
           =2 
           =2 void ChangeInput(BYTE newsel);
           =2 
           =2 
           =2 void WaitPowerOn(void);
           =2 void PowerOff(void);
           =2 BYTE GetNextInputSelection(void);
           =2 
           =2 BYTE WantToStopTVScan(void);
           =2 
           =2 //BYTE IsTW8801(void);
           =2 //BYTE IsTW8803(void);
           =2 //BYTE ConvertVideoVSAT(BYTE reg);
           =2 
           =2 BYTE IsNoInput(void);
           =2 void LoadEEPROM (void);
           =2 void Hs_InitVars(void);
           =2 void AdjustAutoDayNight(BYTE val);
           =2 void ACCPowerControl(void);
           =2 struct RegisterInfo
C51 COMPILER V8.16   HS_DISPLAYOSD                                                         03/04/2011 15:51:19 PAGE 14  

           =2 {
           =2    int  Min;
           =2    int  Max;
           =2    int  Default;
           =2 };
           =2 struct LongRegisterInfo
           =2 {
           =2    WORD Min;
           =2    WORD Max;
           =2    WORD Default;
           =2 };
           =2 
           =2 #endif  // __MAIN__
   5      =1  
   6      =1  //Value for register 0x44
   7      =1  //#define DECODER_YCbCr         0x08            //xxxx bbxx
   8      =1  //#define RGB_RGB                               0x0C
   9      =1  
  10      =1  #define TW88_FPLL0                      0xf9
  11      =1  #define TW88_FPLL1                      0xfa
  12      =1  #define TW88_FPLL2                      0xfb
  13      =1  #define TW88_FSS                        0xfc
  14      =1  #define TW88_FSS_PD                     0xfd
  15      =1  #define TW88_PLL_DIV            0xfe
  16      =1  
  17      =1  //#define TW88_XSCALE                   0x5d
  18      =1  //#define TW88_YSCALE                   0x5e
  19      =1  
  20      =1  #define TW88_XUSCALELO          0x60
  21      =1  #define TW88_XDSCALELO          0x61
  22      =1  #define TW88_YUSCALELO          0x62
  23      =1  #define TW88_XYSCALEHI          0x63
  24      =1  #define TW88_XUSCALEFINE        0x69
  25      =1  #define TW88_YUSCALEFINE        0x6a
  26      =1  
  27      =1  //Power Mgt
  28      =1  #define POWER_OFF                       0
  29      =1  #define POWER_STANDBY           1
  30      =1  #define POWER_SUSPEND           2
  31      =1  #define POWER_ON                        3
  32      =1  
  33      =1  //void TWChipsDetect(void);
  34      =1  void SetAutoDetectStd(void);
  35      =1  void ClearAutoDetectStd(BYTE);
  36      =1  void I2CDeviceInitialize( CODE_P BYTE *RegSet);
  37      =1  
  38      =1  
  39      =1  //0x63.. Register Group
  40      =1  #define GROUP_YCbCr                     0x40
  41      =1  #define GROUP_RGB                       0
  42      =1  #define SelectPanelAttrRegGroup(A)                              WriteTW88(0x70, (ReadTW88(0x70) & 0xbf) | A)
  43      =1  
  44      =1  //#if defined TW8801 || defined TW8803
  45      =1  #define FB_MAIN         2
  46      =1  #define FB_NORMAL       1
  47      =1  #define FB_RGB          0
  48      =1  //void SetFBmode( BYTE mode );
  49      =1  //#endif // TW8801
  50      =1  
  51      =1  
  52      =1  //=============================================================================
  53      =1  //                                   LCD Functions   
C51 COMPILER V8.16   HS_DISPLAYOSD                                                         03/04/2011 15:51:19 PAGE 15  

  54      =1  //=============================================================================
  55      =1  BYTE GetLCDPowerState(void);
  56      =1  void SetLCDPowerState(BYTE dat);
  57      =1  
  58      =1  BYTE IsFreeRun(void);
  59      =1  void PanelFreeRun(BYTE on);
  60      =1  void PanelBlack(BYTE on);
  61      =1  
  62      =1  void PanelMute(BYTE on);
  63      =1  
  64      =1  void LCDPowerON(BYTE mute); 
  65      =1  void LCDPowerOFF(void);
  66      =1  #ifdef Hs_debug
           =1 void LCDPower(void);
           =1 #endif
  69      =1  void DPMSmodeOFF(void);
  70      =1  void DPMSmodeON(void);
  71      =1  //=============================================================================
  72      =1  //                              Get PC Parameter Functions   
  73      =1  //=============================================================================
  74      =1  void GetInitPanelAttribute1(void);
  75      =1  //void GetInitPanelAttribute2(void);
  76      =1  void DefaultPanelAttributeForVideo(void);
  77      =1  void SetPVR(WORD pvr);
  78      =1  void SetPHR(WORD phr);
  79      =1  WORD GetPVR(void);
  80      =1  WORD GetPHR(void);
  81      =1  WORD GetHPN(void);
  82      =1  WORD GetVPN(void);
  83      =1  
  84      =1  //WORD GetVactive(void);
  85      =1  
  86      =1  WORD GetHstart(void);
  87      =1  WORD GetHend(void);
  88      =1  WORD GetVstart(void);
  89      =1  WORD GetVend(void);
  90      =1  void TuneLineBuffer(BYTE field);
  91      =1  void TuneLineBuffer4Video(BYTE field);
  92      =1  
  93      =1  #if defined (SUPPORT_DTV)
           =1 void SetCoarstForDTV(BYTE en);
           =1 #endif
  96      =1  
  97      =1  WORD GetHactiveStart(void);
  98      =1  WORD GetHactiveEnd(void);
  99      =1  WORD GetVactiveStart(void);
 100      =1  //WORD GetVactiveLen(void);
 101      =1  BYTE GetVBackPorch(void);
 102      =1  void SetVBackPorch(BYTE val);
 103      =1  WORD GetPHP(void);
 104      =1  void SetPHP(WORD php);
 105      =1  void SetPVP(WORD period);
 106      =1  WORD GetPVP(void);
 107      =1  //void SetPanelRelatedRegisters(void);
 108      =1  //BYTE ChangedHPN(void);
 109      =1  //WORD GetVSUD(void);
 110      =1  
 111      =1  void SetDefaultPLL(void);
 112      =1  //void SetDefaultFPHSperiod(void);
 113      =1  //BYTE CalcPHP(DWORD ppf, BYTE tol);
 114      =1  //void ChangeFPHSperiod4DecoderInput(WORD vsud, BYTE tol);
 115      =1  
C51 COMPILER V8.16   HS_DISPLAYOSD                                                         03/04/2011 15:51:19 PAGE 16  

 116      =1  //-------------------------------------------------------------------
 117      =1  //                  Set Active Region Functions
 118      =1  //-------------------------------------------------------------------
 119      =1  void SetHactiveStart(WORD hstart);
 120      =1  void SetHactiveEnd(WORD hend);
 121      =1  void SetVactiveStart(WORD vstart);
 122      =1  //void SetVactiveLen(WORD van, WORD vstart);
 123      =1  void SetVactiveLen(WORD van);
 124      =1  //=============================================================================
 125      =1  //                         Set Measurement Window Functions   
 126      =1  //=============================================================================
 127      =1  void SetMeasureWindowH(WORD start, WORD stop);
 128      =1  void SetMeasureWindowV(WORD start, WORD stop);
 129      =1  //=============================================================================
 130      =1  //                              Video Input Functions   
 131      =1  //=============================================================================
 132      =1  BYTE IsVideoInput(void);
 133      =1  BYTE DetectDecoderInput(void);
 134      =1  //=============================================================================
 135      =1  //
 136      =1  //=============================================================================
 137      =1  void AutoPHPCalEnable(void);
 138      =1  void AutoPHPCalDisable(void);
 139      =1  
 140      =1  void MakeStartInt(void);
 141      =1  void AVGAInput(void);
 142      =1  void DVIInput(void);
 143      =1  //void DVGAInput(void);
 144      =1  void DisableDVGA(void);
 145      =1  
 146      =1  void COMPOSITE1Input(void);
 147      =1  void COMPOSITE2Input(void);
 148      =1  void COMPOSITE3Input(void);
 149      =1  
 150      =1  void SVIDEOInput(void);
 151      =1  void COMPONENTInput(void);
 152      =1  void ANALOGDTVInput(void);
 153      =1  void DTVInput(void);
 154      =1  void TVInput(void);
 155      =1  void SCARTInput(void);
 156      =1  
 157      =1  //=============================================================================
 158      =1  //                          Measurement Functions
 159      =1  //=============================================================================
 160      =1  ///void SetPanelBitOrder(BYTE swap);
 161      =1  //void SetPanelSingleDouble(BYTE single);
 162      =1  
 163      =1  BYTE MeasureAndWait(BYTE flag);
 164      =1  
 165      =1  //WORD GetHCounter1(BYTE field);
 166      =1  //void SetHInitial(BYTE field, WORD counter);
 167      =1  //=============================================================================
 168      =1  //                          Invert Polarity Functions
 169      =1  //=============================================================================
 170      =1  void InvertHSYNCPolarity(void);
 171      =1  void InvertVSYNCPolarity(void);
 172      =1  //=============================================================================
 173      =1  //            Interrupt / SW Reset Control Functions
 174      =1  //=============================================================================
 175      =1  void SetInt(void);
 176      =1  //void ClearInt(void);
 177      =1  void SetEnDet(void);
C51 COMPILER V8.16   HS_DISPLAYOSD                                                         03/04/2011 15:51:19 PAGE 17  

 178      =1  void ClearEnDet(void);
 179      =1  void SWReset(void);
 180      =1  //void ClearSYNCLossStatus(void);
 181      =1  //void ClearSYNCChangeStatus(void);
 182      =1  //=============================================================================
 183      =1  //
 184      =1  //=============================================================================
 185      =1  BYTE IsBypassmode(void);
 186      =1  //BYTE IsInteraced(void);
 187      =1  void Clear_bypass(void);
 188      =1  void MaskOnSYNCInt(void);
 189      =1  void MaskOffSYNCInt(void);
 190      =1  //=============================================================================
 191      =1  //                                    ZoomControl
 192      =1  //=============================================================================
 193      =1  void BypassZoom(void);
 194      =1  
 195      =1  void XscaleU(DWORD scale);
 196      =1  void XscaleD(DWORD scale);
 197      =1  void XScale2(DWORD scale);
 198      =1  void YScale2(DWORD scale);
 199      =1  WORD GetYScale(void);
 200      =1  //=============================================================================
 201      =1  //
 202      =1  //=============================================================================
 203      =1  WORD GetHSYNCPulse(void);
 204      =1  WORD GetVSYNCPulse(void);
 205      =1  //#if defined TW8801 || defined TW8803
 206      =1  WORD GetRelativePosition(void);
 207      =1  //#endif
 208      =1  //=============================================================================
 209      =1  //                                                              MISC2 for decoder
 210      =1  //=============================================================================
 211      =1  #define BLUE_DECODER            2
 212      =1  #define BLACK_DECODER           0
 213      =1  
 214      =1  BYTE ForceDecoderOutput(BYTE color);
 215      =1  BYTE ClearForcedDecoderOutput(void);
 216      =1  //=============================================================================
 217      =1  //                                                              CC and EDS
 218      =1  //=============================================================================
 219      =1  BYTE GetCCStatus(void);
 220      =1  void DisableCC(void);
 221      =1  void EnableCC(void);
 222      =1  BYTE GetCCData(void);
 223      =1  BYTE IsCCEnabled(void);
 224      =1  void EnableEDS(void);
 225      =1  void DisableEDS(void);
 226      =1  void RecoverCCOverflow(void);
 227      =1  
 228      =1  #define CCFIFOHalfFull()                        (ReadDecoder(CSTATUS) & 0x04)
 229      =1  //=============================================================================
 230      =1  //                                                              Internal PLL
 231      =1  //=============================================================================
 232      =1  BYTE GetPOST(void);
 233      =1  void SetPLLS(BYTE plls);
 234      =1  BYTE GetREFDM(void);
 235      =1  void SetREFDM(BYTE refdm);
 236      =1  DWORD GetFBDN(void);
 237      =1  void SetFBDN(WORD fbdn, BYTE vcsel);
 238      =1  DWORD GetPPF(void);
 239      =1  void ChangeInternPLL(DWORD _PPF);
C51 COMPILER V8.16   HS_DISPLAYOSD                                                         03/04/2011 15:51:19 PAGE 18  

 240      =1  
 241      =1  //=============================================================================
 242      =1  //                                                              Macros for attribute
 243      =1  //=============================================================================
 244      =1  //#define       GetOSDTransReg()                                                ReadTW88(0xAE)
 245      =1  //#define SetOSDTransReg(AlphaV)                                        WriteTW88(0xAE, (BYTE)AlphaV )
 246      =1  
 247      =1  #define GetPanelContrastReg(gccolor)                    ReadTW88(0x71+gccolor)
 248      =1  #define SetPanelContrastReg(sccolor, cval)              WriteTW88(0x71+sccolor,cval)
 249      =1  
 250      =1  #define GetPanelBrightnessReg(gbcolor)                  ReadTW88(0x74+gbcolor);
 251      =1  #define SetPanelBrightnessReg(sbcolor, bval)    WriteTW88(0x74+sbcolor,bval);
 252      =1  
 253      =1  #define SetDTVBrightnessReg(bval)                               WriteTW88(0x74,bval);
 254      =1  
 255      =1  #define GetPanelSaturationReg(gbcolor)                  ReadTW88(0x72+gbcolor);
 256      =1  #define SetPanelSaturationReg(sbcolor, bval)    WriteTW88(0x72+sbcolor,bval);
 257      =1  
 258      =1  #define SetPanelSharpnessReg(bval)                              WriteTW88(0x78,((bval&0x07)|0x38) );
 259      =1  
 260      =1  #define SetPanelHueReg(bval)                                    WriteTW88(0x70, (ReadTW88(0x70) & 0xc0 | (bval)) );
 261      =1  
 262      =1  #define GetVideoContrastReg()                                   ReadDecoder(CONTRAST)
 263      =1  #define SetVideoContrastReg(vcval)                              WriteDecoder(CONTRAST, vcval)
 264      =1  
 265      =1  #define GetVideoBrightnessReg()                                 ReadDecoder(BRIGHT)
 266      =1  #define SetVideoBrightnessReg(vbval)                    WriteDecoder(BRIGHT, vbval )
 267      =1  
 268      =1  #define GetVideoSaturationReg(gvstype)                  ReadDecoder(SAT_U+gvstype)
 269      =1  #define SetVideoSaturationReg(svstype, vsval)   WriteDecoder(SAT_U+svstype,     vsval)
 270      =1  
 271      =1  #define GetVideoHueReg()                                                ReadDecoder(HUE)
 272      =1  #define SetVideoHueReg(vhval)                                   WriteDecoder(HUE,       vhval )
 273      =1  
 274      =1  #define GetVideoSharpnessRegDef                                 (ReadDecoder(SHARPNESS) & 0x0f) 
 275      =1  
 276      =1  #define GetVideoSharpnessReg()                                  GetVideoSharpnessRegDef
 277      =1  //#define       SetVideoSharpnessReg(vshval)                    WriteDecoder(SHARPNESS, vshval )
 278      =1  #define SetVideoSharpnessReg(vshval)                    WriteDecoder(SHARPNESS, ((ReadDecoder(SHARPNESS) & 0xf0) | (vshval 
             -& 0x0f) ) );
 279      =1  
 280      =1  #ifdef TW9908
           =1 #define SetVideoVPeakingReg(vshval)
           =1 #else
 283      =1  #define SetVideoVPeakingReg(vshval)                             WriteDecoder(V_PEAKING, ((ReadDecoder(V_PEAKING) & 0xf8) | (vshval 
             -& 0x07) ) );
 284      =1  #endif
 285      =1  
 286      =1  #define SetVideoHfilterReg(val)                                 WriteDecoder(HFILTER, ((ReadDecoder(HFILTER) & 0xf8) | (val & 0x07) )|
             -0x08 );
 287      =1  //----------------------------------------------------------------------------------
 288      =1  //color type
 289      =1  #define RED             0
 290      =1  #define GREEN   1
 291      =1  #define BLUE    2
 292      =1  #define WHITE   3
 293      =1  //saturation type
 294      =1  #define U_SAT   0
 295      =1  #define V_SAT   1
 296      =1  
 297      =1  //Alpha Blending Level
 298      =1  #define _0              0
C51 COMPILER V8.16   HS_DISPLAYOSD                                                         03/04/2011 15:51:19 PAGE 19  

 299      =1  #define _25             0x12
 300      =1  #define _37_5   0x13
 301      =1  #define _50             0x14
 302      =1  #define _100    0x18
 303      =1  
 304      =1  
 305      =1  /*
 306      =1  BYTE Mapping( int fromValue, struct RegisterInfo fromRange,
 307      =1                                   int * toValue, struct RegisterInfo toRange );
 308      =1  */
 309      =1  BYTE Mapping1( int fromValue, CODE_P struct RegisterInfo *fromRange,
 310      =1                                   int * toValue, CODE_P struct RegisterInfo *toRange );
 311      =1  #ifdef KEILC
 312      =1  #define Mapping2( A, B, C, D )                  Mapping1( A, B, C, D )
 313      =1  #define Mapping3( A, B, C, D )                  Mapping1( A, B, C, D )
 314      =1  #else
           =1 BYTE Mapping2( int fromValue, IDATA_P struct RegisterInfo *fromRange,
           =1                                  int * toValue, CODE_P struct RegisterInfo *toRange );
           =1 BYTE Mapping3( int fromValue, CODE_P struct RegisterInfo *fromRange,
           =1                                  int * toValue, IDATA_P struct RegisterInfo *toRange );
           =1 #endif
 320      =1  
 321      =1  BYTE GetAttributesFromNTSCSettings(BYTE index);
 322      =1  
 323      =1  #endif  // __TW88__
 324      =1  
   6          #include "osdbasic.h"
   1      =1  //osd_basic.h
   2      =1  //LJY11012001
   3      =1  #ifndef __OSD_BASIC__
   4      =1  #define __OSD_BASIC__
   5      =1  
   6      =1  // osd_basic.h
   7      =1  // char code
   8      =1  //#include "apilib.h"
   9      =1  
  10      =1  //ljy052903
  11      =1  //definition for internal OSD
  12      =1  #define FONT_WIDTH_TW88                 12
  13      =1  #define FONT_HEIGHT_TW88                18
  14      =1  #define PIXS_PER_XSTEP_TW88             8
  15      =1  #define LINES_PER_YSTEP_TW88    4
  16      =1  #define MAX_OSDWINDOW_TW88              8
  17      =1  
  18      =1  // Using TW88 OSD for Menu
  19      =1  #define FONT_WIDTH                      12
  20      =1  #define FONT_HEIGHT                     18
  21      =1  #define PIXS_PER_XSTEP          8
  22      =1  #define LINES_PER_YSTEP         4
  23      =1  #define MAX_OSDWINDOW           4
  24      =1  
  25      =1  #define MAX_FONT_BYTES          27
  26      =1  #define RAMFONT         0xFE
  27      =1  #define ROMFONT         0xFF
  28      =1  #define NO_UDFONT                       226 
  29      =1  
  30      =1  #define FONT_ROM        1
  31      =1  #define FONT_RAM        2
  32      =1  
  33      =1  
  34      =1  /////////////////////////////////
  35      =1  // Old Registers...
C51 COMPILER V8.16   HS_DISPLAYOSD                                                         03/04/2011 15:51:19 PAGE 20  

  36      =1  /*
  37      =1          #define TW88_WIN1ATTR           0x76
  38      =1          #define TW88_WIN1XSTART         0x77
  39      =1          #define TW88_WIN1YSTART         0x78
  40      =1          #define TW88_WIN1WIDTH          0x79
  41      =1          #define TW88_WIN1HEIGHT         0x7a
  42      =1          #define TW88_WIN1BRDATTR        0x7b
  43      =1          #define TW88_WIN1BRDWIDTH       0x7c
  44      =1          #define TW88_WIN1BRDHEIGHT      0x7d
  45      =1          #define TW88_WIN1XSPACE         0x7e            // between characters.
  46      =1          #define TW88_WIN1YSPACE         0x7f
  47      =1          #define TW88_WIN1SADDR          0x80            // starting address of OSD ram for Windows 1
  48      =1  */
  49      =1  /////////////////////////////////
  50      =1  
  51      =1  // OSD
  52      =1  #define TW88_ENABLERAM          0x94    // TW8804C
  53      =1  #define TW88_FONTRAMADDR        0x99    // TW8804C
  54      =1  #define TW88_FONTRAMDATA        0x9a    // TW8804C
  55      =1  #define TW88_OSDRAMADDRHI       0x95    // TW8804C
  56      =1  #define TW88_OSDRAMADDRLO       0x96    // TW8804C
  57      =1  #define TW88_OSDRAMDATAHI       0x97    // TW8804C
  58      =1  #define TW88_OSDRAMDATALO       0x98    // TW8804C
  59      =1  #define TW88_MULTISTART         0x9b    // TW8804C
  60      =1  #define TW88_OSDLOCKUPSEL       0x9c
  61      =1  #define TW88_WINNUM                     0x9e    // TW8804C
  62      =1  #define TW88_WINATTR            0x9f    //
  63      =1  #define TW88_WINXSTART          0xa1    //
  64      =1  #define TW88_WINYSTART          0xa2    //
  65      =1  #define TW88_WINSTART_HI        0xa0    //
  66      =1  #define TW88_WINWIDTH           0xa3    //
  67      =1  #define TW88_WINHEIGHT          0xa4    //
  68      =1  #define TW88_WINBRDATTR         0xa5    //
  69      =1  #define TW88_WINBRDWIDTH        0xa6    //
  70      =1  #define TW88_WINBRDHEIGHT       0xa7    //
  71      =1  #define TW88_WINSPACE           0xa8    // between characters.
  72      =1  #define TW88_WINZOOM            0xa9    //
  73      =1  #define TW88_WINSADDRHI         0xa9    // starting address of OSD ram for Windows 1
  74      =1  #define TW88_WINSADDRLO         0xaa    // starting address of OSD ram for Windows 1
  75      =1  
  76      =1  #define TW88_WINSHADOW          0xab    //
  77      =1  #define TW88_WINBLENDING        0xac    //
  78      =1  #define TW88_WINCHEFFECT        0xad    //
  79      =1  
  80      =1  
  81      =1  //Attributes for OSD
  82      =1  #define WINZOOMx1                       0x01
  83      =1  #define WINZOOMx2                       0x02
  84      =1  #define WINZOOMx3                       0x03
  85      =1  #define WINZOOMx4                       0x04
  86      =1  #define SHOW                            0x08    
  87      =1  
  88      =1  #define EXTENDED_COLOR          0x80
  89      =1  #define BG_COLOR_BLACK          0x00    //For background color of window, border, and char. 
  90      =1  #define BG_COLOR_RED            0x40    
  91      =1  #define BG_COLOR_GREEN          0x20
  92      =1  #define BG_COLOR_YELLOW         0x60
  93      =1  #define BG_COLOR_BLUE           0x10
  94      =1  #define BG_COLOR_MAGENTA        0x50
  95      =1  #define BG_COLOR_CYAN           0x30
  96      =1  #define BG_COLOR_WHITE          0x70
  97      =1  #define BG_COLOR_TRANS          0x80    
C51 COMPILER V8.16   HS_DISPLAYOSD                                                         03/04/2011 15:51:19 PAGE 21  

  98      =1  #define BG_COLOR_MASK           0xf0    
  99      =1  
 100      =1  #define CH_COLOR_BLACK          0x00    //For color of char.
 101      =1  #define CH_COLOR_RED            0x04    
 102      =1  #define CH_COLOR_GREEN          0x02
 103      =1  #define CH_COLOR_YELLOW         0x06
 104      =1  #define CH_COLOR_BLUE           0x01
 105      =1  #define CH_COLOR_MAGENTA        0x05
 106      =1  #define CH_COLOR_CYAN           0x03
 107      =1  #define CH_COLOR_WHITE          0x07
 108      =1  #define CH_BLINK                        0x08    
 109      =1  #define CH_COLOR_MASK           0x0f    
 110      =1  
 111      =1  #define CL_BLACK                        0x00    //For color of char.
 112      =1  #define CL_BLUE                         0x01
 113      =1  #define CL_GREEN                        0x02
 114      =1  #define CL_CYAN                         0x03
 115      =1  #define CL_RED                          0x04    
 116      =1  #define CL_MAGENTA                      0x05
 117      =1  #define CL_YELLOW                       0x06
 118      =1  #define CL_WHITE                        0x07
 119      =1  #define CL_BLINK                        0x08    
 120      =1  
 121      =1  // 0x76*(WindowNo*0x0b)
 122      =1  #define WINDOW_DISABLE          0x00
 123      =1  #define WINDOW_ENABLE           0x01
 124      =1  #define WINDOW_3D_ENABLE    0x04
 125      =1  #define WINDOW_3D_BOTTOM    0x08
 126      =1  #define WINDOW_3D_TOP       0x00
 127      =1  #define WINDOW_TRANS_ENABLE 0x80
 128      =1  
 129      =1  #define WINBDCOLOR_ENABLE       0x80
 130      =1  #define WINBDCOLOR_EXTENT       0x80
 131      =1  
 132      =1  
 133      =1  #define WINBLENDING_DISABLE 0x00
 134      =1  #define WINBLENDING_BACK    0x10
 135      =1  #define WINBLENDING_FORE    0x20
 136      =1  #define WINBLENDING_ALL     0x30
 137      =1  
 138      =1  #define WINSHADOW_ENABLE        0x80
 139      =1  // 0xc8*WindowNo
 140      =1  #define WIN_MULTICOLOR_ENABLE 0x20
 141      =1  #define WIN_CH_EFFECT_ENABLE  0x10
 142      =1  #define WIN_CH_EFFECT_SHADOW  0x08
 143      =1  
 144      =1  
 145      =1  
 146      =1  ///////// TW8804C /////////////
 147      =1  // Window Number
 148      =1  #define WINNUM1                         1
 149      =1  #define WINNUM2                         2
 150      =1  #define WINNUM3                         3
 151      =1  #define WINNUM4                         4
 152      =1  
 153      =1  // Index 0x9f Defination
 154      =1  #define WIN_BG_COLOR_EX         0x80
 155      =1  #define WIN_BG_COLOR_EX0        0x00
 156      =1  #define WIN_3D_TYPE                     0x08
 157      =1  #define WIN_3D_TYPE0            0x00
 158      =1  #define WIN_3D_EN                       0x04
 159      =1  #define WIN_3D_EN0                      0x00
C51 COMPILER V8.16   HS_DISPLAYOSD                                                         03/04/2011 15:51:19 PAGE 22  

 160      =1  #define WIN_3D_LEVEL            0x02
 161      =1  #define WIN_EN                          0x01
 162      =1  #define WIN_EN0                         0x00
 163      =1  
 164      =1  // Index 0xa5 Defination
 165      =1  #define WIN_BD_EN                       0x80
 166      =1  #define WIN_BD_EN0                      0x00
 167      =1  #define WIN_BD_WIDTH(a)         a
 168      =1  
 169      =1  // Index 0xa6 Defination
 170      =1  #define WIN_BD_COLOR_EX         0x80
 171      =1  #define WIN_BD_COLOR_EX0        0x00
 172      =1  #define WIN_H_BD_W(a)           a
 173      =1  
 174      =1  // Index 0xa7 Defination
 175      =1  #define WIN_V_BD_W(a)           a
 176      =1  
 177      =1  // Index 0xa8
 178      =1  #define WIN_CH_VSPACE(a)        (a<<4)
 179      =1  #define WIN_CH_HSPACE(a)        a
 180      =1  
 181      =1  // Index 0xa9 Defination
 182      =1  #define WIN_VZOOM(a)            (a-1)
 183      =1  #define WIN_HZOOM(a)            (a-1)
 184      =1  #define WIN_SADDR(a)            a
 185      =1  
 186      =1  // Index 0xab
 187      =1  #define WIN_SHADOW_EN           0x80
 188      =1  #define WIN_SHADOW_EN0          0x00
 189      =1  #define WIN_SHADOW_W(a)         a
 190      =1  
 191      =1  // ad
 192      =1  #define WIN_SHADOW_COLOR_EX             0x80
 193      =1  #define WIN_SHADOW_COLOR_EX0    0x00
 194      =1  #define WIN_MULTI_EN                    0x40
 195      =1  #define WIN_MULTI_EN0                   0x00
 196      =1  #define WIN_V_EXT_EN                    0x20
 197      =1  #define WIN_V_EXT_EN0                   0x00
 198      =1  #define WIN_CH_BDSH_SEL(a)              a
 199      =1  #define SEL_BORDER                              0
 200      =1  #define SEL_SHADOW                              1
 201      =1  #define WIN_CH_BDSH_COLOR_EX    0x08
 202      =1  #define WIN_CH_BDSH_COLOR_EX0   0x00
 203      =1  
 204      =1  #define OSD_Win_Num(a)                  0x9e, a-1
 205      =1  #define OSD_Win_Start_Addr              0xa0
 206      =1  #define OSD_Win_Attr(a)                         a
 207      =1  #define OSD_Win_Start(h,v)                       (BYTE)(((WORD)h>>8) | (((WORD)v>>8)<<4)),(BYTE)h, (BYTE)v
 208      =1  #define OSD_Win_Width(a)                        a
 209      =1  #define OSD_Win_Height(a)                       a
 210      =1  #define OSD_Win_Border(a)                       a
 211      =1  #define OSD_Win_HBorder(a)                      a
 212      =1  #define OSD_Win_VBorder(a)                      a
 213      =1  #define OSD_Win_CH_Space(a)                     a
 214      =1  #define OSD_Win_ZM_SAddr(h,v,a)         ((h<<6)|(v<<4)|(a>>8)), (BYTE)a
 215      =1  #define OSD_Win_Shadow(a)                       a
 216      =1  #define OSD_Win_Blending(a)                     a
 217      =1  #define OSD_Win_CH_BorderShadow(a)      a
 218      =1  
 219      =1  
 220      =1  #define SetOSDWindowNum(winno)          WriteTW88(TW88_WINNUM, winno-1)
 221      =1  
C51 COMPILER V8.16   HS_DISPLAYOSD                                                         03/04/2011 15:51:19 PAGE 23  

 222      =1  //#define  OSD_Window_Attr(Trans_en,Color,3D_Type,3D_en,W_en)       (((( Trans_en | Color ) | 3D_Type) | 3
             -D_en) | W_en)
 223      =1  #define  OSD_Window_Attr(a,b,c,d,e)                                                                     (((( a | b ) | c) | d) | e)
 224      =1  #define  OSD_WShadow_Attr(W_Shadow_en,Color,Width)                                      W_Shadow_en | Color | Width
 225      =1  //#define  OSD_Blending(en,level)                                                                               en | (level & 0x0f)
 226      =1  //#define  OSD_Ch_Effect(Multi, Effect_En, ShadowBorder, Color)         Multi | Effect_En | ShadowBorder | Color 
             - 
 227      =1  
 228      =1  
 229      =1  struct OSDStrInfo 
 230      =1  {
 231      =1          BYTE    cnt;
 232      =1          WORD    addr;
 233      =1          BYTE    attr;
 234      =1          DWORD   str;
 235      =1  };
 236      =1  /*
 237      =1  struct BarInfo {
 238      =1          struct RegisterInfo BarCnt;
 239      =1          BYTE    winno;
 240      =1          BYTE    xoff;
 241      =1          BYTE    yoff;
 242      =1          BYTE    color;
 243      =1          int             bar_cnt;
 244      =1  };
 245      =1  */
 246      =1  struct FontData {
 247      =1          BYTE    font[27];
 248      =1  } ;
 249      =1  
 250      =1  //====================================================================
 251      =1  //  Internal OSD Function
 252      =1  void CopyCharToOSDRAM_TW88(BYTE Addr, BYTE attr, BYTE ch);
 253      =1  void CopyUDCharToOSDRAM_TW88(BYTE Addr, BYTE attr, BYTE ch);
 254      =1  //BYTE GetOSDWindowWidth_TW88(BYTE winno);
 255      =1  WORD GetOSDWindowSA_TW88(BYTE winno);
 256      =1  void SetOSDWindowX_TW88(BYTE winno, BYTE x);
 257      =1  void SetOSDWindowY_TW88(BYTE winno, BYTE y);
 258      =1  void SetOSDWindowWidth_TW88(BYTE winno, BYTE w);
 259      =1  void SetOSDWindowSA_TW88(BYTE winno, WORD sa);
 260      =1  
 261      =1  void SetOSDItalicsAndUnderline(BYTE italics, BYTE underline);
 262      =1  
 263      =1  void SetOSDHBorderWidth_TW88(BYTE winno, BYTE w);
 264      =1  //BYTE GetOSDWindowColor_TW88(BYTE winno);
 265      =1  void SetOSDWindowColor_TW88(BYTE CCWin, BYTE color);
 266      =1  void EnableOSDRAMAndChangeFont(BYTE type);
 267      =1  void WriteCharToOSDRAM(WORD addr, BYTE ch, BYTE attr);
 268      =1  
 269      =1  
 270      =1  void ShowOSDWindowAll(BYTE on);
 271      =1  void ShowOSDWindow_TW88(BYTE winno, BYTE onoff);
 272      =1  void ClearOSD_TW88(void);
 273      =1  //void CreateOSDWindow_TW88(BYTE winno, BYTE x, BYTE y, BYTE w, BYTE h, WORD sa, BYTE attr);
 274      =1  /*not yet!!
 275      =1  //ljy012304...CC_ADJUST_POS
 276      =1  void SetOSDWindowXS_TW88(BYTE winno, BYTE xs);
 277      =1  void SetOSDWindowYS_TW88(BYTE winno, BYTE ys);
 278      =1  */
 279      =1  
 280      =1  //====================================================================
 281      =1  //      OSDMenu Functions
C51 COMPILER V8.16   HS_DISPLAYOSD                                                         03/04/2011 15:51:19 PAGE 24  

 282      =1  
 283      =1  //--------------------------------------------------------------------
 284      =1  //      Functions used in only Menu
 285      =1  #define         CONVERT_CODE                    0x80
 286      =1  
 287      =1  void InitOSDWindow(BYTE *ptr);
 288      =1  
 289      =1  WORD GetOSDWindowX(BYTE winno);
 290      =1  WORD GetOSDWindowY(BYTE winno);
 291      =1  BYTE CreateOSDWindowOutline(BYTE winno, BYTE w, BYTE color);
 292      =1  void CreateOSDMenuWindow(BYTE, BYTE, BYTE, BYTE, BYTE, BYTE, BYTE);
 293      =1  void ClearOSDLine(BYTE winno, BYTE sx, BYTE sy, BYTE cnt, BYTE attr);
 294      =1  void WriteStringToAddr(WORD addr, BYTE *str, BYTE cnt);
 295      =1  void DrawAttrString(WORD addr, BYTE *str, BYTE cnt);
 296      =1  void DrawAttrCnt(WORD addr, BYTE color, BYTE cnt);
 297      =1  void ClearDataCnt(WORD, BYTE);
 298      =1  #define         SetOSDWindowX(A, B)                                                     SetOSDWindowX_TW88(A, B)
 299      =1  #define     SetOSDWindowY(A, B)                                                 SetOSDWindowY_TW88(A, B)
 300      =1  
 301      =1  
 302      =1  //--------------------------------------------------------------------
 303      =1  //      Functions used in Menu and others
 304      =1  #define         ShowOSDWindow(A, B)                                                     ShowOSDWindow_TW88(A, B)
 305      =1  #define     ClearOSD()                                                                  ClearOSD_TW88()
 306      =1  
 307      =1  //================================================================
 308      =1  //      Font
 309      =1  void DownloadUDFont(void);
 310      =1  #ifdef Hs_debug
           =1 void DisplayROMFont(BYTE);
           =1 void DisplayRAMFont(BYTE);
           =1 #endif
 314      =1  void DownloadFont(BYTE cod, CODE_P BYTE *fontdata);
 315      =1  //void DisplayGrid( void );
 316      =1  //void DisplayCone( void );
 317      =1  //void DisplayJapanese( void );
 318      =1  void TestRAMFont( void );
 319      =1  #ifdef BANKING
           =1 void DisplayMGrid( BYTE );
           =1 void DisplayMessage( void );
           =1 void DisplayChinese( void );
           =1 void DisplayJapanese( void );
           =1 void DisplayKorean( void );
           =1 void DisplayGridBank0( BYTE n );
           =1 void DisplayGridBank1( BYTE n );
           =1 #endif
 328      =1  
 329      =1  //================================================================
 330      =1  //      OSD COLOR
 331      =1  void Change_OSDColorLookup(void);
 332      =1  void Reset_OSDColorLookup(void);
 333      =1  
 334      =1  //====================================================================
 335      =1  //                              Conversion
 336      =1  //====================================================================
 337      =1  BYTE utoa(WORD value, BYTE *str, BYTE radix);
 338      =1  BYTE ltoa_K(long value, BYTE *str, BYTE);
 339      =1  BYTE strlen( BYTE *str );
 340      =1  
 341      =1  #define CStrlen(A)                              strlen(A)
 342      =1  
 343      =1  void WaitEndofDisplayArea(void);
C51 COMPILER V8.16   HS_DISPLAYOSD                                                         03/04/2011 15:51:19 PAGE 25  

 344      =1  
 345      =1  #endif  // __OSD_BASIC__
   7          #include "dispinfo.h"
   1      =1  #ifndef __DISPINFO__
   2      =1  #define __DISPINFO__
   3      =1  //==================================================================
   4      =1  //                              Display Information
   5      =1  //==================================================================
   6      =1  #if (defined WQVGA) && (defined ANALOG_7INCH)
           =1 #define         INPUTINFO_ZOOM          WINZOOMx1
           =1 #define         LOGO_ZOOM                       WINZOOMx3
           =1 
           =1 #else // (defined WQVGA) && (defined SHARP_LQ043T3DX02)
  11      =1  #define         INPUTINFO_ZOOM          WINZOOMx2
  12      =1  #define         LOGO_ZOOM                       WINZOOMx2
  13      =1  #endif
  14      =1  //#define               VOL_ZOOM                        WINZOOMx4
  15      =1  #define         MUTE_ZOOM                       WINZOOMx3
  16      =1  #define         TVCHN_ZOOM                      WINZOOMx4
  17      =1  #define         RATINGINFO_ZOOM         WINZOOMx3
  18      =1  #define     SCANTV_ZOOM                 WINZOOMx2               //ljy012304
  19      =1  #define         PCINFO_ZOOM                     WINZOOMx2
  20      =1  #define     BAR_ZOOM                    WINZOOMx2
  21      =1  
  22      =1  
  23      =1  #define DVRStatus_OSDWIN        4 
  24      =1  #define DVRStatus_ADDR  195 
  25      =1  
  26      =1  extern  IDATA BYTE  DisplayedOSD;
  27      =1  
  28      =1  
  29      =1  void ClearDisplayedOSD( BYTE newd );
  30      =1  void SetDisplayedOSD( BYTE newd );
  31      =1  BYTE GetDisplayedOSD(void);
  32      =1  void ClearOSDInfo(void);
  33      =1  
  34      =1  void DisplayInput(void);
  35      =1  BYTE ClearInput(void);
  36      =1  
  37      =1  
  38      =1  void DisplayLogo(void);
  39      =1  void ClearLogo(void);
  40      =1  
  41      =1  void DisplayPCInfo(BYTE CODE *ptr);
  42      =1  void ClearPCInfo(void);
  43      =1  void DisplayAutoAdjust(void);
  44      =1  void ClearAutoAdjust(void);
  45      =1  
  46      =1  
  47      =1  void DisplayVol(void);
  48      =1  #if 0
           =1 void DisplayMuteInfo(void);
           =1 #endif
  51      =1  void ClearMuteInfo(void);
  52      =1  BYTE CheckAndClearOSD(void);
  53      =1  
  54      =1  //==================================================================
  55      =1  //                                              TV Info
  56      =1  //==================================================================
  57      =1  
  58      =1  BYTE ClearTVInfo(void);
  59      =1  
C51 COMPILER V8.16   HS_DISPLAYOSD                                                         03/04/2011 15:51:19 PAGE 26  

  60      =1  #endif  // __DISPINFO__
   8          #include "measure.h"
   1      =1  #ifndef __MEASURE__
   2      =1  #define __MEASURE__
   3      =1  
   4      =1  #define EE_DOS                          0
   5      =1  
   6      =1  #define EE_SP1                          1
   7      =1  #define EE_SP2                          2
   8      =1  #define EE_SP3                          3
   9      =1  
  10      =1  #define EE_VGA_60                       4
  11      =1  #define EE_VGA_66                       5
  12      =1  #define EE_VGA_70                       6
  13      =1  #define EE_VGA_72                       7
  14      =1  #define EE_VGA_75                       8
  15      =1  #define EE_VGA_85                       9
  16      =1  
  17      =1  #define EE_SVGA_56                      10
  18      =1  #define EE_SVGA_60                      11
  19      =1  #define EE_SVGA_70                      12
  20      =1  #define EE_SVGA_72                      13
  21      =1  #define EE_SVGA_75                      14
  22      =1  #define EE_SVGA_85                      15
  23      =1  
  24      =1  #define EE_832_75                       16
  25      =1  
  26      =1  #define EE_XGA_60                       17
  27      =1  #define EE_XGA_70                       18
  28      =1  #define EE_XGA_72                       19
  29      =1  #define EE_XGA_75                       20
  30      =1  #define EE_XGA_85                       21
  31      =1  
  32      =1  #define EE_1152_60                      22
  33      =1  #define EE_1152_70                      23
  34      =1  #define EE_1152_75                      24
  35      =1  
  36      =1  #define EE_SXGA_60                      25
  37      =1  #define EE_SXGA_70                      26
  38      =1  #define EE_SXGA_75                      27
  39      =1  
  40      =1  #define EE_RGB_480P                     28
  41      =1  #define EE_RGB_720P                     29
  42      =1  #define EE_RGB_720P50           30
  43      =1  #define EE_RGB_1080I            31
  44      =1  #define EE_RGB_1080I50A         32
  45      =1  #define EE_RGB_1080I50B         33
  46      =1  #define EE_RGB_480I                     34
  47      =1  #define EE_RGB_576I                     35
  48      =1  #define EE_RGB_576P                     36
  49      =1  
  50      =1  #define EE_YPbPr_480P           37
  51      =1  #define EE_YPbPr_720P           38
  52      =1  #define EE_YPbPr_720P50         39
  53      =1  #define EE_YPbPr_1080I          40
  54      =1  #define EE_YPbPr_1080I50A       41
  55      =1  #define EE_YPbPr_1080I50B       42
  56      =1  #define EE_YPbPr_480I           43
  57      =1  #define EE_YPbPr_576I           44
  58      =1  #define EE_YPbPr_576P           45
  59      =1  
  60      =1  #define EE_PC_MAX                       46
C51 COMPILER V8.16   HS_DISPLAYOSD                                                         03/04/2011 15:51:19 PAGE 27  

  61      =1  
  62      =1  #define EE_PC_NO_SIGNAL         0xfe
  63      =1  #define EE_PC_UNKNOWN           0xff
  64      =1  
  65      =1  struct _PCMDATA {
  66      =1          CODE_P BYTE  Support;
  67      =1          CODE_P WORD  HAN;
  68      =1          CODE_P WORD  VAN;
  69      =1          CODE_P WORD  IVF;
  70      =1          CODE_P WORD  CLOCK;
  71      =1          CODE_P WORD  low;
  72      =1          CODE_P WORD  high;
  73      =1          CODE_P WORD  Hstart;
  74      =1          CODE_P WORD  Vstart;
  75      =1          CODE_P WORD  IPF;               // 0.1MHz
  76      =1          CODE_P WORD  PPF;               // 0.1MHz
  77      =1          CODE_P BYTE  VBack;
  78      =1  };
  79      =1  #ifndef AUTOCALC_PC
           =1 
           =1 #ifdef SUPPORT_DTV
           =1 struct _DTVMDATA {
           =1         CODE_P BYTE Reg62;
           =1         CODE_P BYTE RegBC;
           =1         CODE_P BYTE RegBD;
           =1         CODE_P BYTE RegBE;
           =1         CODE_P WORD PHP;
           =1 };
           =1 #endif
           =1 #endif
  91      =1  #if defined     XGA
           =1         #define MAX_PPF          90000000
           =1 #elif defined SXGA
           =1         #define MAX_PPF         135000000
           =1 #elif defined WXGA
           =1         #define MAX_PPF          90000000
           =1 #elif defined WVGA
  98      =1          #define MAX_PPF          90000000
  99      =1  #elif defined VGA
           =1         #define MAX_PPF          50000000
           =1 #elif defined SVGA
           =1         #define MAX_PPF          80000000
           =1 #elif defined QVGA
           =1         #define MAX_PPF          30000000
           =1 #elif defined WQVGA
           =1         #define MAX_PPF          30000000
           =1 #endif
 108      =1  
 109      =1  extern BYTE cLastSyncLoss;
 110      =1  extern BYTE PcMode;
 111      =1  
 112      =1  void CompLT170E2(void);
 113      =1  
 114      =1  WORD gap(WORD a, WORD b);
 115      =1  
 116      =1  //===================================================================
 117      =1  WORD GetHpnVpn(BYTE);
 118      =1  
 119      =1  WORD ConvertBasedOnInput(WORD dat);
 120      =1  
 121      =1  BYTE IsDTVInput(void);
 122      =1  
C51 COMPILER V8.16   HS_DISPLAYOSD                                                         03/04/2011 15:51:19 PAGE 28  

 123      =1  void SetVValueForPanel(WORD vstart);
 124      =1  BYTE SetHValueForPanel(void);
 125      =1  BYTE GetActiveRegion(void);
 126      =1  
 127      =1  BYTE DetectAndSetForVGAInput(BYTE);
 128      =1  #ifdef SUPPORT_DTV
           =1 BYTE DetectAndSetForDTVInput(BYTE);
           =1 #endif
 131      =1  void CheckPCinput(void);
 132      =1  void CheckDTVinput(void);
 133      =1  
 134      =1  WORD GetCoarseValue(void);
 135      =1  BYTE GetPhaseValue(void);
 136      =1  WORD SetPCCoarseValue(BYTE val);
 137      =1  BYTE SetPhaseValue(BYTE val);
 138      =1  
 139      =1  void DisplayResultAndSetActiveRange(void);
 140      =1  
 141      =1  //=============================================================================
 142      =1  //                    PC Screen Position Move Functions
 143      =1  //=============================================================================
 144      =1  void MoveActiveVpos(BYTE val);          // Up/Down
 145      =1  void MoveActiveHpos(BYTE val);          // Left/Right
 146      =1  
 147      =1  BYTE GetVPosition(void);
 148      =1  BYTE SetVPosition(BYTE val);
 149      =1  BYTE GetHPosition(void);
 150      =1  BYTE SetHPosition(BYTE val);
 151      =1  
 152      =1  void ResetPCValue(void);
 153      =1  
 154      =1  CODE_P BYTE *GetPCInputSourceName(void);
 155      =1  BYTE AutoAdjust(void);
 156      =1  
 157      =1  #endif // __MEASURE__
   9          #include "debug.h"
   1      =1  #ifndef __DEBUG__
   2      =1  #define __DEBUG__
   3      =1  
   4      =1  #define DEBUG_ERR       1
   5      =1  #define DEBUG_WARN      2
   6      =1  #define DEBUG_INFO      3
   7      =1  #define DEBUG_BREAK     4
   8      =1  
   9      =1  #define Pause(a)        { Printf("\r\n"); Printf(a); while(!RS_ready()); RS_rx(); }
  10      =1  
  11      =1  //#define BURSTLOCK     7
  12      =1  
  13      =1  void DebugWindowControl (void) ;
  14      =1  void Draw_Debug_Char(void);
  15      =1  void DebugWindowCursor( BYTE flag ) ;
  16      =1  void DebugWindowData( BYTE flag ) ;
  17      =1  void Debug_Write(void);
  18      =1  void Debug_Read(void);
  19      =1  
  20      =1  
  21      =1  
  22      =1  #endif  // __DEBUG__
  23      =1  
  24      =1  #ifdef CHIP_MANUAL_TEST
           =1 BYTE DelaynCheck(void);
           =1 void ChipManualTest(void);
C51 COMPILER V8.16   HS_DISPLAYOSD                                                         03/04/2011 15:51:19 PAGE 29  

           =1 
           =1 #endif
  10          #include "printf.h"
   1      =1  #ifndef __PRINTF__
   2      =1  #define __PRINTF__
   3      =1  
   4      =1  #define _outchar(c) while(1) { if( !RS_Xbusy ) { SBUF = c; RS_Xbusy=1; break; } }
   5      =1  #define Putch(c) _outchar(c)
   6      =1  
   7      =1  #ifdef SERIAL
   8      =1  
   9      =1   void Printf ( const char CODE_P *fmt, ... );
  10      =1   void Puts ( CODE_P char *ptr );
  11      =1  
  12      =1  #define TW2835Cmd(a)   Puts ( a )
  13      =1  
  14      =1  #else
           =1 
           =1  #undef  DEBUG
           =1  #define Printf(a,b)    //
           =1  #define Puts(a)                //
           =1 
           =1 #endif
  21      =1  
  22      =1  
  23      =1  #ifndef DEBUG
  24      =1  
  25      =1   #define dPuts(a)               //
  26      =1   #define wPuts(a)               //
  27      =1   #define ePuts(a)               //
  28      =1  
  29      =1  #else
           =1 
           =1  void dPrintf( const char CODE_P *fmt, ... );
           =1  void wPrintf( const char CODE_P *fmt, ... );
           =1  void ePrintf( const char CODE_P *fmt, ... );
           =1 
           =1  void dPuts( CODE_P char *ptr );
           =1  void wPuts( CODE_P char *ptr );
           =1  void ePuts( CODE_P char *ptr );
           =1 
           =1 #endif  // DEBUG
  40      =1  
  41      =1  BYTE Getch(void);
  42      =1  BYTE Getche(void);
  43      =1  
  44      =1  
  45      =1  #endif  //__PRINTF__
  11          #include "udfont.h"
   1      =1  //udfont.h
   2      =1  #define COLORFONT_START 0x60
   3      =1  //#define       MAX_FONT_RAM_CHARS      0xa7 //174
   4      =1  #define MAX_FONT_RAM_CHARS      0x90 //6Kbytes for RAM
   5      =1  code unsigned char RAMFONTDATA[][27];
   6      =1  code unsigned char OSD_Color_LookUp_Data_Table[][8];
   7      =1  
   8      =1  
  12          #include "regmap.h"
   1      =1  #ifndef __REGMAP__
   2      =1  #define __REGMAP__
   3      =1  
   4      =1  //-----------------------------------------------------------------------------
C51 COMPILER V8.16   HS_DISPLAYOSD                                                         03/04/2011 15:51:19 PAGE 30  

   5      =1  //                              Individual Decoder Registers 
   6      =1  //-----------------------------------------------------------------------------
   7      =1  
   8      =1  #define MCU_STOP_MODE   0xc8    // bit 7 is mcu stop, bit5 is MCU debug
   9      =1  
  10      =1  #define LAD0                    0xc9    // Low speed AD channel 0
  11      =1  #define LAD1                    0xca    // Low speed AD channel 1
  12      =1  
  13      =1  #define REG_PAGE                0xff
  14      =1  #define STATUS0                 0xd0
  15      =1  #define STATUS1                 0xd1
  16      =1  #define IRQ_EN1                 0xd2
  17      =1  #define IRQ_EN0                 0xd3
  18      =1  
  19      =1  //-----------------------------------------------------------------------------
  20      =1  //                              Individual Decoder Registers 
  21      =1  //-----------------------------------------------------------------------------
  22      =1  
  23      =1  #define DECODERADDRESS  TW88I2CAddress
  24      =1  
  25      =1  #define CVFMT                   0x1e    // Component Video Format
  26      =1  #define FBSHIFT                 0x38    // RGB Anti-Alias Filter/FB Shift Level
  27      =1  #define SHUE                    0x3e    // RGB Hue
  28      =1  #define SCONTRAST               0x3b    // RGB Contrast
  29      =1  #define SBRIGHT                 0x3a    // RGB Brightness
  30      =1  #define SCbGAIN                 0x3c    // RGB Cb Gain
  31      =1  #define SCrGAIN                 0x3d    // RGB Cb Gain
  32      =1  #define RGBCONTROL              0x36    // RGB Powerdown..
  33      =1  #define RGBMISC                 0x39
  34      =1  #define FBCONTRL                0x3F
  35      =1  
  36      =1  //#define OSD_ADJ                       0xce
  37      =1  #define PNLSHARPNESS    0x78    // Sharpness Control
  38      =1  #define OSDWINSTATUS    0x95
  39      =1  //-----------------------------------------------------------------------------
  40      =1  //                              Common Registers
  41      =1  //-----------------------------------------------------------------------------
  42      =1  #define CSTATUS                 0x01    // Chip Status
  43      =1  #define INFORM                  0x02    // Input Format
  44      =1  #define ACNTL                   0x06    // Analog Control
  45      =1  #define CROP_HI                 0x07    // Cropping High
  46      =1  #define VDELAY_LO               0x08    // Vertical Delay Low
  47      =1  #define VACTIVE_LO              0x09    // Vertical Active Low
  48      =1  #define HDELAY_LO               0x0a    // Horizontal Delay Low
  49      =1  #define HACTIVE_LO              0x0b    // Horizontal Active Low
  50      =1  #define CNTRL1                  0x0c    // Control 1
  51      =1  
  52      =1  #define BRIGHT                  0x10    // Brightness Control
  53      =1  #define CONTRAST                0x11    // Contrast Control
  54      =1  #define SHARPNESS               0x12    // Sharpness Control
  55      =1  #define SAT_U                   0x13    // Chroma(U) Gain
  56      =1  #define SAT_V                   0x14    // Chroma(V) Gain
  57      =1  #define HUE                             0x15    // Hue Conrol
  58      =1  #define V_PEAKING               0x17    // Vertical Peaking
  59      =1  
  60      =1  #define CC_STATUS               0x1a    // CC/EDS Status
  61      =1  #define CC_DATA                 0x1b    // CC/EDS Data
  62      =1  #define SDT                             0x1c    // Standard Selection
  63      =1  #define SDTR                    0x1d    // Standard Recognition
  64      =1  
  65      =1  #define V_CONTROL2              0x29    // Vertical Control II
  66      =1  #define HFILTER                 0x2c
C51 COMPILER V8.16   HS_DISPLAYOSD                                                         03/04/2011 15:51:19 PAGE 31  

  67      =1  #define MISC1                   0x2d    // Miscellaneous Control 1
  68      =1  #define MISC2                   0x2e    // Miscellaneous Control 2
  69      =1  #define MISC3                   0x2f    // Miscellaneous Control 2
  70      =1  
  71      =1  #define VBI_CNTL2               0x34    // VBI control 2 - WSSEN
  72      =1  #define CC_ODDLINE              0x35    // CC Odd Line
  73      =1  
  74      =1  #define LADC0                   0xc9    //LADC Channel 0 Input Value 
  75      =1  #define LADC1                   0xca    //LADC Channel 1 Input Value 
  76      =1  
  77      =1  #define WriteDecoder(index, val)                WriteTW88( index, val )
  78      =1  #define ReadDecoder(index)                              ReadTW88(  index )
  79      =1  #endif // __REGMAP__
  13          #include "externs.h"
   1      =1  //
   2      =1  //Externs.h     : Register declaration
   3      =1  //
   4      =1  #ifdef INTERNAL_MCU
           =1 extern xdata BYTE REG00, REG01, REG02, REG03, REG04, REG05, REG06, REG07, REG08, REG09, REG0a, REG0b, REG0
             -c, REG0d, REG0e, REG0f,
           =1                   REG10, REG11, REG12, REG13, REG14, REG15, REG16, REG17, REG18, REG19, REG1a, REG1b, REG1c, REG1d, REG1
             -e, REG1f,
           =1                   REG20, REG21, REG22, REG23, REG24, REG25, REG26, REG27, REG28, REG29, REG2a, REG2b, REG2c, REG2d, REG2
             -e, REG2f,
           =1                   REG30, REG31, REG32, REG33, REG34, REG35, REG36, REG37, REG38, REG39, REG3a, REG3b, REG3c, REG3d, REG3
             -e, REG3f,
           =1                   REG40, REG41, REG42, REG43, REG44, REG45, REG46, REG47, REG48, REG49, REG4a, REG4b, REG4c, REG4d, REG4
             -e, REG4f,
           =1                   REG50, REG51, REG52, REG53, REG54, REG55, REG56, REG57, REG58, REG59, REG5a, REG5b, REG5c, REG5d, REG5
             -e, REG5f,
           =1                   REG60, REG61, REG62, REG63, REG64, REG65, REG66, REG67, REG68, REG69, REG6a, REG6b, REG6c, REG6d, REG6
             -e, REG6f,
           =1                   REG70, REG71, REG72, REG73, REG74, REG75, REG76, REG77, REG78, REG79, REG7a, REG7b, REG7c, REG7d, REG7
             -e, REG7f,
           =1                   REG80, REG81, REG82, REG83, REG84, REG85, REG86, REG87, REG88, REG89, REG8a, REG8b, REG8c, REG8d, REG8
             -e, REG8f,
           =1                   REG90, REG91, REG92, REG93, REG94, REG95, REG96, REG97, REG98, REG99, REG9a, REG9b, REG9c, REG9d, REG9
             -e, REG9f,
           =1                   REGa0, REGa1, REGa2, REGa3, REGa4, REGa5, REGa6, REGa7, REGa8, REGa9, REGaa, REGab, REGac, REGad, REGa
             -e, REGaf,
           =1                   REGb0, REGb1, REGb2, REGb3, REGb4, REGb5, REGb6, REGb7, REGb8, REGb9, REGba, REGbb, REGbc, REGbd, REGb
             -e, REGbf,
           =1                   REGc0, REGc1, REGc2, REGc3, REGc4, REGc5, REGc6, REGc7, REGc8, REGc9, REGca, REGcb, REGcc, REGcd, REGc
             -e, REGcf,
           =1                   REGd0, REGd1, REGd2, REGd3, REGd4, REGd5, REGd6, REGd7, REGd8, REGd9, REGda, REGdb, REGdc, REGdd, REGd
             -e, REGdf,
           =1                   REGe0, REGe1, REGe2, REGe3, REGe4, REGe5, REGe6, REGe7, REGe8, REGe9, REGea, REGeb, REGec, REGed, REGe
             -e, REGef,
           =1                   REGf0, REGf1, REGf2, REGf3, REGf4, REGf5, REGf6, REGf7, REGf8, REGf9, REGfa, REGfb, REGfc, REGfd, REGf
             -e, REGff;
           =1 
           =1 #endif  // internal MCU only variables
  23      =1  
  14          #include "CPU.h"
   1      =1  #ifndef __CPU__
   2      =1  #define __CPU__
   3      =1  
   4      =1  /*
   5      =1  #ifdef INTERNAL_MCU
   6      =1  #define I2C_SCL         P2_0
   7      =1  #else
   8      =1  #define I2C_SCL         P1_0
C51 COMPILER V8.16   HS_DISPLAYOSD                                                         03/04/2011 15:51:19 PAGE 32  

   9      =1  #endif
  10      =1  #define I2C_SDA         P1_1
  11      =1  */
  12      =1  #define I2C_SCL         P1_0
  13      =1  #define I2C_SDA         P1_1
  14      =1  #define BUF_MAX         8
  15      =1  #define DVR_BUF_MAX     30
  16      =1  
  17      =1  #ifdef REMO_RC5
           =1 #define EnableRemoconInt()      { RemoDataReady = 0;    EX0 = 1;}
           =1 #endif
  20      =1  void    InitCPU(void);
  21      =1  void    InitVars(void);
  22      =1  void    InitTechwell(void);
  23      =1  void    main_init (void);
  24      =1  void    PowerDown( void );
  25      =1  #if 0
           =1 BYTE    OKSleepTime(void);
           =1 #endif
  28      =1  #ifdef REMO_RC5
           =1 void    InitForRemo(void);
           =1 #endif
  31      =1  void    PowerLED(BYTE flag);
  32      =1  void    Wait_ms(WORD Tms);
  33      =1  BYTE    TW2835Command(char,char,char,char,char);
  34      =1  
  35      =1  #endif
  15          #include "etc_eep.h"
   1      =1  #ifndef __ETC_EEP__
   2      =1  #define __ETC_EEP__
   3      =1  
   4      =1  
   5      =1  ////eeprom.h
   6      =1  
   7      =1  //=========================================================================
   8      =1  //      EEPROM structure
   9      =1  //      0x00    BYTE    4       'TW88'
  10      =1  #define EEP_FWREV_MAJOR                 0x04    //BYTE  1       F/W Rev.-major(Hex)     
  11      =1  #define EEP_FWREV_MINOR                 0x05    //BYTE  1       F/W Rev.-minor(Hex)
  12      =1  #define EEP_DEBUGLEVEL                  0x06    //BYTE  1       DebugLevel
  13      =1  //
  14      =1  #define EEP_AUTODETECT                  0x07    //BYTE  1       Flag for Input Auto Detect      -0:Auto, 1:NTSC,....
  15      =1  #define EEP_AUTODETECTTYTE              0x08    //BYTE  1       Type of Auto-detect(will be value of register 0x1d)
  16      =1  //                      ---------------------------------------------------------------
  17      =1  #define EEP_WIDEMODE                    0x09    //BYTE  1   Wide Mode
  18      =1  
  19      =1  #define EEP_AUTORECOGNITION             0x0a    //BYTE  1       Auto Recognition
  20      =1  #define EEP_VIDEOMODE                   0x0b    //BYTE  1   Video Mode
  21      =1  
  22      =1  #define EEP_OSDLANG                             0x0c    //BYTE  1   OSDLang                                             // 0
  23      =1  
  24      =1  #define EEP_OSDPOSITIONMODE     0x0d    //BYTE  1       OSD Position Mode
  25      =1  #define EEP_CCD                                 0x0e    //BYTE  1       Closed Caption- 0: off, 1:on
  26      =1  
  27      =1  #define EEP_INPUTSELECTION              0x0f    //BYTE  1       InputSelection
  28      =1  
  29      =1  //
  30      =1  #define EEP_PC_CONTRAST                 0x10
  31      =1  #define EEP_PC_BRIGHT                   0x11
  32      =1  
  33      =1  #define EEP_CONTRAST                    0x12    //BYTE  1       Contrast 
  34      =1  #define EEP_BRIGHTNESS                  0x13    //BYTE  1       Brightness
C51 COMPILER V8.16   HS_DISPLAYOSD                                                         03/04/2011 15:51:19 PAGE 33  

  35      =1  #define EEP_SATURATION_U                0x14    //BYTE  1       Saturation :U
  36      =1  #define EEP_SATURATION_V                0x15    //BYTE  1       Saturation :V
  37      =1  #define EEP_SHARPNESS                   0x16    //BYTE  1       Sharpness 
  38      =1  #define EEP_HUE                                 0x17    //BYTE  1       Hue                    
  39      =1  
  40      =1  //====================================HS AWT 981001
  41      =1  #define  EEP_AutoMode           0xa0
  42      =1  #define  EEP_IMAGEMode          0xa1
  43      =1  #define  EEP_RearMode           0xa2
  44      =1  #define  EEP_COSDMode           0xa3
  45      =1  #define  EEP_GAUGEMode          0xa4
  46      =1  #define  EEP_CAMAMode           0xa5 
  47      =1  #define  EEP_CAMBMode           0xa6
  48      =1  #define  EEP_CAMCMode           0xa7
  49      =1  #define  EEP_CAMRMode           0xa8
  50      =1  #define  EEP_CAMOutMode         0xa9    
  51      =1  #define  EEP_TimeStep           0xaa
  52      =1  #define  EEP_Powerflag          0xab   
  53      =1  #define  EEP_ONOFFChoice        0xac 
  54      =1  
  55      =1  #define  EEP_PRIORITY           0xad
  56      =1  #define  EEP_JUMPMode           0xae
  57      =1  #define  EEP_NowModeState       0xaf
  58      =1  #define  EEP_SelectMode         0xb0
  59      =1  #define  EEP_PriorityOffSelectMode      0xb1
  60      =1  #define  EEP_AudioRecord                0xb2
  61      =1  
  62      =1  #define  EEP_FirstNumber                0xb3
  63      =1  #define  EEP_SecondNumber               0xb4
  64      =1  #define  EEP_ThridNumber                0xb5
  65      =1  #define  EEP_FourthNumber               0xb6
  66      =1  
  67      =1  #define  EEP_CAMNUMBER     0xb7
  68      =1  #define  EEP_PELCO                 0xb8
  69      =1  #define  EEP_Baud_rate     0xb9
  70      =1  #define  EEP_TriggerVGA    0xba
  71      =1  #define  EEP_DVRDisplay    0xbb
  72      =1  #define  EEP_IMAGE_A_Mode    0xbc//andy A1.4 20100113
  73      =1  #define  EEP_IMAGE_B_Mode    0xbd//andy A1.4 20100113
  74      =1  #define  EEP_IMAGE_C_Mode    0xbe//andy A1.4 20100113
  75      =1  
  76      =1  //#define  EEP_SelectModeBuf         0xb2
  77      =1  
  78      =1  #if 0
           =1 #define  EEP_Resolution                 0xc0
           =1 #define  EEP_FPS                                0xc1
           =1 #define  EEP_Quality                    0xc2
           =1 #define  EEP_RecordMode                 0xc3
           =1 #define  EEP_RecordLength               0xc4
           =1 #define  EEP_PreAlarmLength             0xc5
           =1 #define  EEP_PostAlarmLength    0xc6
           =1 #endif
  87      =1  //====================================HS AWT 981001
  88      =1  
  89      =1  //
  90      =1  //              ---------------------------------------------------------------
  91      =1  #define EEP_PCAUDIOPVOL         0x37    //BYTE  1   AudioVol
  92      =1  #define EEP_AUDIOPVOL                   0x38    //BYTE  1   AudioVol
  93      =1  #define EEP_AUDIOBALANCE                0x39    //BYTE  1   AudioBalance
  94      =1  //
  95      =1  //              ---------------------------------------------------------------
  96      =1  
C51 COMPILER V8.16   HS_DISPLAYOSD                                                         03/04/2011 15:51:19 PAGE 34  

  97      =1  #define EEP_BLOCKMOVIE                  0x40    //BYTE  1       BlockedMovie:Blocked rating for Movie   
  98      =1  #define EEP_BLOCKTV                             0x41    //BYTE  1       BlockedTV:Blocked rating for TV                 
  99      =1  #define EEP_FVSLD                               0x42    //BYTE  6
 100      =1  //                                                              7    6       4    3    2    1    0
 101      =1  //  FVSLD Level                        ALL   FV(V)   S    L    D    
 102      =1  //  0x43    BYTE    1   TV-Y            X  
 103      =1  //  0x44        BYTE    1   TV-Y7           X    X 
 104      =1  //  0x45        BYTE    1   TV-G            X 
 105      =1  //  0x46        BYTE    1   TV-PG           X       X    X    X    X
 106      =1  //  0x47        BYTE    1   TV-14           X       X    X    X    X 
 107      =1  //  0x48        BYTE    1   TV-MA           X       X    X    X
 108      =1  //
 109      =1  #define EEP_VCHIPPASSWORD               0x49    //BYTE  4   OSDPassword                                 //Defualt:3366
 110      =1  //                      ---------------------------------------------------------------
 111      =1  //
 112      =1  //
 113      =1  //      0x61    WORD    2   PanelXRes
 114      =1  //      0x63    WORD    2       PanelYRes
 115      =1  //      0x65    BYTE    1       PanelHsyncMinPulseWidth
 116      =1  //      0x66    BYTE    1       PanelVsyncMinPulseWidth
 117      =1  //      0x67    WORD    2       PanelHminBackPorch
 118      =1  //      0x69    BYTE    1       PanelHsyncPolarity
 119      =1  //      0x6a    BYTE    1       PanelVsyncPolarity
 120      =1  //      0x6b    WORD    2       PanelDotClock
 121      =1  //      0x6d    BYTE    1       PanelPixsPerClock
 122      =1  //      0x6e    BYTE    1       PanelDEonly
 123      =1  //                      ---------------------------------------------------------------
 124      =1  //
 125      =1  //      0x80    PC Data
 126      =1  //
 127      =1  //                      ---------------------------------------------------------------
 128      =1  //
 129      =1  //      0x300   TV Data
 130      =1  //
 131      =1  //      --- NTSC_TV -------------------------------------------------------------
 132      =1  //      CNT_SAVEDAIR                    BYTE    1   Total count of saved Air TV Channel.
 133      =1  //      IDX_CURAIR                              BYTE    1   Index of Current Air TV Channel
 134      =1  //      CHN_CURAIR                              BYTE    1   Current Air TV Channel.
 135      =1  //
 136      =1  //      FIRSTSAVED_AIRCHN               BYTE    1       First saved Air TV channel no   (maximum 100)
 137      =1  //      ....
 138      =1  //
 139      =1  //      CNT_SAVEDCABLE                  BYTE    1   Total count of saved Cable TV Channel.
 140      =1  //      IDX_CURCABLE                    BYTE    1   Index of Current Cable TV Channel
 141      =1  //      CHN_CURCABLE                    BYTE    1   Current Cable TV Channel.
 142      =1  //
 143      =1  //      FIRSTSAVED_CABLECHN             BYTE    1       First saved Cable TV channel no (maximum 100)
 144      =1  //
 145      =1  //      --- PAL_TV --------------------------------------------------------------
 146      =1  //      PR_CUR                                  BYTE    1   Current PR no.
 147      =1  //      FIRST_SAVEDPR                   DWORD   4   Freq of PR0.        (TOTAL_PR)
 148      =1  //      FIRST_SAVEDPR+4                 DWORD   4   Freq of PR1.
 149      =1  //      .....
 150      =1  //
 151      =1  
 152      =1  
 153      =1  
 154      =1  //
 155      =1  // Offset of EEPROM
 156      =1  //
 157      =1  /*
 158      =1  #define VIDEOCONTRAST           0x18            // for NTSC.(PAL:0x20,SECAM:0x28)
C51 COMPILER V8.16   HS_DISPLAYOSD                                                         03/04/2011 15:51:19 PAGE 35  

 159      =1  #define VIDEOBRIGHTNESS         0x19
 160      =1  #define VIDEOSATURATION_U       0x1a
 161      =1  #define VIDEOSATURATION_V       0x1b
 162      =1  #define VIDEOHUE                        0x1c            // only for NTSC
 163      =1  #define VIDEOSHARPNESS          0x1d
 164      =1  */
 165      =1  #define CCCOLOR         0x52
 166      =1  #define VOLZOOM         0x53
 167      =1  
 168      =1  #define PANELINFO       0x61
 169      =1  
 170      =1  // PAL_TV
 171      =1  #define  PR_CUR                                 0x301   
 172      =1  #define  FIRST_SAVEDPR                  0x308   
 173      =1   #define TVFREQ_HIGH 0 
 174      =1   #define TVFREQ_LOW  1
 175      =1  #ifdef PAL_TV
           =1  #define TVFINETUNE  2
           =1                 // NOT Finetune: 0 , Range: -32 ~ +32
           =1  #define TVPRSYSTEM  3  
           =1                 // bit 7: Add:1 Ereased :0
           =1                 // 
           =1  #define TVCHNAME    4
           =1 
           =1  #define BYTEPERCHANNEL 9 
           =1 #endif
 185      =1  // NTSC_TV
 186      =1  #define  EEP_TVInputSel                 0x302
 187      =1  #define  CHN_CURAIR                             0x303   
 188      =1  #define  FIRSTSAVED_AIRCHN              0x308   
 189      =1  #define  CHN_CURCABLE                   0x403   
 190      =1  #define  FIRSTSAVED_CABLECHN    0x408   
 191      =1  #ifdef NTSC_TV
           =1  #define TVFINETUNE  0
           =1                 // NOT Finetune: 0 , Range: -32 ~ +32
           =1  #define TVPRSYSTEM  1  
           =1                 // bit 7: Add:1 Ereased :0
           =1                 // 
           =1  #define BYTEPERCHANNEL 2
           =1 #endif
 199      =1  
 200      =1  
 201      =1  
 202      =1  
 203      =1  WORD GetFWRevEE(void);
 204      =1  void SaveFWRevEE(WORD);
 205      =1  
 206      =1  BYTE GetDebugLevelEE(void);
 207      =1  void SaveDebugLevelEE(BYTE);
 208      =1  
 209      =1  #ifdef WIDE_SCREEN
 210      =1  BYTE GetWideModeEE(void);
 211      =1  void SaveWideModeEE(BYTE dl);
 212      =1  #endif
 213      =1  
 214      =1  
 215      =1  //BYTE GetRange4CoarseEE(void);
 216      =1  //void SaveRange4CoarseEE(BYTE);
 217      =1  
 218      =1  BYTE GetPossibleAutoDetectStdEE(void);
 219      =1  void SetPossibleAutoDetectStdEE(void);
 220      =1  
C51 COMPILER V8.16   HS_DISPLAYOSD                                                         03/04/2011 15:51:19 PAGE 36  

 221      =1  //BYTE GetOSDXPositionEE(void);
 222      =1  //BYTE GetOSDYPositionEE(void);
 223      =1  BYTE GetClosedCaptionFlagEE(void);
 224      =1  
 225      =1  BYTE GetVideoDatafromEE(BYTE);
 226      =1  void SaveVideoDatatoEE(BYTE offset, BYTE ndata);
 227      =1  
 228      =1  //BYTE GetVideoBrightnessEE(void);
 229      =1  //BYTE GetVideoSaturationEE(BYTE);
 230      =1  //BYTE GetVideoHueEE(void);
 231      =1  //BYTE GetVideoSharpnessEE(void);
 232      =1  
 233      =1  //void SaveVideoContrastEE(BYTE ndata);
 234      =1  //void SaveVideoBrightnessEE(BYTE ndata);
 235      =1  //void SaveVideoSaturationEE(BYTE, BYTE ndata);
 236      =1  //void SaveVideoHueEE(BYTE ndata);
 237      =1  //void SaveVideoSharpnessEE(BYTE ndata);
 238      =1  
 239      =1  BYTE GetOSDPositionModeEE(void);
 240      =1  void SaveOSDPositionModeEE(BYTE ndata);
 241      =1  //void SaveOSDXPositionEE(BYTE);
 242      =1  //void SaveOSDYPositionEE(BYTE);
 243      =1  
 244      =1  void SaveClosedCaptionFlagEE(BYTE);
 245      =1  
 246      =1  BYTE GetBlockedTVEE(void);                      
 247      =1  void SaveBlockedTVEE(BYTE vi);          
 248      =1  BYTE GetBlockedTV_FLDSLEE( BYTE level ) ;
 249      =1  void SaveBlockedTV_FLDSLEE(BYTE level, BYTE vi) ;
 250      =1  
 251      =1  BYTE GetBlockedMovieEE(void);           
 252      =1  void SaveBlockedMovieEE(BYTE vi);       
 253      =1  #if 0
           =1 BYTE GetInputSelectionEE(void);
           =1 #endif
 256      =1  void SaveInputSelectionEE(BYTE val);
 257      =1  
 258      =1  //BYTE GetOSDDurationEE(void);
 259      =1  //void SaveOSDDurationEE(BYTE val);
 260      =1  
 261      =1  BYTE GetOSDLangEE(void);
 262      =1  void SaveOSDLangEE(BYTE val);
 263      =1  
 264      =1  //ljy100303...BYTE GetOSDZoomEE(void);
 265      =1  //ljy100303...void SaveOSDZoomEE(BYTE val);
 266      =1  
 267      =1  BYTE GetAudioVolEE(void);
 268      =1  void SetAudioVolEE( BYTE vol );
 269      =1  BYTE GetPCAudioVolEE(void);
 270      =1  void SetPCAudioVolEE( BYTE vol );
 271      =1  #if 0
           =1 BYTE GetAudioBalanceEE(void);
           =1 void SetAudioBalanceEE( BYTE vol );
           =1 BYTE GetAudioBassEE(void);
           =1 void SetAudioBassEE( BYTE vol );
           =1 BYTE GetAudioTrebleEE(void);
           =1 void SetAudioTrebleEE( BYTE vol );
           =1 #endif
 279      =1  //BYTE GetAudioEffectEE(void);
 280      =1  //void SetAudioEffectEE( BYTE vol );
 281      =1  
 282      =1  void ClearBasicEE(void);
C51 COMPILER V8.16   HS_DISPLAYOSD                                                         03/04/2011 15:51:19 PAGE 37  

 283      =1  
 284      =1  BYTE ValidPassword(DATA_P BYTE *numstr, BYTE index);
 285      =1  BYTE SetNewPassword(DATA_P BYTE *numstr, BYTE index);
 286      =1  
 287      =1  //WORD GetPanelXRes(void);
 288      =1  //WORD GetPanelYRes(void);
 289      =1  BYTE GetPanelHsyncMinPulseWidth(void);
 290      =1  BYTE GetPanelVsyncMinPulseWidth(void);
 291      =1  WORD GetPanelHMinBackPorch(void);
 292      =1  BYTE GetPanelHsyncPolarity(void);
 293      =1  BYTE GetPanelVsyncPolarity(void);
 294      =1  WORD GetPanelDotClock(void);
 295      =1  WORD GetPanelMaxClock(void);
 296      =1  BYTE GetPanelPixsPerClock(void);
 297      =1  // Not used yet *************************  BYTE GetPanelDEonly(void);
 298      =1  
 299      =1  void AddTVChannelEE( BYTE tvtype, BYTE chn);
 300      =1  BYTE GetTVChannelEE( BYTE tvtype, BYTE inx);
 301      =1  void ResetTVChannelEE( BYTE tvtype );
 302      =1  BYTE GetTVChannelCntEE(BYTE tvtype);
 303      =1  BYTE GetTVChnIdxEE(BYTE tvtype);
 304      =1  BYTE GetCurTVChannelEE(BYTE tvtype);
 305      =1  void SetTVChnIdxEE(BYTE tvtype, BYTE newd);
 306      =1  void SetCurTVChannelEE(BYTE tvtype, BYTE newd);
 307      =1  BYTE InsertTVChannelEE(BYTE tvtype, BYTE newd);
 308      =1  BYTE RemoveTVChannelEE(BYTE tvtype, BYTE newd);
 309      =1  
 310      =1  void SetTVPrEE(void);
 311      =1  BYTE GetTVPrEE(void);
 312      =1  void SetTVFreqEE(BYTE, WORD);
 313      =1  WORD GetTVFreqEE(BYTE);
 314      =1  void SetFineTuneEE(BYTE, BYTE);
 315      =1  BYTE GetFineTuneEE(BYTE);
 316      =1  BYTE GetTVPrSystem(BYTE);
 317      =1  void SetTVPrSystem(BYTE, BYTE);
 318      =1  BYTE GetTVInputSelEE(void);
 319      =1  void SetTVInputSelEE(BYTE);
 320      =1  
 321      =1  #define GetVInputStdDetectModeEE()                              ReadEEP(EEP_AUTODETECTTYTE)
 322      =1  #define SaveVInputStdDetectModeEE(A)                    WriteEEP(EEP_AUTODETECTTYTE, A)
 323      =1  
 324      =1  #define GetAutoRecogntionEE()                                   ReadEEP(EEP_AUTORECOGNITION)
 325      =1  #define SaveAutoRecogntionEE(A)                                 WriteEEP(EEP_AUTORECOGNITION, A)
 326      =1  
 327      =1  #define SetVideoModeEE( ctid )                                  WriteEEP( EEP_VIDEOMODE, ctid )
 328      =1  #define GetVideoModeEE()                                                ReadEEP( EEP_VIDEOMODE )
 329      =1  
 330      =1  #define GetPanelContrastEE()                                    ReadEEP(0x10)
 331      =1  
 332      =1  #if defined( SUPPORT_PC ) || defined( SUPPORT_DTV )
 333      =1  //#define GetPanelHueEE()                                                       ReadEEP(0x28)
 334      =1  //#define GetPanelSharpnessEE()                                 ReadEEP(0x29)
 335      =1  #define GetPanelBrightnessEE()                                  ReadEEP(0x11)
 336      =1  //#define GetPanelSaturationEE()                                        ReadEEP(0x2a)
 337      =1  
 338      =1  //#define SavePanelHueEE(A)                                             WriteEEP(0x28, A)
 339      =1  //#define SavePanelSharpnessEE(A)                                       WriteEEP(0x29, A)
 340      =1  #define SavePanelContrastEE(A)                                  WriteEEP(0x10, A)
 341      =1  #define SavePanelBrightnessEE(A)                                WriteEEP(0x11, A)
 342      =1  //#define SavePanelSaturationEE(A)                              WriteEEP(0x2a, A)
 343      =1  #endif
 344      =1  
C51 COMPILER V8.16   HS_DISPLAYOSD                                                         03/04/2011 15:51:19 PAGE 38  

 345      =1  /*
 346      =1  #define GetDigitalVideoContrastEE()                             ReadEEP(0x2b)
 347      =1  #define GetDigitalVideoBrightnessEE()                   ReadEEP(0x2c)
 348      =1  #define GetDigitalVideoHueEE()                                  ReadEEP(0x2d)
 349      =1  #define GetDigitalVideoSaturationEE(off)                ReadEEP(0x2e+off)
 350      =1  
 351      =1  #define SaveDigitalVideoContrastEE(A)                   WriteEEP(0x2b, A)
 352      =1  #define SaveDigitalVideoBrightnessEE(A)                 WriteEEP(0x2c, A)
 353      =1  #define SaveDigitalVideoHueEE(A)                                WriteEEP(0x2d, A)
 354      =1  #define SaveDigitalVideoSaturationEE(off,A)             WriteEEP(0x2e+off, A)
 355      =1  */
 356      =1  
 357      =1  #endif  // __ETC_EEP__
  16          #include "panel.h"
   1      =1  //PanelConfig
   2      =1  
   3      =1          #if   defined SXGA
           =1                                                 #define PHR_ 1280
           =1                                                 #define PVR_ 1024
           =1         #elif defined XGA       
           =1                                                 #define PHR_ 1024
           =1                                                 #define PVR_ 768
           =1         #elif defined SVGA
           =1                                                 #define PHR_ 800
           =1                                                 #define PVR_ 600
           =1         #elif defined VGA
           =1                                                 #define PHR_ 640
           =1                                                 #define PVR_ 480
           =1         #elif defined QVGA
           =1                                                 #define PHR_ 320
           =1                                                 #define PVR_ 240
           =1         #elif defined WXGA
           =1                                                 #define PHR_ 1280 //1366
           =1                                                 #define PVR_ 768
           =1         #elif defined WSVGA
           =1                                                 #define PHR_ 1024
           =1                                                 #define PVR_ 600
           =1         #elif defined WVGA
  25      =1                                                  #define PHR_ 800
  26      =1                                                  #define PVR_ 600
  27      =1          #elif defined WQVGA
           =1                                 //              #define PHR_ 960 //480
           =1                                 //              #define PVR_ 237
           =1                                                 #define PHR_ 480 //480
           =1                                                 #define PVR_ 240
           =1         #endif
  33      =1  
  34      =1   
  35      =1  
  36      =1  /*
  37      =1  #define ACTIVE_LOW                      0
  38      =1  #define ACTIVE_HIGH                     1
  39      =1  
  40      =1  CODE struct PanelConfig {
  41      =1          unsigned                x_res,                                  y_res;
  42      =1          unsigned char   h_sync_min_pulse_width, v_sync_min_pulse_width;
  43      =1          unsigned                h_min_back_porch;
  44      =1          unsigned char   h_sync_polarity,                v_sync_polarity;
  45      =1          unsigned                dot_clock,                              max_clock;                      // in unit Mhz*10
  46      =1          unsigned char   pixs_per_clock;
  47      =1          unsigned char   DE_only;
  48      =1  } PanelConfig=
C51 COMPILER V8.16   HS_DISPLAYOSD                                                         03/04/2011 15:51:19 PAGE 39  

  49      =1          {
  50      =1          //----------------------------------------------------
  51      =1          #ifdef WXGA
  52      =1          //LG  LM171W01 WXGA
  53      =1          1280,                   768,
  54      =1          8,                              1,
  55      =1          8,
  56      =1          ACTIVE_LOW,             ACTIVE_LOW,
  57      =1          #ifdef DOUBLE_PIXEL
  58      =1          320,                    470,
  59      =1          2,
  60      =1          #else
  61      =1          650,                    950,                                    //65Mhz
  62      =1          1,
  63      =1          #endif
  64      =1          0
  65      =1          //----------------------------------------------------
  66      =1          #elif defined XGA
  67      =1          //Samsung  LT150x1-151 XGA
  68      =1          1024,                   768,
  69      =1          68,                             1,
  70      =1          80,
  71      =1          ACTIVE_LOW,             ACTIVE_LOW,
  72      =1          #ifdef DOUBLE_PIXEL
  73      =1          325,                    400,                                    //32.5Mhz
  74      =1          2,
  75      =1          #else
  76      =1          650,                    800,
  77      =1          1,
  78      =1          #endif
  79      =1          0
  80      =1          //----------------------------------------------------
  81      =1          #elif defined SXGA
  82      =1          //Samsung  LT170E2-131  SXGA
  83      =1          1280,                   1024,
  84      =1          1,                              1,
  85      =1          1,
  86      =1          ACTIVE_LOW,             ACTIVE_LOW,
  87      =1          #ifdef DOUBLE_PIXEL
  88      =1          540,                    540,                                    //54.5Mhz
  89      =1          2,
  90      =1          #else
  91      =1          1080,                   1080,
  92      =1          1,
  93      =1          #endif
  94      =1          0
  95      =1          //----------------------------------------------------
  96      =1          #elif defined WSVGA                                             // Thosiba
  97      =1          1024,                   600,
  98      =1          8,                              3,
  99      =1          1,//80,                         
 100      =1          ACTIVE_LOW,             ACTIVE_LOW,
 101      =1          #ifdef DOUBLE_PIXEL
 102      =1          325,                    450,
 103      =1          2,
 104      =1          #else
 105      =1          500,                    550,                                    //50Mhz
 106      =1          1,
 107      =1          #endif
 108      =1          0
 109      =1          //----------------------------------------------------
 110      =1  
C51 COMPILER V8.16   HS_DISPLAYOSD                                                         03/04/2011 15:51:19 PAGE 40  

 111      =1          #elif defined SVGA
 112      =1          //NEC NL8060AC26-11 SVGA
 113      =1          800,                    600,
 114      =1          2,                              1,
 115      =1          13,
 116      =1          ACTIVE_LOW,             ACTIVE_LOW,
 117      =1          #ifdef DOUBLE_PIXEL
 118      =1          384,                    500,                                    //38.4MHz
 119      =1          2,
 120      =1          #else
 121      =1          670,                    1000,
 122      =1          1,
 123      =1          #endif
 124      =1          0
 125      =1          //----------------------------------------------------
 126      =1          #elif defined VGA
 127      =1          //NEC NL6448AC33        VGA                                     // OK with SetPanelRegisters
 128      =1          640,                    480,
 129      =1          10,                             1,
 130      =1          4,
 131      =1          ACTIVE_LOW,             ACTIVE_LOW,
 132      =1          #ifdef DOUBLE_PIXEL
 133      =1          130,                    150,                                    //25.2MHz
 134      =1          2,
 135      =1          #else
 136      =1          250,                    300,
 137      =1          1,
 138      =1          #endif
 139      =1          0
 140      =1          //----------------------------------------------------
 141      =1  
 142      =1          #elif defined WVGA
 143      =1          // Panasonic  EDTCB27QBF WVGA
 144      =1          800,                    480,
 145      =1          4,                              1,
 146      =1          7,
 147      =1          ACTIVE_LOW,             ACTIVE_LOW,
 148      =1          #ifdef DOUBLE_PIXEL
 149      =1          166,                    200,                                    //33.2MHz
 150      =1          2,
 151      =1          #else
 152      =1          332,                    360,                                    //33.2MHz
 153      =1          1,
 154      =1          #endif
 155      =1          0
 156      =1  
 157      =1          //----------------------------------------------------
 158      =1          #else
 159      =1          // Default : XGA panel
 160      =1          // Samsung  LT150x1-151 XGA
 161      =1          1024,                   768,
 162      =1          68,                             1,
 163      =1          80,
 164      =1          ACTIVE_LOW,             ACTIVE_LOW,
 165      =1          #ifdef DOUBLE_PIXEL
 166      =1          325,                    400,                                    //32.5Mhz
 167      =1          2,
 168      =1          #else
 169      =1          650,                    800,                                    //32.5Mhz
 170      =1          1,
 171      =1          #endif
 172      =1          0
C51 COMPILER V8.16   HS_DISPLAYOSD                                                         03/04/2011 15:51:19 PAGE 41  

 173      =1          #endif
 174      =1          };
 175      =1  
 176      =1  */
  17          #include "osdmenu.h"
   1      =1  //osdmenu.h
   2      =1  //LJY10292001
   3      =1  #ifndef __OSDMENU__
   4      =1  #define __OSDMENU__
   5      =1  
   6      =1  //=======================================================================
   7      =1  // 
   8      =1  //BYTE GetOSDDuration(void);
   9      =1  
  10      =1  void ResetVideoValue(void);
  11      =1  //#if defined( SUPPORT_PC ) || defined( SUPPORT_DTV )
  12      =1  //void ResetPCValue(void);
  13      =1  //#endif
  14      =1  BYTE GetOSDMenuLevel( void );
  15      =1  
  16      =1  void DrawMenulist(BYTE);
  17      =1  void Display_EnterPin(void);
  18      =1  void OSDHighMenu_sub(void);
  19      =1  void ResetOSDValue(void);
  20      =1  #ifdef E_Wintek
           =1 void ResetUESROSDValue(void);
           =1 #endif
  23      =1  //BYTE OnChangingValue(void);
  24      =1  //Not used yet *******************BYTE OnChangingTime(void);
  25      =1  
  26      =1  //WORD GetOSDclock(void);
  27      =1  
  28      =1  void InitOSDMenu(void);
  29      =1  BYTE CloseOSDMenu(void);
  30      =1  void OpenOSDMenu(void);
  31      =1  void OSDHighMenu(void);
  32      =1  void OSDSelect(void);
  33      =1  void OSDCursorMove(BYTE flag );
  34      =1  void OSDLeftRight(BYTE flag );
  35      =1  void OSDValueUpDn(BYTE flag);
  36      =1  WORD SetItemValue( BYTE id, BYTE flag );
  37      =1  BYTE DoAction(BYTE id);
  38      =1  
  39      =1  BYTE SaveValue1(void);
  40      =1  void ClearValueWin(void);
  41      =1  
  42      =1  void OSDNumber( BYTE num );
  43      =1  
  44      =1  void Set4WideScreen(BYTE id);
  45      =1  
  46      =1  void SetRGBContrast( BYTE id, BYTE val );
  47      =1  BYTE SetPCColorTemp(BYTE flag);
  48      =1  void ResetPanelAttributeValue(void);
  49      =1  WORD GetItemValue( BYTE);
  50      =1  void DisplayViewBar( WORD,BYTE);
  51      =1  void DrawNum(WORD, CODE_P struct NumType *, WORD);
  52      =1  void DrawStringByLang( WORD, CODE_P struct EnumType *, WORD);
  53      =1  
  54      =1  void DisplayVolumebar(BYTE val);
  55      =1  BYTE GetOSDLang(void);
  56      =1  void InitOSDMenuXY(void);
  57      =1  
C51 COMPILER V8.16   HS_DISPLAYOSD                                                         03/04/2011 15:51:19 PAGE 42  

  58      =1  void Display_TVGuide_Window(void);
  59      =1  void Display_TVGuide_Status(void);
  60      =1  
  61      =1  void ChangeVchip_LevelCursor(BYTE);
  62      =1  void ChangeVchip_ContentCursor(BYTE);
  63      =1  void Select_VchipLevel(void);
  64      =1  void SetVideoMode(BYTE mode);
  65      =1  BYTE GetVideoDatawithOffset(BYTE offset);
  66      =1  void SetVideoContrast(BYTE newv);
  67      =1  void SetVideoBrightness(BYTE newv);
  68      =1  void SetVideoHue(BYTE newv) ;
  69      =1  void SetVideoSaturation(BYTE svtype, BYTE newv) ;
  70      =1  BYTE SetVideoSharpness(BYTE flag) ;
  71      =1  void SetVideoBacklight(BYTE newv) ;
  72      =1  //------------------------------------------------andy awt 981013
  73      =1  //void DaySelect(BYTE);
  74      =1  void CAMOutDSel(BYTE val);
  75      =1  void DVRAodioSel(BYTE  val);
  76      =1  
  77      =1  //------------------------------------------------andy awt 981013
  78      =1  
  79      =1  void DisplayLineOSD(void);      // OSD Line display Demo
  80      =1  
  81      =1  
  82      =1  struct MenuType {
  83      =1          BYTE    width,  height;
  84      =1          BYTE    TitleColor;     
  85      =1          BYTE    CursorColor;
  86      =1  };
  87      =1  
  88      =1  struct NumType {
  89      =1          BYTE    PrePostCharLen;         // high nibble(pre) / low nibble(post)
  90      =1          BYTE    PrePostChar[4];
  91      =1  };
  92      =1  
  93      =1  struct NumberStringType {
  94      =1          BYTE    x, y;
  95      =1          BYTE    width;
  96      =1          BYTE    BackColor;
  97      =1          BYTE    Radix;
  98      =1          BYTE    NumColor;
  99      =1          BYTE    MaxLen;                         // maximum length of string
 100      =1          BYTE    PrePostCharLen;         // high nibble(pre) / low nibble(post)
 101      =1          BYTE    PrePostChar[3];
 102      =1  };
 103      =1  
 104      =1  struct TimeType {
 105      =1          BYTE    x, y;
 106      =1          BYTE    width;
 107      =1          BYTE    BackColor;
 108      =1          BYTE    Format;                         //_24H_TIME
 109      =1          BYTE    TimeColor;
 110      =1          BYTE    CursorColor;
 111      =1  };
 112      =1  
 113      =1  struct EnumType {
 114      =1          BYTE    Sz;//size
 115      =1          BYTE    ByLang;
 116      =1          BYTE    Str[15];                        // doesn't matter the size !!!
 117      =1  };
 118      =1  
 119      =1  #define ICON_CH_SZ              2
C51 COMPILER V8.16   HS_DISPLAYOSD                                                         03/04/2011 15:51:19 PAGE 43  

 120      =1  //#define BAR_NUM_SZ            4
 121      =1  #define ICON_BUF_SZ             2
 122      =1  struct DefineMenu {
 123      =1          //WORD                                          Icon[ICON_BUF_SZ];      
 124      =1          BYTE                            CODE    *Icon;
 125      =1          BYTE                                            **Desc;                         
 126      =1          BYTE                                            PreFnId, 
 127      =1                                                                  PostFnId;
 128      =1  //      void            (*CalltoFunction)(void);                                    // Un/Dn/Sel Function
 129      =1          BYTE                                            IconColor;                      //NIL: not to display icon
 130      =1          BYTE                                            DescColor;                      //NIL: not to display desc. (IconColor==NIL && DescColor==NIL)->Last Item
 131      =1          struct DefineMenu       CODE    *Child;
 132      =1          BYTE                                            Type;                           // MENU, CHOICEMENU, BAR, NUMBER, TIME, ACTION, ENUM_STRING
 133      =1          BYTE                                            ActiveWithCursor;
 134      =1          BYTE                                            Id;
 135      =1          BYTE                            CODE    *TypeData;      //MenuType, BarType, NumType,,,
 136      =1  } ;
 137      =1  
 138      =1  struct PictureInfo {
 139      =1  
 140      =1          BYTE Register_Addr;
 141      =1          BYTE EEPROM_Addr;
 142      =1          struct RegisterInfo     CODE    *Control_Range;
 143      =1  };
 144      =1  
 145      =1  
 146      =1  //-------------------------------------------------------------------
 147      =1  // OSD Window Information
 148      =1  //-------------------------------------------------------------------
 149      =1  // Window Number
 150      =1  #define OSDCURSORWINDOW                 1
 151      =1  #define OSDMENUWINDOW                   OSDCURSORWINDOW+1
 152      =1  #define OSDMENU_TOPWIN                  OSDCURSORWINDOW+2
 153      =1  #define OSDMENU_TITLEWIN                OSDCURSORWINDOW+3
 154      =1  #define OSDBARWINDOW                    OSDCURSORWINDOW
 155      =1  
 156      =1  #define TECHWELLOGO_OSDWIN      1       
 157      =1  #define TVINFO_OSDWIN           2       
 158      =1  #define FONTTEST_OSDWIN         2       
 159      =1  #define INPUTINFO_OSDWIN        3  
 160      =1  #define RATINGINFO_OSDWIN       1       
 161      =1  #define PCINFO_OSDWIN           3//4/   
 162      =1  
 163      =1  //-------------OSDMENU_TITLEWIN------------------------------------------------------
 164      =1  // Window Start address
 165      =1  #define OSDMENU_MAINADDR        0
 166      =1  #define OSDMENU_SUBADDR     OSDMENU_MAINADDR+15    //25*9:196
 167      =1  #define OSDMENU_BARADDR         175 //OSDMENU_SUBADDR+225    //256   //25x2:50
 168      =1  
 169      =1  #define INPUTINFO_ADDR          160     // 9x1:9
 170      =1  #ifdef WQVGA
           =1 #define INPUTINFO1_ADDR         INPUTINFO_ADDR+17       //17x3:51
           =1 #else
 173      =1  #define INPUTINFO1_ADDR         INPUTINFO_ADDR+34       //17x2:51
 174      =1  #endif
 175      =1  
 176      =1  #define MUTEINFO_ADDR       INPUTINFO1_ADDR+51  // 4x1:4
 177      =1  #define TVCHINFO_ADDR           MUTEINFO_ADDR//324      // 3X1:3
 178      =1  #define LOGO_ADDR                       0
 179      =1  #define RATINGINFO_ADDR         0       //addr:210(8x1:8)
 180      =1  #define PCMEASUREINFO_ADDR  OSDMENU_BARADDR //10x1
 181      =1  
C51 COMPILER V8.16   HS_DISPLAYOSD                                                         03/04/2011 15:51:19 PAGE 44  

 182      =1  
 183      =1  //--------------------------------------------------------------------
 184      =1  // OSD Menu Position Range
 185      =1  #if ((defined WQVGA) && (defined ANALOG_7INCH)) || ((defined QVGA) && (defined SHARP_LQ050Q5DR01))
           =1         #define OSD_PHR_ PHR_/2
           =1 #else
 188      =1          #define OSD_PHR_ PHR_
 189      =1  #endif
 190      =1  
 191      =1  #define OSDHSTART_MAX (OSD_PHR_-(12+1)*25 - 56*2 -4)  //PHR - (pixelsize +Hspace)*MenuWidth - Hborder*2 - 
             -outlinewidth*2
 192      =1  #define OSDVSTART_MAX (PVR_-(18+11)*9 - 5*2 ) //  PVR - (Linesize+Vspace)*MENU_HEIGHT - Vborder*2  - outli
             -newidth*2
 193      =1  
 194      =1  #define OSDMENUX_MIN 1//0
 195      =1  #define OSDMENUX_MAX (OSDHSTART_MAX>>3)
 196      =1  #define OSDMENUX_50  (OSDHSTART_MAX>>4)
 197      =1  
 198      =1  #define OSDMENUY_MIN 2//0
 199      =1  #define OSDMENUY_MAX (OSDVSTART_MAX>>2)
 200      =1  #define OSDMENUY_50  (OSDVSTART_MAX>>3)
 201      =1  
 202      =1  //--------------------------------------------------------------------
 203      =1  // OSD Menu Width, Height 
 204      =1  #ifdef E_Wintek
           =1 #define ICON_HIGH                               0x14
           =1 #else
 207      =1  #define ICON_HIGH                               0x0a
 208      =1  #endif
 209      =1  #define TOTAL_MAX_HIGHT                 9
 210      =1  
 211      =1  #define TOPMENU_WIDTH                   2
 212      =1  #define TOTAL_TOP_HEIGHT                5       // Include blank line!
 213      =1  
 214      =1  #define TOPMENU_HEIGHT                  4       
 215      =1  
 216      =1  #if (defined QVGA) && (defined SHARP_LQ050Q5DR01)
           =1 #define MENU_WIDTH                              17 //23//25 
           =1 #define TITLE_MAX_DESC                  17//25  //
           =1 #define BAR_LENGTH                              0
           =1 #else
 221      =1  #define MENU_WIDTH                              23//23//25 
 222      =1  #define TITLE_MAX_DESC                  23//25  //
 223      =1  #define BAR_LENGTH                              5//8
 224      =1  #endif
 225      =1  
 226      =1  #define MENU_HEIGHT                             7//6 
 227      =1  
 228      =1  #define BARNUM_LENGTH                   8       //11
 229      =1  #ifdef REFERENCE
           =1 #define BACK_COLOR                              BG_COLOR_CYAN
           =1 #define DEFAULT_COLOR                   BG_COLOR_CYAN   | CH_COLOR_WHITE
           =1 //#define ACTIVE_COLOR                  BG_COLOR_YELLOW | CH_COLOR_WHITE
           =1 #define TITLE_BACK_COLOR                BG_COLOR_MAGENTA
           =1 #define TITLE_COLOR                             TITLE_BACK_COLOR | CH_COLOR_YELLOW
           =1 #define COMMENT_COLOR                   TITLE_BACK_COLOR | CH_COLOR_WHITE
           =1 #define CURSOR_COLOR                    BG_COLOR_YELLOW | CH_COLOR_BLUE
           =1 #define OSD_INFO_COLOR                  DEFAULT_COLOR
           =1 #define BAR_COLOR                               DEFAULT_COLOR   
           =1 #define BAR_NUM_COLOR                   DEFAULT_COLOR
           =1 #define NUM_COLOR                               DEFAULT_COLOR
           =1 
C51 COMPILER V8.16   HS_DISPLAYOSD                                                         03/04/2011 15:51:19 PAGE 45  

           =1 #define OSDMENU_OUTLINE_COLOR   BG_COLOR_BLUE
           =1 
           =1 #else
 245      =1  #define BACK_COLOR                              BG_COLOR_CYAN
 246      =1  #define DEFAULT_COLOR                   BG_COLOR_CYAN | CH_COLOR_WHITE
 247      =1  //#define ACTIVE_COLOR                  BG_COLOR_YELLOW | CH_COLOR_WHITE
 248      =1  #define TITLE_BACK_COLOR                BG_COLOR_BLUE
 249      =1  #define TITLE_COLOR                             TITLE_BACK_COLOR | CH_COLOR_YELLOW
 250      =1  #define COMMENT_COLOR                   TITLE_BACK_COLOR | CH_COLOR_WHITE
 251      =1  #define CURSOR_COLOR                    BG_COLOR_YELLOW  | CH_COLOR_BLUE
 252      =1  #define OSD_INFO_COLOR                  BG_COLOR_CYAN    | CH_COLOR_GREEN
 253      =1  #define BAR_COLOR                               DEFAULT_COLOR   
 254      =1  #define BAR_NUM_COLOR                   DEFAULT_COLOR
 255      =1  #define NUM_COLOR                               DEFAULT_COLOR
 256      =1  
 257      =1  #define VER_COLOR               BG_COLOR_CYAN   | CH_COLOR_YELLOW   /// V1.1 03/07/07 simonsung
 258      =1  
 259      =1  
 260      =1  #define OSDMENU_OUTLINE_COLOR   BG_COLOR_CYAN
 261      =1  #endif 
 262      =1  
 263      =1  
 264      =1  //DisplayedOSD
 265      =1  //              new       |     MENU    TVINFO          CC              INPUTINFO               PCINFO          RATINGINFO
 266      =1  //      current   |
 267      =1  //============|=========================================================================
 268      =1  //      MENU      |                     TVINFO          --              INPUTINFO               PCINFO          MENU + RATINGINFO       
 269      =1  //                        |                                              
 270      =1  //------------|-------------------------------------------------------------------------
 271      =1  //      TVINFO    |     MENU    TVINFO          --              INPUTINFO               PCINFO          TVINFO+RATING
 272      =1  //------------|-------------------------------------------------------------------------
 273      =1  //      CC                |     MENU->  TVINFO->                        INPUTINFO->             PCINFO          RATINGINFO
 274      =1  //                        |      CC              CC                                      CC                                              
 275      =1  //------------|-------------------------------------------------------------------------
 276      =1  //      INPUTINFO |     MENU    TVINFO          --              INPUTINFO               PCINFO          --
 277      =1  //------------|-------------------------------------------------------------------------
 278      =1  //      PCINFO    |     MENU    x                       x               INPUTINFO               PCINFO          x
 279      =1  //------------|-------------------------------------------------------------------------
 280      =1  //      RATINGINFO|     MENU    TVINFO     RATING   INPUTINFO           x                       RATINGINFO
 281      =1  //                                                                      
 282      =1  
 283      =1  //=======================================================================================
 284      =1  // OSD Menu Constant define.
 285      =1  //=======================================================================================
 286      =1  //Time type
 287      =1  #define _24H_TIME               1
 288      =1  
 289      =1  //for previous, next, parent or child
 290      =1  #define YES                             0xfe    
 291      =1  #define NO                              0
 292      =1  
 293      =1  
 294      =1  //#define OVERWRITE             0
 295      =1  //#define POPUP                 1
 296      =1  
 297      =1  //CursorMove
 298      =1  #define VERT                    0
 299      =1  #define HORI                    1
 300      =1  
 301      =1  //Type of MenuItem
 302      =1  #define OSDMENU                 1
 303      =1  #define CHOICEMENU              2
C51 COMPILER V8.16   HS_DISPLAYOSD                                                         03/04/2011 15:51:19 PAGE 46  

 304      =1  #define ACTION                  3
 305      =1  #define BAR                             4
 306      =1  #define NUMBER                  5
 307      =1  #define CHOICE                  6
 308      =1  #define ENUM_STRING             7 //YESNO                       7
 309      =1  #define CHOICE1                 8
 310      =1  #define TIME                    9
 311      =1  #define NUMBER_STRING   10
 312      =1  #define TEXT_STR              11   // V1.1 02/28/07 simonsung
 313      =1  
 314      =1  
 315      =1  //Bar type
 316      =1  #define LEFT_FILLED             1
 317      =1  #define RIGHT_FILLED    2
 318      =1  #define NO_FILLED               3
 319      =1  
 320      =1  //OSDmenu up and down key
 321      =1  #define UP                                      1
 322      =1  #define DN                                      2
 323      =1  #define RIGHT                           3
 324      =1  #define LEFT                            4
 325      =1  
 326      =1  // Action Id
 327      =1  #define DISP_INFO                       0x16
 328      =1  
 329      =1  #define INPUTSELECTION                          0x2f
 330      =1  
 331      =1  #define CHANGE_TO_COMPOSITE                     (0x20|CH_TW2835)                        // Low nibble need to start from 1 
 332      =1  #define CHANGE_TO_SVIDEO                        (0x20|SVIDEO)                           // so that it match with COMPOSITE...
 333      =1  #define CHANGE_TO_COMPONENT                     (0x20|COMPONENT)                
 334      =1  #define CHANGE_TO_DTV                           (0x20|DTV)              
 335      =1  #define CHANGE_TO_TV                            (0x20|TV)                                       
 336      =1  #define CHANGE_TO_PC                            (0x20|PC)                                       
 337      =1  #define CHANGE_TO_DIGITALVGA            (0x20|DIGITALVGA)                       
 338      =1  #define CHANGE_TO_SCART                         (0x20|SCART)                            
 339      =1  
 340      =1  
 341      =1  #define OSDPOSITIONMODE     0x10
 342      =1  #define OSD_VPOS                        0x11
 343      =1  #define OSD_HPOS                        0x12
 344      =1  #define OSD_HALFTONE            0x13
 345      =1  #define OSD_DURATION            0x14
 346      =1  #define RESET_OSDVALUE          0x15
 347      =1  #define OSDLANG                         0x16
 348      =1  
 349      =1  #define PANEL_CONTRAST          0x58
 350      =1  #define PANEL_BRIGHTNESS        0x59
 351      =1  #define PANEL_HUE                       0x5a
 352      =1  #define PANEL_SHARPNESS         0x5b
 353      =1  #define PANEL_SATURATION        0x5c
 354      =1  
 355      =1  #define PC_VPOS                         0x43
 356      =1  #define PC_HPOS                         0x44
 357      =1  #define PC_HSIZE                        0x4d
 358      =1  
 359      =1  #define PC_CLOCK                        0x45
 360      =1  #define PC_PHASE                        0x46
 361      =1  
 362      =1  #define AUTOADJUST                      0x47
 363      =1  #define AUTOADJUST2                     0x48
 364      =1  //#define SAVE_AUTOADJUST               0x49
 365      =1  #define RESET_AUTOADJUST        0x4a
C51 COMPILER V8.16   HS_DISPLAYOSD                                                         03/04/2011 15:51:19 PAGE 47  

 366      =1  
 367      =1  #define PCCOLORADJUST           0x4b
 368      =1  #define SAVE_COLORADJUST        0x4c
 369      =1  //#define RESET_COLORADJUST     0x4d
 370      =1  
 371      =1  #define RESET_PCVALUE           0x4e
 372      =1  #define CameraOSD                       0x4f
 373      =1  
 374      =1  #define PC_COLOR_MODE           0x3f
 375      =1  #define PC_COLOR_TEMP           0x30
 376      =1  #define PC_COLOR_MODE1          0x31
 377      =1  #define PC_COLOR_MODE2          0x32
 378      =1  #define PC_COLOR_MODE3          0x33
 379      =1  #define PC_COLOR_USER           0x34
 380      =1  #define PC_COLOR_R                      0x35
 381      =1  #define PC_COLOR_G                      0x36
 382      =1  #define PC_COLOR_B                      0x37
 383      =1  
 384      =1  #define VIDEO_MODE                      0x90
 385      =1  #define VIDEO_MODE1                     0x91
 386      =1  #define VIDEO_MODE2                     0x92
 387      =1  #define VIDEO_MODE3                     0x93
 388      =1  #define VIDEO_USER                      0x94
 389      =1  #define VIDEO_CONTRAST          0x95
 390      =1  #define VIDEO_BRIGHTNESS        0x96
 391      =1  #define VIDEO_SATURATION        0x97
 392      =1  #define VIDEO_HUE                       0x99
 393      =1  #define VIDEO_SHARPNESS         0x9a
 394      =1  #define VIDEO_BACKLIGHT         0x9c            // add new value 
 395      =1  #define RESET_VIDEOVALUE        0x9b
 396      =1  #ifdef E_Wintek
           =1 #define RESET_USERVALUE 0x9d
           =1 #endif
 399      =1  #define VIDEOPICTURE            0x9f
 400      =1  
 401      =1  #define INPUTSTD                        0x6f
 402      =1  #define CHANGE_TO_AUTO          0x60
 403      =1  #define CHANGE_TO_NTSC          (0x60 | NTSC)
 404      =1  #define CHANGE_TO_PAL           (0x60 | PAL)
 405      =1  #define CHANGE_TO_SECAM         (0x60 | SECAM)
 406      =1  #define CHANGE_TO_NTSC4         (0x60 | NTSC4)
 407      =1  #define CHANGE_TO_PALM          (0x60 | PALM)
 408      =1  #define CHANGE_TO_PALN          (0x60 | PALN)
 409      =1  #define CHANGE_TO_PAL60         (0x60 | PAL60)
 410      =1  
 411      =1  
 412      =1  
 413      =1  
 414      =1  #define CLOSED_CAPTION          0x7f
 415      =1  #define CLOSEDCAP_OFF           0x70
 416      =1  #define CLOSEDCAP_CC1           0x71
 417      =1  #define CLOSEDCAP_CC2           0x72
 418      =1  #define CLOSEDCAP_CC3           0x73
 419      =1  #define CLOSEDCAP_CC4           0x74
 420      =1  #define CLOSEDCAP_T1            0x75
 421      =1  #define CLOSEDCAP_T2            0x76
 422      =1  #define CLOSEDCAP_T3            0x77
 423      =1  #define CLOSEDCAP_T4            0x78
 424      =1  
 425      =1  #define TV_GUIDE                        0x8f
 426      =1  #define NO_VCHIP_LOCK           0
 427      =1  #define VCHIP_TV_Y                      1
C51 COMPILER V8.16   HS_DISPLAYOSD                                                         03/04/2011 15:51:19 PAGE 48  

 428      =1  #define VCHIP_TV_Y7                     2
 429      =1  #define VCHIP_TV_G                      3
 430      =1  #define VCHIP_TV_PG                     4
 431      =1  #define VCHIP_TV_14                     5
 432      =1  #define VCHIP_TV_MA                     6
 433      =1  #define PASSWORD                        0x87
 434      =1  #define NEW_PASSWORD            0x88
 435      =1  #define CHK_PASSWORD            0x89
 436      =1  #define RET_CHK_PASSWORD        0x8a
 437      =1  
 438      =1  #define MPAA_RATING                     0x9f
 439      =1  #define NO_MPAA_RATING          0
 440      =1  #define MPAA_G                          1
 441      =1  #define MPAA_PG                         2
 442      =1  #define MPAA_PG_13                      3
 443      =1  #define MPAA_R                          4
 444      =1  #define MPAA_NC_17                      5
 445      =1  #define MPAA_X                          6
 446      =1  
 447      =1  #define TVINSTALL                       0xa0
 448      =1  #define SCAN_CHANNEL            0xa1
 449      =1  #define AIR_CABLE_TV            0xa3
 450      =1  #define STORE_CLEAR_TVCHN       0xa4
 451      =1  #define MTS                                     0xa5
 452      =1  #define EDIT_CHANNEL            0xa6
 453      =1          #define         MTS_STEREO                      0//0x10
 454      =1          #define         MTS_MONO                        1//0x11
 455      =1  
 456      =1  #define AUDIO_VOLUME            0xb7
 457      =1  
 458      =1  #if 0 //andy AWT8.4 20090811
           =1 
           =1 #define AUDIO_BALANCE           0xb9
           =1 #define AUDIO_BASS                      0xba
           =1 #define AUDIO_TREBLE            0xbb
           =1 
           =1 #define AUDIO_LOUDNESS          0xbc
           =1 #define AUDIO_EFFECT            0xbd
           =1 #define AUDIO_MUTE                      0xbe
           =1 #endif
 468      =1  
 469      =1  #define DayChoice           0xb8
 470      =1  #define CAMOSDONOFF         0xb9
 471      =1  #define GAUGEChoice         0xba
 472      =1  #define OsdLockChoice       0xbb
 473      =1  #define PRIORITYChoice      0xcA
 474      =1  #define DVRDisplay              0xcc
 475      =1  
 476      =1  #define CAMAONOFF                   0xc1
 477      =1  #define CAMBONOFF               0xc2
 478      =1  #define CAMCONOFF                   0xc3
 479      =1  #define CAMRONOFF                       0xc4
 480      =1  
 481      =1  #define IMAGEChoice         0xc5 
 482      =1  #define REARChoice          0xc6
 483      =1  #define JUMPChoice          0xc7
 484      =1  #define CAMOUTChoice        0xc8 
 485      =1  #define STIME_STEP                  0xc9
 486      =1  #define TriggerVGA                  0xcb
 487      =1  #define IMAGE_A_Choice         0xcd
 488      =1  #define IMAGE_B_Choice         0xce
 489      =1  #define IMAGE_C_Choice         0xcf
C51 COMPILER V8.16   HS_DISPLAYOSD                                                         03/04/2011 15:51:19 PAGE 49  

 490      =1  
 491      =1  
 492      =1  #define MANUAL_TUNE_CHANNEL     0xab
 493      =1  #define FINE_TUNE_CHANNEL       0xac
 494      =1  #define STORE_PALCHANNEL        0xad
 495      =1  
 496      =1  //#define CLEAR_TVCHN                   0xb0
 497      =1  //#define STORE_TVCHN                   0xb1
 498      =1  
 499      =1  #define WIDESCREEN                      0xc0
 500      =1  #define WIDESCREEN_NORMAL       0 
 501      =1  #define WIDESCREEN_WIDE         1 
 502      =1  #define WIDESCREEN_PANO         2
 503      =1  #define WIDESCREEN_FULL         3 
 504      =1  #define WIDESCREEN_ZOOM         4 
 505      =1  
 506      =1  #define SYSTEM_CLOCK            0xd1
 507      =1  #define SYSTEM_CLOCK_H          0xd2
 508      =1  #define WAKEUP_TIME                     0xd3
 509      =1  #define WAKEUP_TIME_H           0xd4
 510      =1  #define WAKEUP_PR                       0xd5
 511      =1  #define OFF_TIME                        0xd6
 512      =1  #define OFF_TIME_H                      0xd7
 513      =1  #define SLEEP_TIMER                     0xd8
 514      =1  
 515      =1  #define Resolution                      0xe0
 516      =1  #define FPS                                     0xe1
 517      =1  #define Quality                         0xe2
 518      =1  #define RecordMode                      0xe3
 519      =1  #define RecordLength            0xe4
 520      =1  #define PreAlarmLength          0xe5
 521      =1  #define PostAlarmLength         0xe6
 522      =1  #define Apply                           0xe7
 523      =1  #define ManualRecordStart       0xe8
 524      =1  #define ManualRecordStop        0xe9
 525      =1  #define Snapshot                        0xea
 526      =1  #define FormatSD                        0xeb
 527      =1  #define AudioRecord                     0xec
 528      =1  #define FirmwareUpdate          0xed
 529      =1  #define ChangePassword          0xee
 530      =1  #define OverWrite                       0xef
 531      =1  
 532      =1  
 533      =1  
 534      =1  
 535      =1  #define Year                            0x20
 536      =1  #define Month                           0x21
 537      =1  #define Day                                     0x22
 538      =1  #define Hour                            0x23
 539      =1  #define Minute                          0x24
 540      =1  
 541      =1  #define DaylightSaving                          0x25
 542      =1  #define TimeBeginesMonth                        0x26
 543      =1  #define TimeBeginesWeek                         0x27
 544      =1  #define TimeBeginesTime                         0x28
 545      =1  #define StandardTimeBeginesMonth        0x29
 546      =1  #define StandardTimeBeginesWeek         0x2a
 547      =1  #define StandardTimeBeginesTime         0x2b
 548      =1  #define TimeZone                                        0x2c
 549      =1  #define FirstNumber                                     0x2d
 550      =1  #define SecondNumber                            0x2e
 551      =1  #define ThridNumber                                     0x2f
C51 COMPILER V8.16   HS_DISPLAYOSD                                                         03/04/2011 15:51:19 PAGE 50  

 552      =1  #define FourthNumber                            0x38
 553      =1  
 554      =1  
 555      =1  
 556      =1  #define OSDLANGI                        0xd9
 557      =1  #define OSDLANGII                       OSDLANGI+1
 558      =1  #define OSDLANGIII                      OSDLANGI+2
 559      =1  #define OSDLANGIV                       OSDLANGI+3
 560      =1  
 561      =1  
 562      =1  #define TOHIGHMENU                      0xf1
 563      =1  #define MOVECURSOR2FIRST        0xf2
 564      =1  #define RESET_ALL                       0xf3
 565      =1  #define EXITMENU                        0xf4
 566      =1  #define DVRParamApply           0xf5
 567      =1  #define DATETIMEApply           0xf6
 568      =1  
 569      =1  
 570      =1  #define CHOICE1_VAL                     0xfc
 571      =1  #define CHOICE_VAL                      0xfd
 572      =1  #define BAR_VAL                         0xfe
 573      =1  #define NUM_VAL                         0xff
 574      =1  
 575      =1  #define CAMNumberChoice     0xa3 
 576      =1  #define PelcoChoice         0xa4
 577      =1  #define Baud_rateChoice         0xa5
 578      =1  
 579      =1  #endif  // __OSDMENU__
  18          #include "HS_DisplayOSD.h"
   1      =1  #ifndef _HS_DisplayOSD_
   2      =1  #define _HS_DisplayOSD_
   3      =1  
   4      =1  
   5      =1  
   6      =1  
   7      =1  
   8      =1  #define         NORMAL_Record   0x01
   9      =1  #define         Manual_Record   0x02
  10      =1  #define         ALARM_Record    0x04
  11      =1  #define         OverWrite_Record        0x80
  12      =1  
  13      =1  void DisplayGaugeOSD(void);
  14      =1  void ClearGAUGEINFO(void);
  15      =1  void DisplaylockOSD(void); 
  16      =1  void DisplayactvOSD(void); 
  17      =1  
  18      =1  
  19      =1  void DisplayNumber(BYTE addr,WORD val,BYTE type);
  20      =1  
  21      =1  //#ifdef SUPPORT_SDCARD
  22      =1  void DisplayDVRStatus(void);
  23      =1  void DisplayFormatOSD(void);
  24      =1  void DisplayFormatOkOSD(void);
  25      =1  void DisplayFormatFailOSD(void);
  26      =1  void DisplayFWUpDate(void);
  27      =1  void DisplayFWUpDateOK(void);
  28      =1  void DisplayFWUpDateFail(void);
  29      =1  void DisplayFWVersion(void) ;
  30      =1  void DisplayDVRnotReady(void);
  31      =1  //#endif                //#ifdef SUPPORT_SDCARD
  32      =1  #endif
  19          #include "HS_DVRProtocol.h"
C51 COMPILER V8.16   HS_DISPLAYOSD                                                         03/04/2011 15:51:19 PAGE 51  

   1      =1  
   2      =1  
   3      =1  
   4      =1  #ifndef _HS_DVRProtocol_
   5      =1  #define _HS_DVRProtocol_
   6      =1  
   7      =1  //==================================================
   8      =1  //
   9      =1  //
  10      =1  //
  11      =1  //==================================================
  12      =1  
  13      =1  
  14      =1  enum HS_DvrCommand
  15      =1  {
  16      =1          CMD_NULL,
  17      =1          SetDVRParam,    // 1
  18      =1          SetDVRDefault,
  19      =1          SetDATETIME,
  20      =1          GetDVRParam,
  21      =1          GetDVRStatus,
  22      =1          GetDATETIME, 
  23      =1          SetFormatSD, 
  24      =1          SendAlarm, 
  25      =1          GetDVRVersion=0x09, 
  26      =1          SendDVRStatus=0x14,
  27      =1          GetLCDMode=0x15,
  28      =1          SendDVRParam=0x16,
  29      =1          SendDVRParamDT=0x17,
  30      =1          SetFormatSDDone=0x18,
  31      =1          Halt_Start=0xc8,
  32      =1          Halt_OK=0xc9,
  33      =1          FW_Update_Start=0xca,
  34      =1          FW_Update_OK=0xcb,
  35      =1          MANUALRECSTART=0xdc,
  36      =1          MANUALRECSTOP=0xdd,
  37      =1          SNAPSHOT=0xde,
  38      =1          CMD_UNKNOWN=0xff,
  39      =1          CMD_NUM
  40      =1  };
  41      =1  
  42      =1  
  43      =1  //RS485 TX or RX define
  44      =1  enum
  45      =1  {
  46      =1          RS485_TX,               //RS485 Transmit        
  47      =1          RS485_RX                //Rs485 Receive
  48      =1  };
  49      =1  
  50      =1  enum
  51      =1  {
  52      =1          Baud_rate2400,          
  53      =1          Baud_rate4800,  
  54      =1          Baud_rate9600
  55      =1  };
  56      =1  
  57      =1  
  58      =1  //Camera Command ID define
  59      =1  enum
  60      =1  {
  61      =1  //      CAM_CLEAR,                              //Clear 
  62      =1          CAM_ZOOM_OUT_START,                     //Zoom Out  Start
C51 COMPILER V8.16   HS_DISPLAYOSD                                                         03/04/2011 15:51:19 PAGE 52  

  63      =1  //      CAM_ZOOM_OUT_END,                       //Zoom Out  End
  64      =1          CAM_ZOOM_IN_START,                      //Zoom In Start
  65      =1  //      CAM_ZOOM_IN_END,                        //Zoom In End
  66      =1  //      CAM_IRIS_CLOSE_START,           //IRIS Close Start
  67      =1  //      CAM_IRIS_CLOSE_END,             //IRIS Close End
  68      =1  //      CAM_IRIS_OPEN_START,                    //IRIS Open Start
  69      =1  //      CAM_IRIS_OPEN_END,                      //IRIS Open End
  70      =1  //      CAM_FOCUS_FAR_START,            //Focus Far Start
  71      =1  //      CAM_FOCUS_FAR_END,              //Focus Far End
  72      =1  //      CAM_FOCUS_NEAR_START,           //Focus Near Start
  73      =1  //      CAM_FOCUS_NEAR_END,             //Focus Near End
  74      =1          CAM_SET,                                //Set 
  75      =1          CAM_CALL,                               //Call 
  76      =1  //      CAM_FOCUS_SPEED,                //Focus Speed
  77      =1  //      CAM_ZOOM_SPEED,         //Zoom Speed
  78      =1          CAM_PTZ_RIGHT,                  //PTZ Right 
  79      =1          CAM_PTZ_LEFT,                   //PTZ Left
  80      =1          CAM_PTZ_UP,                     //PTZ Up
  81      =1          CAM_PTZ_DOWN,                   //PTZ Down
  82      =1          CAM_MENU_ENTER,                 //PTZ Down
  83      =1          CAM_Iris_Open,
  84      =1  
  85      =1  //      CAM_PTZ_RIGHT_UP,               //PTZ Right with Up
  86      =1  //      CAM_PTZ_RIGHT_DOWN,     //PTZ Right with Down
  87      =1  //      CAM_PTZ_LEFT_UP,                //PTZ Left with Up
  88      =1  //      CAM_PTZ_LEFT_DOWN,      //PTZ Left with Down
  89      =1          CAM_PTZ_STOP                    //PTZ Control Stop
  90      =1  };
  91      =1  
  92      =1  void Hs_DvrTxCmdPaser(BYTE Cmd_Id );
  93      =1  void Hs_Protocol_Init(void);
  94      =1  BYTE DvrReceivePaser(void);
  95      =1  extern bit       DVR_Ready;
  96      =1  void CAM_TxCommand_toRS485(BYTE Com_ID);
  97      =1  void Send_PelcoP_Command(void);
  98      =1  void Send_PelcoD_Command(void);
  99      =1  void Send_GE_Command(void);
 100      =1  #endif
 101      =1  
  20          
  21          //============================================================================= 
  22          //                       Tu                                                       
  23          //=============================================================================
  24          
  25          CODE BYTE GaugeString[]= {RAMFONT,0x01,0x03,0x03,0x03,0x03,0x03,0x03,0x03,0x03,0x03,0x03,0x03,0x03,0x03,0x
             -03,0x03,0x03,0x03,0x03,0x02,ROMFONT,0}; // 0x31 -> 0x2e  Jusitn 3M
  26          CODE BYTE GaugeString1[]= {RAMFONT,0x01,ROMFONT,0};    //...."/-" 
  27          CODE BYTE GaugeString2[]= {RAMFONT,0x02,ROMFONT,0};    //...."-\"
  28          CODE BYTE GaugeString3[]= {RAMFONT,0x05,ROMFONT,0};    //...."/"
  29          CODE BYTE GaugeString4[]= {RAMFONT,0x06,ROMFONT,0};    //...."\"
  30          CODE BYTE GaugeString5[]= {RAMFONT,0x01,0x03,0x03,0x03,0x03,0x03,0x03,0x03,0x03,0x03,0x03,0x03,0x03,0x03,0
             -x03,0x03,0x03,0x03,0x03,0x03,0x03,0x02,ROMFONT,0};  // 0x30 -> 0x2e  Jusitn 2M
  31          CODE BYTE GaugeString6[]= {RAMFONT,0x01,0x03,0x03,0x03,0x03,0x03,0x03,0x03,0x03,0x03,0x03,0x03,0x03,0x04,0
             -x03,0x03,0x03,0x03,0x03,0x03,0x03,0x03,0x03,0x03,0x03,0x02,ROMFONT,0};
  32          
  33          
  34          
  35          #define Gauge_COLOR1      BG_COLOR_BLACK|CH_COLOR_GREEN 
  36          #define Gauge_COLOR2      BG_COLOR_BLACK|CH_COLOR_YELLOW        
  37          #define Gauge_COLOR3      BG_COLOR_BLACK|CH_COLOR_RED   
  38          #define GAUGEINFO_ADDR    0 
  39          
C51 COMPILER V8.16   HS_DISPLAYOSD                                                         03/04/2011 15:51:19 PAGE 53  

  40          extern BYTE     year1,year2,month,day,hour,minute,second;
  41          extern BYTE     DVR_SDCardAvailable             ;
  42          extern BYTE     DVR_RecordMode;
  43          extern BYTE     DVR_Resolution;
  44          extern BYTE     DVR_RecordStatus                ;
  45          extern BYTE     DVR_Busy                                ;
  46          extern BYTE     DVRVersion[11];
  47          extern BYTE     DVRVersionLen;
  48          extern DATA BYTE        DVR_buf[DVR_BUF_MAX];
  49          //Tu
  50          CODE BYTE Init_Osd_DisplayGAUGEWindow[] = {
  51              17,
  52              OSD_Win_Num             ( BACK_COLOR|RATINGINFO_OSDWIN ),   // 2 bytes
  53              OSD_Win_Attr            ( WIN_BG_COLOR_EX0 | BACK_COLOR | WIN_3D_TYPE0 | WIN_3D_EN0 | WIN_EN ),
  54              OSD_Win_Start           ( 40,100),  // 120->40   24->               
  55              OSD_Win_Width           ( 30 ),                                                                       
             -           
  56              OSD_Win_Height          ( 5 ),
  57              OSD_Win_Border          ( WIN_BD_EN | BG_COLOR_WHITE | WIN_BD_WIDTH(0) ),
  58              OSD_Win_HBorder         ( WIN_BD_COLOR_EX0 | WIN_H_BD_W(0x00) ),
  59              OSD_Win_VBorder         ( WIN_V_BD_W(0x00) ),
  60              OSD_Win_CH_Space        ( WIN_CH_HSPACE(0) | WIN_CH_VSPACE(0) ),
  61              OSD_Win_ZM_SAddr        ( WIN_VZOOM(WINZOOMx4), WIN_HZOOM(WINZOOMx2), WIN_SADDR(RATINGINFO_ADDR) ), //
             - 2 bytes
  62              OSD_Win_Shadow          ( WIN_SHADOW_EN0 | BACK_COLOR | WIN_SHADOW_W(8) ),//
  63              OSD_Win_Blending        ( 8 ),
  64              OSD_Win_CH_BorderShadow ( WIN_SHADOW_COLOR_EX0 | WIN_MULTI_EN | WIN_V_EXT_EN0 
  66                                      | WIN_CH_BDSH_SEL(SEL_BORDER) 
  66                                      | WIN_CH_BDSH_COLOR_EX0 | CH_COLOR_BLACK ),
  67              0 // End of Data
  68          };
  69          
  70          #if 0
              //=============================================================================
              //                      Initialize Window for DisplayDVRstatus
              //=============================================================================
              CODE BYTE Init_Osd_DisplayDVRstatus[] = {
              
                      //----- Input Selection : Zoom 4
                      17,
                      OSD_Win_Num                             ( BACK_COLOR|DVRStatus_OSDWIN ),        // 2 bytes
                      OSD_Win_Attr                    ( WIN_BG_COLOR_EX0 | BACK_COLOR | WIN_3D_TYPE0 | WIN_3D_EN0 | WIN_EN0 ),
                      OSD_Win_Start                   ( 12, 500 ),    // 3 bytes
                      OSD_Win_Width                   ( 30 ),
                      OSD_Win_Height                  ( 1 ),
                      OSD_Win_Border                  ( WIN_BD_EN0 | OSDMENU_OUTLINE_COLOR | WIN_BD_WIDTH(1) ),
                      OSD_Win_HBorder                 ( WIN_BD_COLOR_EX0 | WIN_H_BD_W(1) ),
                      OSD_Win_VBorder                 ( WIN_V_BD_W(0x00) ),
                      OSD_Win_CH_Space                ( WIN_CH_HSPACE(0) | WIN_CH_VSPACE(0) ),
                      OSD_Win_ZM_SAddr                ( WIN_VZOOM(WINZOOMx4), WIN_HZOOM(WINZOOMx2), WIN_SADDR(DVRStatus_ADDR) ),      // 2 bytes
                      OSD_Win_Shadow                  ( WIN_SHADOW_EN0 | BG_COLOR_BLACK | WIN_SHADOW_W(0) ),
                      OSD_Win_Blending                ( 8 ),
                      OSD_Win_CH_BorderShadow ( WIN_SHADOW_COLOR_EX0 | WIN_MULTI_EN | WIN_V_EXT_EN0 
                                              | WIN_CH_BDSH_SEL(SEL_BORDER) 
                                              | WIN_CH_BDSH_COLOR_EX0 | CH_COLOR_BLACK ),
                      0 // End of Data
              };      
              #endif
  96          
  97          extern IDATA BYTE  DisplayedOSD;
  98          
  99          void DisplayGaugeOSD(void)
C51 COMPILER V8.16   HS_DISPLAYOSD                                                         03/04/2011 15:51:19 PAGE 54  

 100          {
 101   1         BYTE i;
 102   1         //extern CODE BYTE Init_Osd_DisplayGAUGEWindow[];
 103   1         ClearOSDInfo();
 104   1         ClearDataCnt(GAUGEINFO_ADDR,30*8);     
 105   1         DrawAttrCnt(0,0x00,30*8);  //2007.4.25 euX{//william-v1.43-970403
 106   1         InitOSDWindow(Init_Osd_DisplayGAUGEWindow); 
 107   1      
 108   1         for(i=0;i<150;i++){WriteStringToAddr(i," ",1);}  
 109   1                                
 110   1         DrawAttrCnt(GAUGEINFO_ADDR,Gauge_COLOR1,30);       
 111   1         WriteStringToAddr(GAUGEINFO_ADDR+5,GaugeString,22);
 112   1         WriteStringToAddr(GAUGEINFO_ADDR+30+4,GaugeString5,23);
 113   1      
 114   1         DrawAttrCnt(GAUGEINFO_ADDR+30,Gauge_COLOR2,60);   
 115   1         WriteStringToAddr(GAUGEINFO_ADDR+30*2+3,GaugeString3,3);
 116   1         WriteStringToAddr(GAUGEINFO_ADDR+30*2+26,GaugeString4,3);
 117   1         WriteStringToAddr(GAUGEINFO_ADDR+30*3+2,GaugeString6,27); 
 118   1      
 119   1         DrawAttrCnt(GAUGEINFO_ADDR+30*3,Gauge_COLOR3,60);  
 120   1         WriteStringToAddr(GAUGEINFO_ADDR+30*4+1,GaugeString3,3);
 121   1         WriteStringToAddr(GAUGEINFO_ADDR+30*4+28,GaugeString4,3);
 122   1      
 123   1         
 124   1         SetDisplayedOSD(GAUGEINFO);
 125   1      
 126   1         ShowOSDWindow(RATINGINFO_OSDWIN,TRUE);
 127   1         ShowOSDWindowAll(1);  //0x09c  4bit : OSD ON, 1: OSD OFF
 128   1         WriteTW88(TW88_WINBLENDING,0x08);       //wiliiam-v1.1-970827
 129   1      
 130   1      
 131   1      }
 132          
 133          void ClearGAUGEINFO(void)
 134          {
 135   1          ShowOSDWindow(RATINGINFO_OSDWIN ,FALSE);
 136   1          DisplayedOSD &= (~(GAUGEINFO));
 137   1      }
 138          
 139          void DisplaylockOSD(void)  // 2007.4.11 Justin
 140          {
 141   1         extern CODE BYTE Init_Osd_DisplayGAUGEWindow[];                                                        
             -                       
 142   1         ClearOSDInfo();
 143   1         ClearDataCnt(GAUGEINFO_ADDR,30*5);                                                 
 144   1         InitOSDWindow(Init_Osd_DisplayGAUGEWindow);                     
 145   1         DrawAttrCnt(0,0x04,30*5);   //]w}   
 146   1         WriteStringToAddr(30*3+7,"OSD MENU LOCKED",15);
 147   1         SetDisplayedOSD(GAUGEINFO);
 148   1         ShowOSDWindow(RATINGINFO_OSDWIN,TRUE);
 149   1         ShowOSDWindowAll(1);  //0x09c  4bit : OSD ON, 1: OSD OFF
 150   1         WriteTW88(TW88_WINBLENDING,0x08);       //wiliiam-v1.1-970827
 151   1      }
 152          
 153          
 154          
 155          void DisplayNumber(BYTE addr,WORD val,BYTE type)
 156          {
 157   1      
 158   1      #define Number_LENGTH 6 
 159   1      #define Number_LENGTH2 2
 160   1      
C51 COMPILER V8.16   HS_DISPLAYOSD                                                         03/04/2011 15:51:19 PAGE 55  

 161   1      
 162   1         // BYTE i;
 163   1         
 164   1          BYTE Bar_str[Number_LENGTH]={ ' ',' ','.',' ',' ','V' };
 165   1              BYTE Bar_str_AC[Number_LENGTH]={ ' ',' ',' ','.',' ','V' };
 166   1              BYTE Bar_str_Battery[Number_LENGTH]={ ' ','.',' ',' ',' ','V' };
 167   1              BYTE Num_str[Number_LENGTH2]={ ' ',' ' };
 168   1      
 169   1          //WORD addr;
 170   1      
 171   1      
 172   1      switch(type)
 173   1      {
 174   2      
 175   2      case 1:
 176   2      //if(ModeIndex==MODE_AC)
 177   2      //{
 178   2          //if( Bar_str[0] == 0x01 ) Bar_str[0] = 0x02; // |..
 179   2          Bar_str_AC[4] = val % 10 + '0';    val /= 10;
 180   2          Bar_str_AC[2] = val % 10 + '0';    val /= 10;
 181   2          Bar_str_AC[1] =  val % 10 + '0';    val /= 10;
 182   2          Bar_str_AC[0] = val + '0';
 183   2          if( Bar_str_AC[0] == '0' ) Bar_str_AC[0] = ' ';
 184   2              if( (Bar_str_AC[1] == '0') && (Bar_str_AC[0] == ' ') ) Bar_str_AC[1] = ' ';
 185   2      //}     
 186   2              DrawAttrCnt(addr, DEFAULT_COLOR, Number_LENGTH ); 
 187   2              WriteStringToAddr(addr, Bar_str_AC, Number_LENGTH );
 188   2      
 189   2      
 190   2      break;
 191   2      
 192   2      case 2:
 193   2      //{
 194   2          Bar_str_Battery[4] = val % 10 + '0';    val /= 10;
 195   2          Bar_str_Battery[3] = val % 10 + '0';    val /= 10;
 196   2          Bar_str_Battery[2] = val % 10 + '0';    val /= 10;
 197   2          Bar_str_Battery[0] = val + '0';
 198   2         // if( Bar_str[0] == '0' ) Bar_str[0] = ' ';
 199   2         DrawAttrCnt(addr, DEFAULT_COLOR, Number_LENGTH ); 
 200   2         WriteStringToAddr(addr, Bar_str_Battery, Number_LENGTH );
 201   2      
 202   2      //}
 203   2      break;
 204   2      
 205   2      case 3:
 206   2      //else
 207   2      //{
 208   2          // Number
 209   2          Bar_str[4] = val % 10 + '0';    val /= 10;
 210   2          Bar_str[3] = val % 10 + '0';    val /= 10;
 211   2          Bar_str[1] =  val % 10 + '0';    val /= 10;
 212   2          Bar_str[0] = val + '0';
 213   2          if( Bar_str[0] == '0' ) Bar_str[0] = ' ';
 214   2              //if( Bar_str[2] == '0' ) Bar_str[0] = ' ';
 215   2      //}
 216   2              DrawAttrCnt(addr, DEFAULT_COLOR, Number_LENGTH ); 
 217   2              WriteStringToAddr(addr, Bar_str, Number_LENGTH );
 218   2      
 219   2      break;
 220   2      
 221   2              
 222   2              case 4:
C51 COMPILER V8.16   HS_DISPLAYOSD                                                         03/04/2011 15:51:19 PAGE 56  

 223   2      
 224   2                      // Number
 225   2                      Num_str[1] =  val % 10 + '0';    val /= 10;
 226   2                      Num_str[0] = val + '0';
 227   2      
 228   2      
 229   2                      //DrawAttrCnt(addr, DEFAULT_COLOR, Number_LENGTH2 ); 
 230   2                      WriteStringToAddr(addr, Num_str, Number_LENGTH2 );
 231   2              
 232   2              break;
 233   2      
 234   2          //addr = OSDMENU_MAINADDR; // 
 235   2              
 236   2      
 237   2      }
 238   1      }
 239          
 240          
 241          
 242          void DisplayactvOSD(void)  //2007.4.11 Justin
 243          {
 244   1         extern CODE BYTE Init_Osd_DisplayGAUGEWindow[];                                                        
             -                       
 245   1         ClearOSDInfo();
 246   1         ClearDataCnt(GAUGEINFO_ADDR,30*5);                                                 
 247   1         InitOSDWindow(Init_Osd_DisplayGAUGEWindow);                     
 248   1         DrawAttrCnt(0,0x02,30*5);   //]w}   
 249   1         WriteStringToAddr(30*3+7,"OSD MENU ATCIVE",15);
 250   1         SetDisplayedOSD(GAUGEINFO);
 251   1         ShowOSDWindow(RATINGINFO_OSDWIN,TRUE);
 252   1         ShowOSDWindowAll(1);  //0x09c  4bit : OSD ON, 1: OSD OFF
 253   1         WriteTW88(TW88_WINBLENDING,0x08);       //wiliiam-v1.1-970827
 254   1      }
 255          
 256          //#ifdef SUPPORT_SDCARD
 257          void DisplayFormatOSD(void)  //2007.4.11 Justin
 258          {
 259   1         extern CODE BYTE Init_Osd_DisplayGAUGEWindow[];                                                        
             -                       
 260   1         ClearOSDInfo();
 261   1         ClearDataCnt(GAUGEINFO_ADDR,30*5);                                                 
 262   1         InitOSDWindow(Init_Osd_DisplayGAUGEWindow);                     
 263   1         DrawAttrCnt(0,Gauge_COLOR2,30*5);   //]w}   
 264   1         WriteStringToAddr(30*3+8,"FORMAT SD CARD",14);
 265   1         SetDisplayedOSD(GAUGEINFO);
 266   1         ShowOSDWindow(RATINGINFO_OSDWIN,TRUE);
 267   1         ShowOSDWindowAll(1);  //0x09c  4bit : OSD ON, 1: OSD OFF
 268   1         WriteTW88(TW88_WINBLENDING,0x08);       //wiliiam-v1.1-970827
 269   1      }
 270          
 271          void DisplayFormatOkOSD(void)  //2007.4.11 Justin
 272          {
 273   1         extern CODE BYTE Init_Osd_DisplayGAUGEWindow[];                                                        
             -                       
 274   1         ClearOSDInfo();
 275   1         ClearDataCnt(GAUGEINFO_ADDR,30*5);                                                 
 276   1         InitOSDWindow(Init_Osd_DisplayGAUGEWindow);                     
 277   1         DrawAttrCnt(0,Gauge_COLOR1,30*5);   //]w}   
 278   1         WriteStringToAddr(30*3+8,"FORMAT SUCCESS",14);
 279   1         SetDisplayedOSD(GAUGEINFO);
 280   1         ShowOSDWindow(RATINGINFO_OSDWIN,TRUE);
 281   1         ShowOSDWindowAll(1);  //0x09c  4bit : OSD ON, 1: OSD OFF
C51 COMPILER V8.16   HS_DISPLAYOSD                                                         03/04/2011 15:51:19 PAGE 57  

 282   1         WriteTW88(TW88_WINBLENDING,0x08);       //wiliiam-v1.1-970827
 283   1      }
 284          
 285          void DisplayFormatFailOSD(void)  //2007.4.11 Justin
 286          {
 287   1         extern CODE BYTE Init_Osd_DisplayGAUGEWindow[];                                                        
             -                       
 288   1         ClearOSDInfo();
 289   1         ClearDataCnt(GAUGEINFO_ADDR,30*5);                                                 
 290   1         InitOSDWindow(Init_Osd_DisplayGAUGEWindow);                     
 291   1         DrawAttrCnt(0,Gauge_COLOR3,30*5);   //]w}   
 292   1         WriteStringToAddr(30*3+10,"FORMAT FAIL",11);
 293   1         SetDisplayedOSD(GAUGEINFO);
 294   1         ShowOSDWindow(RATINGINFO_OSDWIN,TRUE);
 295   1         ShowOSDWindowAll(1);  //0x09c  4bit : OSD ON, 1: OSD OFF
 296   1         WriteTW88(TW88_WINBLENDING,0x08);       //wiliiam-v1.1-970827
 297   1      }
 298          
 299          void DisplayFWUpDate(void)  //2007.4.11 Justin
 300          {
 301   1         extern CODE BYTE Init_Osd_DisplayGAUGEWindow[];                                                        
             -                       
 302   1         ClearOSDInfo();
 303   1         ClearDataCnt(GAUGEINFO_ADDR,30*5);                                                 
 304   1         InitOSDWindow(Init_Osd_DisplayGAUGEWindow);                     
 305   1         DrawAttrCnt(0,Gauge_COLOR2,30*5);   //]w}   
 306   1         WriteStringToAddr(30*3+10,"FW Update...",12);
 307   1         SetDisplayedOSD(GAUGEINFO);
 308   1         ShowOSDWindow(RATINGINFO_OSDWIN,TRUE);
 309   1         ShowOSDWindowAll(1);  //0x09c  4bit : OSD ON, 1: OSD OFF
 310   1         WriteTW88(TW88_WINBLENDING,0x08);       //wiliiam-v1.1-970827
 311   1      }
 312          
 313          void DisplayFWUpDateOK(void)  //2007.4.11 Justin
 314          {
 315   1         extern CODE BYTE Init_Osd_DisplayGAUGEWindow[];                                                        
             -                       
 316   1         ClearOSDInfo();
 317   1         ClearDataCnt(GAUGEINFO_ADDR,30*5);                                                 
 318   1         InitOSDWindow(Init_Osd_DisplayGAUGEWindow);                     
 319   1         DrawAttrCnt(0,Gauge_COLOR1,30*5);   //]w}   
 320   1         WriteStringToAddr(30*3+7,"FW Update SUCCESS",17);
 321   1         SetDisplayedOSD(GAUGEINFO);
 322   1         ShowOSDWindow(RATINGINFO_OSDWIN,TRUE);
 323   1         ShowOSDWindowAll(1);  //0x09c  4bit : OSD ON, 1: OSD OFF
 324   1         WriteTW88(TW88_WINBLENDING,0x08);       //wiliiam-v1.1-970827
 325   1      }
 326          
 327          void DisplayFWUpDateFail(void)  //2007.4.11 Justin
 328          {
 329   1         extern CODE BYTE Init_Osd_DisplayGAUGEWindow[];                                                        
             -                       
 330   1         ClearOSDInfo();
 331   1         ClearDataCnt(GAUGEINFO_ADDR,30*5);                                                 
 332   1         InitOSDWindow(Init_Osd_DisplayGAUGEWindow);                     
 333   1         DrawAttrCnt(0,Gauge_COLOR3,30*5);   //]w}   
 334   1         WriteStringToAddr(30*3+8,"FW Update FAIL",14);
 335   1         SetDisplayedOSD(GAUGEINFO);
 336   1         ShowOSDWindow(RATINGINFO_OSDWIN,TRUE);
 337   1         ShowOSDWindowAll(1);  //0x09c  4bit : OSD ON, 1: OSD OFF
 338   1         WriteTW88(TW88_WINBLENDING,0x08);       //wiliiam-v1.1-970827
 339   1      }
C51 COMPILER V8.16   HS_DISPLAYOSD                                                         03/04/2011 15:51:19 PAGE 58  

 340          
 341          void DisplayDVRnotReady(void)  
 342          {
 343   1         extern CODE BYTE Init_Osd_DisplayGAUGEWindow[];                                                        
             -                       
 344   1         ClearOSDInfo();
 345   1         ClearDataCnt(GAUGEINFO_ADDR,30*5);                                                 
 346   1         InitOSDWindow(Init_Osd_DisplayGAUGEWindow);                     
 347   1         DrawAttrCnt(0,Gauge_COLOR3,30*5);   //]w}   
 348   1         WriteStringToAddr(30*3+6,"SD CARD Not Ready",17);
 349   1         SetDisplayedOSD(GAUGEINFO);
 350   1         ShowOSDWindow(RATINGINFO_OSDWIN,TRUE);
 351   1         ShowOSDWindowAll(1);  //0x09c  4bit : OSD ON, 1: OSD OFF
 352   1         WriteTW88(TW88_WINBLENDING,0x08);       //wiliiam-v1.1-970827
 353   1      }
 354          
 355          void DisplayFWVersion(void)  //2007.4.11 Justin
 356          {
 357   1         extern CODE BYTE Str_VER_E[];   
 358   1         BYTE i;
 359   1         BYTE Str_DVRVersion[]={' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',0}; //  will
             -iam-1.45-971106
 360   1      
 361   1      
 362   1              for(i=0;i<DVRVersionLen;i++) 
 363   1              {
 364   2                      Str_DVRVersion[i]=DVRVersion[i];
 365   2              }
 366   1      
 367   1         ClearOSDInfo();
 368   1         ClearDataCnt(GAUGEINFO_ADDR,30*5);                                                 
 369   1         InitOSDWindow(Init_Osd_DisplayGAUGEWindow);                     
 370   1         DrawAttrCnt(0,Gauge_COLOR1,30*5);   //]w}   
 371   1         WriteStringToAddr(30*0,"LCD:",4);
 372   1         WriteStringToAddr(30*1,Str_VER_E,8);
 373   1         #ifdef SUPPORT_SDCARD
 374   1         WriteStringToAddr(30*2,"DVR:",4);
 375   1         WriteStringToAddr(30*3,Str_DVRVersion,DVRVersionLen);
 376   1         #endif
 377   1        #if 0 
                      for(i=0;i<DVR_BUF_MAX;i++) 
                      {  
                              DisplayNumber(30*0+i*2,DVR_buf[i],4);
                      }
              #endif
 383   1         SetDisplayedOSD(GAUGEINFO);
 384   1         ShowOSDWindow(RATINGINFO_OSDWIN,TRUE);
 385   1         ShowOSDWindowAll(1);  //0x09c  4bit : OSD ON, 1: OSD OFF
 386   1         WriteTW88(TW88_WINBLENDING,0x08);       //wiliiam-v1.1-970827
 387   1      }
 388          //#endif        //#ifdef SUPPORT_SDCARD
 389          
 390          //#ifdef SUPPORT_SDCARD
 391          void DisplayDVRStatus(void)
 392          {
 393   1              extern CODE BYTE SDCARD_ICON[];
 394   1              extern CODE BYTE SCANSDCARD_ICON[];
 395   1              extern CODE BYTE NoSDCard_ICON[];
 396   1              extern CODE BYTE SDCardOverWrite_ICON[];
 397   1              //CODE BYTE Str_720[] = {RAMFONT,0x08,0x09,ROMFONT,0};
 398   1              //CODE BYTE Str_352[] = {RAMFONT,0x0A,0x0B,ROMFONT,0};
 399   1              BYTE RecordStatus=0;
C51 COMPILER V8.16   HS_DISPLAYOSD                                                         03/04/2011 15:51:19 PAGE 59  

 400   1      
 401   1              //display date & time
 402   1              DrawAttrCnt(DVRStatus_ADDR,0x02,25);   //]w}   
 403   1              DrawAttrCnt(DVRStatus_ADDR+26,Gauge_COLOR3,1);   //]w}   
 404   1              DrawAttrCnt(DVRStatus_ADDR+28,Gauge_COLOR2,2);   //]w} 
 405   1              DisplayNumber(DVRStatus_ADDR+1,year1,4);        
 406   1              DisplayNumber(DVRStatus_ADDR+3,year2,4);
 407   1              WriteStringToAddr(DVRStatus_ADDR+5,"/",1);
 408   1              DisplayNumber(DVRStatus_ADDR+6,month,4);
 409   1              WriteStringToAddr(DVRStatus_ADDR+8,"/",1);
 410   1              DisplayNumber(DVRStatus_ADDR+9,day,4);
 411   1              DisplayNumber(DVRStatus_ADDR+12,hour,4);
 412   1              DisplayNumber(DVRStatus_ADDR+15,minute,4);
 413   1      
 414   1              if(second&0x01)
 415   1                      WriteStringToAddr(DVRStatus_ADDR+14,":",1);
 416   1              else
 417   1                       ClearDataCnt(DVRStatus_ADDR+14,1);     
 418   1              
 419   1              //WriteStringToAddr(DVRStatus_ADDR+16,":",1);
 420   1              //DisplayNumber(DVRStatus_ADDR+17,second,4);
 421   1      
 422   1      
 423   1              //display dvr status
 424   1              if(DVR_SDCardAvailable!=0xff)
 425   1              {
 426   2      
 427   2              if(DVR_Busy)
 428   2                      {
 429   3                      WriteStringToAddr(DVRStatus_ADDR+20,SCANSDCARD_ICON,3);
 430   3                      //DisplayNumber(DVRStatus_ADDR+22,DVR_SDCardAvailable,4);
 431   3                      //WriteStringToAddr(DVRStatus_ADDR+24,"%",1);
 432   3                      }
 433   2              else     if((DVR_RecordStatus&OverWrite_Record)==OverWrite_Record)      
 434   2                      {
 435   3                      WriteStringToAddr(DVRStatus_ADDR+20,SDCardOverWrite_ICON,3);
 436   3                      DisplayNumber(DVRStatus_ADDR+22,DVR_SDCardAvailable,4);
 437   3                      WriteStringToAddr(DVRStatus_ADDR+24,"%",1);
 438   3                      }
 439   2              
 440   2              else
 441   2                      {
 442   3                      WriteStringToAddr(DVRStatus_ADDR+20,SDCARD_ICON,3);
 443   3                      DisplayNumber(DVRStatus_ADDR+22,DVR_SDCardAvailable,4);
 444   3                      WriteStringToAddr(DVRStatus_ADDR+24,"%",1);
 445   3                      }
 446   2                      if((DVR_RecordStatus&ALARM_Record)==ALARM_Record)
 447   2                         {
 448   3                               WriteStringToAddr(DVRStatus_ADDR+26,"A",1);            
 449   3                               #if 0
                                       if(DVR_Resolution==1)          //720*480
                                         {
                                               WriteStringToAddr(DVRStatus_ADDR+28,Str_720,4);
                                         }
                                       else if(DVR_Resolution==2) //352*234
                                         {
                                               WriteStringToAddr(DVRStatus_ADDR+28,Str_352,4);
                                         }    
                                       #endif
 459   3                              RecordStatus=1; 
 460   3                         }
 461   2                      
C51 COMPILER V8.16   HS_DISPLAYOSD                                                         03/04/2011 15:51:19 PAGE 60  

 462   2                      else if((DVR_RecordStatus&Manual_Record)==Manual_Record && RecordStatus==0)
 463   2                         {
 464   3                               WriteStringToAddr(DVRStatus_ADDR+26,"M",1);
 465   3                               #if 0
                                       if(DVR_Resolution==1)          //720*480
                                         {
                                               WriteStringToAddr(DVRStatus_ADDR+28,Str_720,4);
                                         }
                                       else if(DVR_Resolution==2) //352*234
                                         {
                                               WriteStringToAddr(DVRStatus_ADDR+28,Str_352,4);
                                         } 
                                       #endif
 475   3                               RecordStatus=1; 
 476   3                         }
 477   2      
 478   2                      else if((DVR_RecordStatus&NORMAL_Record)==NORMAL_Record && RecordStatus==0)
 479   2                         {
 480   3                               WriteStringToAddr(DVRStatus_ADDR+26,"R",1);
 481   3                              #if 0 
                                       if(DVR_Resolution==1)          //720*480
                                         {
                                               WriteStringToAddr(DVRStatus_ADDR+28,Str_720,4);
                                         }
                                       else if(DVR_Resolution==2) //352*234
                                         {
                                               WriteStringToAddr(DVRStatus_ADDR+28,Str_352,4);
                                         }
                                       #endif
 491   3                               RecordStatus=1; 
 492   3                               
 493   3                         }
 494   2                      
 495   2                      if(RecordStatus==0)
 496   2                       ClearDataCnt(DVRStatus_ADDR+26,4);     
 497   2              }
 498   1              else
 499   1              {
 500   2                      WriteStringToAddr(DVRStatus_ADDR+20,NoSDCard_ICON,4);
 501   2                      ClearDataCnt(DVRStatus_ADDR+22,8);      
 502   2      
 503   2              }
 504   1      
 505   1      if(ReadEEP(EEP_DVRDisplay)==0)
 506   1              ShowOSDWindow(DVRStatus_OSDWIN,TRUE);
 507   1      else
 508   1              ShowOSDWindow(DVRStatus_OSDWIN,FALSE);
 509   1      
 510   1         ShowOSDWindowAll(1);  //0x09c  4bit : OSD ON, 1: OSD OFF
 511   1         WriteTW88(TW88_WINBLENDING,0x08);       //wiliiam-v1.1-970827
 512   1      
 513   1      }
 514          
 515          //#endif        //#ifdef SUPPORT_SDCARD
 516          
C51 COMPILER V8.16   HS_DISPLAYOSD                                                         03/04/2011 15:51:19 PAGE 61  

ASSEMBLY LISTING OF GENERATED OBJECT CODE


             ; FUNCTION Com0036 (BEGIN)
0000         L?0055:
0000 ED                MOV     A,R5
0001 2430              ADD     A,#030H
0003         L?0056:
0003 F2                MOVX    @R0,A
0004 7C00              MOV     R4,#00H
0006 7D0A              MOV     R5,#0AH
0008 AF03              MOV     R7,AR3
000A AE02              MOV     R6,AR2
000C 120000      E     LCALL   ?C?UIDIV
000F 7800        R     MOV     R0,#LOW val
0011 EE                MOV     A,R6
0012 F2                MOVX    @R0,A
0013 08                INC     R0
0014 EF                MOV     A,R7
0015 F2                MOVX    @R0,A
0016 18                DEC     R0
0017         L?0057:
0017 E2                MOVX    A,@R0
0018 FA                MOV     R2,A
0019 08                INC     R0
001A E2                MOVX    A,@R0
001B FB                MOV     R3,A
001C FF                MOV     R7,A
001D         L?0058:
001D 7C00              MOV     R4,#00H
001F 7D0A              MOV     R5,#0AH
0021 AE02              MOV     R6,AR2
0023 020000      E     LJMP    ?C?UIDIV
0026         L?0059:
0026 ED                MOV     A,R5
0027 2430              ADD     A,#030H
0029         L?0060:
0029 F2                MOVX    @R0,A
002A 7C00              MOV     R4,#00H
002C 7D0A              MOV     R5,#0AH
002E AF03              MOV     R7,AR3
0030 AE02              MOV     R6,AR2
0032 120000      E     LCALL   ?C?UIDIV
0035         L?0061:
0035 7800        R     MOV     R0,#LOW val
0037 EE                MOV     A,R6
0038 F2                MOVX    @R0,A
0039 08                INC     R0
003A EF                MOV     A,R7
003B F2                MOVX    @R0,A
003C 2430              ADD     A,#030H
003E 22                RET     
003F         L?0064:
003F         L?0065:
003F 7B08              MOV     R3,#08H
0041 7DAC              MOV     R5,#0ACH
0043 7F8A              MOV     R7,#08AH
0045 22                RET     
0046         L?0066:
0046         L?0067:
0046 7BFF              MOV     R3,#0FFH
0048 7A00        R     MOV     R2,#HIGH Init_Osd_DisplayGAUGEWindow
C51 COMPILER V8.16   HS_DISPLAYOSD                                                         03/04/2011 15:51:19 PAGE 62  

004A 7900        R     MOV     R1,#LOW Init_Osd_DisplayGAUGEWindow
004C 22                RET     
004D         L?0068:
004D 7DFE              MOV     R5,#0FEH
004F 7BFF              MOV     R3,#0FFH
0051         L?0069:
0051 7E00              MOV     R6,#00H
0053 7F06              MOV     R7,#06H
0055 020000      E     LJMP    ?C?COPY
0058         L?0072:
0058 7A00        R     MOV     R2,#HIGH ?SC_150
005A 7900        R     MOV     R1,#LOW ?SC_150
005C         L?0073:
005C 7BFF              MOV     R3,#0FFH
005E 7800        E     MOV     R0,#LOW ?_WriteStringToAddr?BYTE+05H
0060 7401              MOV     A,#01H
0062 F2                MOVX    @R0,A
0063 22                RET     
0064         L?0074:
0064 7BFF              MOV     R3,#0FFH
0066         L?0075:
0066 7800        E     MOV     R0,#LOW ?_WriteStringToAddr?BYTE+05H
0068 740E              MOV     A,#0EH
006A F2                MOVX    @R0,A
006B 7F62              MOV     R7,#062H
006D 7E00              MOV     R6,#00H
006F 22                RET     
0070         L?0076:
0070 7BFF              MOV     R3,#0FFH
0072 740F              MOV     A,#0FH
0074         L?0077:
0074 7800        E     MOV     R0,#LOW ?_WriteStringToAddr?BYTE+05H
0076 F2                MOVX    @R0,A
0077 7F61              MOV     R7,#061H
0079 7E00              MOV     R6,#00H
007B 22                RET     
007C         L?0079:
007C         L?0080:
007C 7B96              MOV     R3,#096H
007E 7D04              MOV     R5,#04H
0080 E4                CLR     A
0081 FF                MOV     R7,A
0082 FE                MOV     R6,A
0083 22                RET     
0084         L?0081:
0084         L?0082:
0084 7B96              MOV     R3,#096H
0086 7D02              MOV     R5,#02H
0088 E4                CLR     A
0089 FF                MOV     R7,A
008A FE                MOV     R6,A
008B 22                RET     
008C         L?0084:
008C 7BFF              MOV     R3,#0FFH
008E 7800        E     MOV     R0,#LOW ?_WriteStringToAddr?BYTE+05H
0090 7404              MOV     A,#04H
0092 F2                MOVX    @R0,A
0093 22                RET     
0094         L?0085:
0094 7800        E     MOV     R0,#LOW ?_WriteStringToAddr?BYTE+05H
0096 7403              MOV     A,#03H
0098 F2                MOVX    @R0,A
C51 COMPILER V8.16   HS_DISPLAYOSD                                                         03/04/2011 15:51:19 PAGE 63  

0099 7FD7              MOV     R7,#0D7H
009B 22                RET     
009C         L?0086:
009C 7DFE              MOV     R5,#0FEH
009E 7BFF              MOV     R3,#0FFH
00A0 7E00              MOV     R6,#00H
00A2 020000      E     LJMP    ?C?COPY
00A5         L?0087:
00A5         L?0088:
00A5 7800        R     MOV     R0,#LOW addr
00A7 E2                MOVX    A,@R0
00A8 FF                MOV     R7,A
00A9 7E00              MOV     R6,#00H
00AB 22                RET     
00AC         L?0089:
00AC 7BFF              MOV     R3,#0FFH
00AE 7800        E     MOV     R0,#LOW ?_WriteStringToAddr?BYTE+05H
00B0 F2                MOVX    @R0,A
00B1 7F64              MOV     R7,#064H
00B3 7E00              MOV     R6,#00H
00B5 22                RET     
00B6         L?0090:
00B6 7BFF              MOV     R3,#0FFH
00B8 7800        E     MOV     R0,#LOW ?_WriteStringToAddr?BYTE+05H
00BA 7401              MOV     A,#01H
00BC 22                RET     
             ; FUNCTION Com0036 (END)

             ; FUNCTION DisplayGaugeOSD (BEGIN)
                                           ; SOURCE LINE # 99
                                           ; SOURCE LINE # 100
                                           ; SOURCE LINE # 103
0000 120000      E     LCALL   ClearOSDInfo
                                           ; SOURCE LINE # 104
0003 7DF0              MOV     R5,#0F0H
0005 E4                CLR     A
0006 FF                MOV     R7,A
0007 FE                MOV     R6,A
0008 120000      E     LCALL   _ClearDataCnt
                                           ; SOURCE LINE # 105
000B 7BF0              MOV     R3,#0F0H
000D E4                CLR     A
000E FD                MOV     R5,A
000F FF                MOV     R7,A
0010 FE                MOV     R6,A
0011 120000      E     LCALL   _DrawAttrCnt
                                           ; SOURCE LINE # 106
0014 120000      R     LCALL   L?0066
0017 120000      E     LCALL   _InitOSDWindow
                                           ; SOURCE LINE # 108
001A E4                CLR     A
001B 7800        R     MOV     R0,#LOW i
001D F2                MOVX    @R0,A
001E         ?C0001:
001E 7800        R     MOV     R0,#LOW i
0020 E2                MOVX    A,@R0
0021 FF                MOV     R7,A
0022 C3                CLR     C
0023 9496              SUBB    A,#096H
0025 5013              JNC     ?C0002
0027 7E00              MOV     R6,#00H
0029 7A00        R     MOV     R2,#HIGH ?SC_0
C51 COMPILER V8.16   HS_DISPLAYOSD                                                         03/04/2011 15:51:19 PAGE 64  

002B 7900        R     MOV     R1,#LOW ?SC_0
002D 120000      R     LCALL   L?0073
0030 120000      E     LCALL   _WriteStringToAddr
0033 7800        R     MOV     R0,#LOW i
0035 E2                MOVX    A,@R0
0036 04                INC     A
0037 F2                MOVX    @R0,A
0038 80E4              SJMP    ?C0001
003A         ?C0002:
                                           ; SOURCE LINE # 110
003A 7B1E              MOV     R3,#01EH
003C 7D02              MOV     R5,#02H
003E E4                CLR     A
003F FF                MOV     R7,A
0040 FE                MOV     R6,A
0041 120000      E     LCALL   _DrawAttrCnt
                                           ; SOURCE LINE # 111
0044 7BFF              MOV     R3,#0FFH
0046 7A00        R     MOV     R2,#HIGH GaugeString
0048 7900        R     MOV     R1,#LOW GaugeString
004A 7800        E     MOV     R0,#LOW ?_WriteStringToAddr?BYTE+05H
004C 7416              MOV     A,#016H
004E F2                MOVX    @R0,A
004F 7F05              MOV     R7,#05H
0051 7E00              MOV     R6,#00H
0053 120000      E     LCALL   _WriteStringToAddr
                                           ; SOURCE LINE # 112
0056 7BFF              MOV     R3,#0FFH
0058 7A00        R     MOV     R2,#HIGH GaugeString5
005A 7900        R     MOV     R1,#LOW GaugeString5
005C 7800        E     MOV     R0,#LOW ?_WriteStringToAddr?BYTE+05H
005E 7417              MOV     A,#017H
0060 F2                MOVX    @R0,A
0061 7F22              MOV     R7,#022H
0063 7E00              MOV     R6,#00H
0065 120000      E     LCALL   _WriteStringToAddr
                                           ; SOURCE LINE # 114
0068 7D06              MOV     R5,#06H
006A 7F1E              MOV     R7,#01EH
                                           ; SOURCE LINE # 115
006C 120000      R     LCALL   L?0071
006F 7F3F              MOV     R7,#03FH
                                           ; SOURCE LINE # 116
0071 120000      R     LCALL   L?0078
0074 7F56              MOV     R7,#056H
0076 7E00              MOV     R6,#00H
0078 120000      E     LCALL   _WriteStringToAddr
                                           ; SOURCE LINE # 117
007B 7BFF              MOV     R3,#0FFH
007D 7A00        R     MOV     R2,#HIGH GaugeString6
007F 7900        R     MOV     R1,#LOW GaugeString6
0081 7800        E     MOV     R0,#LOW ?_WriteStringToAddr?BYTE+05H
0083 741B              MOV     A,#01BH
0085 F2                MOVX    @R0,A
0086 7F5C              MOV     R7,#05CH
0088 7E00              MOV     R6,#00H
008A 120000      E     LCALL   _WriteStringToAddr
                                           ; SOURCE LINE # 119
008D 7D04              MOV     R5,#04H
008F 7F5A              MOV     R7,#05AH
                                           ; SOURCE LINE # 120
0091 120000      R     LCALL   L?0071
C51 COMPILER V8.16   HS_DISPLAYOSD                                                         03/04/2011 15:51:19 PAGE 65  

0094 7F79              MOV     R7,#079H
                                           ; SOURCE LINE # 121
0096 120000      R     LCALL   L?0078
0099 7F94              MOV     R7,#094H
009B 7E00              MOV     R6,#00H
009D 120000      E     LCALL   _WriteStringToAddr
                                           ; SOURCE LINE # 124
00A0 7F40              MOV     R7,#040H
00A2 120000      E     LCALL   _SetDisplayedOSD
                                           ; SOURCE LINE # 126
00A5 7D01              MOV     R5,#01H
00A7 7F01              MOV     R7,#01H
00A9 120000      E     LCALL   _ShowOSDWindow_TW88
                                           ; SOURCE LINE # 127
00AC 7F01              MOV     R7,#01H
00AE 120000      E     LCALL   _ShowOSDWindowAll
                                           ; SOURCE LINE # 128
00B1 120000      R     LCALL   L?0064
00B4 020000      E     LJMP    _WriteI2C
                                           ; SOURCE LINE # 131
00B7         L?0071:
00B7 7B3C              MOV     R3,#03CH
00B9 7E00              MOV     R6,#00H
00BB 120000      E     LCALL   _DrawAttrCnt
00BE 7BFF              MOV     R3,#0FFH
00C0 7A00        R     MOV     R2,#HIGH GaugeString3
00C2 7900        R     MOV     R1,#LOW GaugeString3
00C4 7800        E     MOV     R0,#LOW ?_WriteStringToAddr?BYTE+05H
00C6 7403              MOV     A,#03H
00C8 F2                MOVX    @R0,A
00C9 22                RET     
00CA         L?0078:
00CA 7E00              MOV     R6,#00H
00CC 120000      E     LCALL   _WriteStringToAddr
00CF 7BFF              MOV     R3,#0FFH
00D1 7A00        R     MOV     R2,#HIGH GaugeString4
00D3 7900        R     MOV     R1,#LOW GaugeString4
00D5 7800        E     MOV     R0,#LOW ?_WriteStringToAddr?BYTE+05H
00D7 7403              MOV     A,#03H
00D9 F2                MOVX    @R0,A
00DA 22                RET     
             ; FUNCTION DisplayGaugeOSD (END)

             ; FUNCTION ClearGAUGEINFO (BEGIN)
                                           ; SOURCE LINE # 133
                                           ; SOURCE LINE # 134
                                           ; SOURCE LINE # 135
0000 E4                CLR     A
0001 FD                MOV     R5,A
0002 7F01              MOV     R7,#01H
0004 120000      E     LCALL   _ShowOSDWindow_TW88
                                           ; SOURCE LINE # 136
0007 5300BF      E     ANL     DisplayedOSD,#0BFH
                                           ; SOURCE LINE # 137
000A 22                RET     
             ; FUNCTION ClearGAUGEINFO (END)

             ; FUNCTION DisplaylockOSD (BEGIN)
                                           ; SOURCE LINE # 139
                                           ; SOURCE LINE # 140
                                           ; SOURCE LINE # 142
0000 120000      E     LCALL   ClearOSDInfo
C51 COMPILER V8.16   HS_DISPLAYOSD                                                         03/04/2011 15:51:19 PAGE 66  

                                           ; SOURCE LINE # 143
0003 7D96              MOV     R5,#096H
0005 E4                CLR     A
0006 FF                MOV     R7,A
0007 FE                MOV     R6,A
0008 120000      E     LCALL   _ClearDataCnt
                                           ; SOURCE LINE # 144
000B 120000      R     LCALL   L?0066
000E 120000      E     LCALL   _InitOSDWindow
                                           ; SOURCE LINE # 145
0011 120000      R     LCALL   L?0079
0014 120000      E     LCALL   _DrawAttrCnt
                                           ; SOURCE LINE # 146
0017 7A00        R     MOV     R2,#HIGH ?SC_2
0019 7900        R     MOV     R1,#LOW ?SC_2
001B 120000      R     LCALL   L?0076
001E 120000      E     LCALL   _WriteStringToAddr
                                           ; SOURCE LINE # 147
0021 7F40              MOV     R7,#040H
0023 120000      E     LCALL   _SetDisplayedOSD
                                           ; SOURCE LINE # 148
0026 7D01              MOV     R5,#01H
0028 7F01              MOV     R7,#01H
002A 120000      E     LCALL   _ShowOSDWindow_TW88
                                           ; SOURCE LINE # 149
002D 7F01              MOV     R7,#01H
002F 120000      E     LCALL   _ShowOSDWindowAll
                                           ; SOURCE LINE # 150
0032 120000      R     LCALL   L?0064
0035 020000      E     LJMP    _WriteI2C
             ; FUNCTION DisplaylockOSD (END)

             ; FUNCTION _DisplayNumber (BEGIN)
                                           ; SOURCE LINE # 155
0000 7800        R     MOV     R0,#LOW addr
0002 EF                MOV     A,R7
0003 F2                MOVX    @R0,A
0004 08                INC     R0
0005 EC                MOV     A,R4
0006 F2                MOVX    @R0,A
0007 08                INC     R0
0008 ED                MOV     A,R5
0009 F2                MOVX    @R0,A
000A 08                INC     R0
000B EB                MOV     A,R3
000C F2                MOVX    @R0,A
                                           ; SOURCE LINE # 156
                                           ; SOURCE LINE # 164
000D 08                INC     R0
000E 7C00        R     MOV     R4,#HIGH Bar_str
0010 7A00        R     MOV     R2,#HIGH _?ix1000
0012 7900        R     MOV     R1,#LOW _?ix1000
0014 120000      R     LCALL   L?0068
                                           ; SOURCE LINE # 165
0017 7800        R     MOV     R0,#LOW Bar_str_AC
0019 7C00        R     MOV     R4,#HIGH Bar_str_AC
001B 7A00        R     MOV     R2,#HIGH _?ix1001
001D 7900        R     MOV     R1,#LOW _?ix1001
001F 120000      R     LCALL   L?0068
                                           ; SOURCE LINE # 166
0022 7800        R     MOV     R0,#LOW Bar_str_Battery
0024 7C00        R     MOV     R4,#HIGH Bar_str_Battery
C51 COMPILER V8.16   HS_DISPLAYOSD                                                         03/04/2011 15:51:19 PAGE 67  

0026 7DFE              MOV     R5,#0FEH
0028 7BFF              MOV     R3,#0FFH
002A 7A00        R     MOV     R2,#HIGH _?ix1002
002C 7900        R     MOV     R1,#LOW _?ix1002
002E 120000      R     LCALL   L?0069
                                           ; SOURCE LINE # 167
0031 7800        R     MOV     R0,#LOW Num_str
0033 7C00        R     MOV     R4,#HIGH Num_str
0035 7A00        R     MOV     R2,#HIGH _?ix1003
0037 7900        R     MOV     R1,#LOW _?ix1003
0039 7F02              MOV     R7,#02H
003B 120000      R     LCALL   L?0086
                                           ; SOURCE LINE # 172
003E 7800        R     MOV     R0,#LOW type
0040 E2                MOVX    A,@R0
0041 24FE              ADD     A,#0FEH
0043 6052              JZ      ?C0011
0045 14                DEC     A
0046 6078              JZ      ?C0012
0048 14                DEC     A
0049 7003              JNZ     $ + 5H
004B 020000      R     LJMP    ?C0014
004E 2403              ADD     A,#03H
0050 6003              JZ      $ + 5H
0052 020000      R     LJMP    ?C0015
                                           ; SOURCE LINE # 173
                                           ; SOURCE LINE # 175
0055         ?C0008:
                                           ; SOURCE LINE # 179
0055 7800        R     MOV     R0,#LOW val
0057 120000      R     LCALL   L?0057
005A 7800        R     MOV     R0,#LOW Bar_str_AC+04H
                                           ; SOURCE LINE # 180
005C 120000      R     LCALL   L?0055
005F 7800        R     MOV     R0,#LOW Bar_str_AC+02H
                                           ; SOURCE LINE # 181
0061 120000      R     LCALL   L?0055
0064 ED                MOV     A,R5
0065 2430              ADD     A,#030H
0067 7800        R     MOV     R0,#LOW Bar_str_AC+01H
0069 F2                MOVX    @R0,A
006A AF03              MOV     R7,AR3
006C 120000      R     LCALL   L?0058
                                           ; SOURCE LINE # 182
006F 120000      R     LCALL   L?0061
0072 FF                MOV     R7,A
0073 7800        R     MOV     R0,#LOW Bar_str_AC
0075 F2                MOVX    @R0,A
                                           ; SOURCE LINE # 183
0076 BF3003            CJNE    R7,#030H,?C0009
0079 7420              MOV     A,#020H
007B F2                MOVX    @R0,A
007C         ?C0009:
                                           ; SOURCE LINE # 184
007C 7800        R     MOV     R0,#LOW Bar_str_AC+01H
007E E2                MOVX    A,@R0
007F B43009            CJNE    A,#030H,?C0010
0082 18                DEC     R0
0083 E2                MOVX    A,@R0
0084 B42004            CJNE    A,#020H,?C0010
0087 08                INC     R0
0088 7420              MOV     A,#020H
C51 COMPILER V8.16   HS_DISPLAYOSD                                                         03/04/2011 15:51:19 PAGE 68  

008A F2                MOVX    @R0,A
008B         ?C0010:
                                           ; SOURCE LINE # 186
                                           ; SOURCE LINE # 187
008B 120000      R     LCALL   L?0062
008E 7BFE              MOV     R3,#0FEH
0090 7A00        R     MOV     R2,#HIGH Bar_str_AC
0092 7900        R     MOV     R1,#LOW Bar_str_AC
                                           ; SOURCE LINE # 190
0094 020000      R     LJMP    ?C0046
                                           ; SOURCE LINE # 192
0097         ?C0011:
                                           ; SOURCE LINE # 194
0097 7800        R     MOV     R0,#LOW val
0099 120000      R     LCALL   L?0057
009C ED                MOV     A,R5
009D 2430              ADD     A,#030H
009F 7800        R     MOV     R0,#LOW Bar_str_Battery+04H
                                           ; SOURCE LINE # 195
00A1 120000      R     LCALL   L?0056
00A4 ED                MOV     A,R5
00A5 2430              ADD     A,#030H
00A7 7800        R     MOV     R0,#LOW Bar_str_Battery+03H
                                           ; SOURCE LINE # 196
00A9 120000      R     LCALL   L?0056
00AC 7800        R     MOV     R0,#LOW Bar_str_Battery+02H
                                           ; SOURCE LINE # 197
00AE 120000      R     LCALL   L?0059
00B1 7800        R     MOV     R0,#LOW Bar_str_Battery
00B3 F2                MOVX    @R0,A
                                           ; SOURCE LINE # 199
                                           ; SOURCE LINE # 200
00B4 120000      R     LCALL   L?0062
00B7 7BFE              MOV     R3,#0FEH
00B9 7A00        R     MOV     R2,#HIGH Bar_str_Battery
00BB 7900        R     MOV     R1,#LOW Bar_str_Battery
00BD         ?C0045:
                                           ; SOURCE LINE # 203
00BD 020000      R     LJMP    ?C0046
                                           ; SOURCE LINE # 205
00C0         ?C0012:
                                           ; SOURCE LINE # 209
00C0 7800        R     MOV     R0,#LOW val
00C2 120000      R     LCALL   L?0057
00C5 ED                MOV     A,R5
00C6 2430              ADD     A,#030H
00C8 7800        R     MOV     R0,#LOW Bar_str+04H
                                           ; SOURCE LINE # 210
00CA 120000      R     LCALL   L?0056
00CD ED                MOV     A,R5
00CE 2430              ADD     A,#030H
00D0 7800        R     MOV     R0,#LOW Bar_str+03H
                                           ; SOURCE LINE # 211
00D2 120000      R     LCALL   L?0056
00D5 7800        R     MOV     R0,#LOW Bar_str+01H
                                           ; SOURCE LINE # 212
00D7 120000      R     LCALL   L?0059
00DA FF                MOV     R7,A
00DB 7800        R     MOV     R0,#LOW Bar_str
00DD F2                MOVX    @R0,A
                                           ; SOURCE LINE # 213
00DE BF3003            CJNE    R7,#030H,?C0013
C51 COMPILER V8.16   HS_DISPLAYOSD                                                         03/04/2011 15:51:19 PAGE 69  

00E1 7420              MOV     A,#020H
00E3 F2                MOVX    @R0,A
00E4         ?C0013:
                                           ; SOURCE LINE # 216
00E4 120000      R     LCALL   L?0087
00E7 7B06              MOV     R3,#06H
00E9 7D37              MOV     R5,#037H
00EB 120000      E     LCALL   _DrawAttrCnt
                                           ; SOURCE LINE # 217
00EE 120000      R     LCALL   L?0087
00F1 7BFE              MOV     R3,#0FEH
00F3 7A00        R     MOV     R2,#HIGH Bar_str
00F5 7900        R     MOV     R1,#LOW Bar_str
00F7         ?C0046:
00F7 7800        E     MOV     R0,#LOW ?_WriteStringToAddr?BYTE+05H
00F9 7406              MOV     A,#06H
                                           ; SOURCE LINE # 219
00FB 801D              SJMP    ?C0047
                                           ; SOURCE LINE # 222
00FD         ?C0014:
                                           ; SOURCE LINE # 225
00FD 7800        R     MOV     R0,#LOW val
00FF 120000      R     LCALL   L?0057
0102 ED                MOV     A,R5
0103 2430              ADD     A,#030H
0105 7800        R     MOV     R0,#LOW Num_str+01H
                                           ; SOURCE LINE # 226
0107 120000      R     LCALL   L?0060
010A 7800        R     MOV     R0,#LOW Num_str
010C F2                MOVX    @R0,A
                                           ; SOURCE LINE # 230
010D 120000      R     LCALL   L?0088
0110 7BFE              MOV     R3,#0FEH
0112 7A00        R     MOV     R2,#HIGH Num_str
0114 7900        R     MOV     R1,#LOW Num_str
0116 7800        E     MOV     R0,#LOW ?_WriteStringToAddr?BYTE+05H
0118 7402              MOV     A,#02H
011A         ?C0047:
011A F2                MOVX    @R0,A
011B 120000      E     LCALL   _WriteStringToAddr
                                           ; SOURCE LINE # 232
                                           ; SOURCE LINE # 237
                                           ; SOURCE LINE # 238
011E         ?C0015:
011E 22                RET     
011F         L?0062:
011F 7800        R     MOV     R0,#LOW addr
0121 E2                MOVX    A,@R0
0122 FF                MOV     R7,A
0123 7E00              MOV     R6,#00H
0125 7B06              MOV     R3,#06H
0127 7D37              MOV     R5,#037H
0129 120000      E     LCALL   _DrawAttrCnt
012C 7800        R     MOV     R0,#LOW addr
012E E2                MOVX    A,@R0
012F FF                MOV     R7,A
0130 7E00              MOV     R6,#00H
0132 22                RET     
             ; FUNCTION _DisplayNumber (END)

             ; FUNCTION DisplayactvOSD (BEGIN)
                                           ; SOURCE LINE # 242
C51 COMPILER V8.16   HS_DISPLAYOSD                                                         03/04/2011 15:51:19 PAGE 70  

                                           ; SOURCE LINE # 243
                                           ; SOURCE LINE # 245
0000 120000      E     LCALL   ClearOSDInfo
                                           ; SOURCE LINE # 246
0003 7D96              MOV     R5,#096H
0005 E4                CLR     A
0006 FF                MOV     R7,A
0007 FE                MOV     R6,A
0008 120000      E     LCALL   _ClearDataCnt
                                           ; SOURCE LINE # 247
000B 120000      R     LCALL   L?0067
000E 120000      E     LCALL   _InitOSDWindow
                                           ; SOURCE LINE # 248
0011 120000      R     LCALL   L?0081
0014 120000      E     LCALL   _DrawAttrCnt
                                           ; SOURCE LINE # 249
0017 7A00        R     MOV     R2,#HIGH ?SC_18
0019 7900        R     MOV     R1,#LOW ?SC_18
001B 120000      R     LCALL   L?0076
001E 120000      E     LCALL   _WriteStringToAddr
                                           ; SOURCE LINE # 250
0021 7F40              MOV     R7,#040H
0023 120000      E     LCALL   _SetDisplayedOSD
                                           ; SOURCE LINE # 251
0026 7D01              MOV     R5,#01H
0028 7F01              MOV     R7,#01H
002A 120000      E     LCALL   _ShowOSDWindow_TW88
                                           ; SOURCE LINE # 252
002D 7F01              MOV     R7,#01H
002F 120000      E     LCALL   _ShowOSDWindowAll
                                           ; SOURCE LINE # 253
0032 120000      R     LCALL   L?0065
0035 020000      E     LJMP    _WriteI2C
             ; FUNCTION DisplayactvOSD (END)

             ; FUNCTION DisplayFormatOSD (BEGIN)
                                           ; SOURCE LINE # 257
                                           ; SOURCE LINE # 258
                                           ; SOURCE LINE # 260
0000 120000      E     LCALL   ClearOSDInfo
                                           ; SOURCE LINE # 261
0003 7D96              MOV     R5,#096H
0005 E4                CLR     A
0006 FF                MOV     R7,A
0007 FE                MOV     R6,A
0008 120000      E     LCALL   _ClearDataCnt
                                           ; SOURCE LINE # 262
000B 120000      R     LCALL   L?0067
000E 120000      E     LCALL   _InitOSDWindow
                                           ; SOURCE LINE # 263
0011 7B96              MOV     R3,#096H
0013 7D06              MOV     R5,#06H
0015 E4                CLR     A
0016 FF                MOV     R7,A
0017 FE                MOV     R6,A
0018 120000      E     LCALL   _DrawAttrCnt
                                           ; SOURCE LINE # 264
001B 7A00        R     MOV     R2,#HIGH ?SC_34
001D 7900        R     MOV     R1,#LOW ?SC_34
001F 120000      R     LCALL   L?0074
0022 120000      E     LCALL   _WriteStringToAddr
                                           ; SOURCE LINE # 265
C51 COMPILER V8.16   HS_DISPLAYOSD                                                         03/04/2011 15:51:19 PAGE 71  

0025 7F40              MOV     R7,#040H
0027 120000      E     LCALL   _SetDisplayedOSD
                                           ; SOURCE LINE # 266
002A 7D01              MOV     R5,#01H
002C 7F01              MOV     R7,#01H
002E 120000      E     LCALL   _ShowOSDWindow_TW88
                                           ; SOURCE LINE # 267
0031 7F01              MOV     R7,#01H
0033 120000      E     LCALL   _ShowOSDWindowAll
                                           ; SOURCE LINE # 268
0036 120000      R     LCALL   L?0065
0039 020000      E     LJMP    _WriteI2C
             ; FUNCTION DisplayFormatOSD (END)

             ; FUNCTION DisplayFormatOkOSD (BEGIN)
                                           ; SOURCE LINE # 271
                                           ; SOURCE LINE # 272
                                           ; SOURCE LINE # 274
0000 120000      E     LCALL   ClearOSDInfo
                                           ; SOURCE LINE # 275
0003 7D96              MOV     R5,#096H
0005 E4                CLR     A
0006 FF                MOV     R7,A
0007 FE                MOV     R6,A
0008 120000      E     LCALL   _ClearDataCnt
                                           ; SOURCE LINE # 276
000B 120000      R     LCALL   L?0067
000E 120000      E     LCALL   _InitOSDWindow
                                           ; SOURCE LINE # 277
0011 120000      R     LCALL   L?0081
0014 120000      E     LCALL   _DrawAttrCnt
                                           ; SOURCE LINE # 278
0017 7A00        R     MOV     R2,#HIGH ?SC_49
0019 7900        R     MOV     R1,#LOW ?SC_49
001B 120000      R     LCALL   L?0074
001E 120000      E     LCALL   _WriteStringToAddr
                                           ; SOURCE LINE # 279
0021 7F40              MOV     R7,#040H
0023 120000      E     LCALL   _SetDisplayedOSD
                                           ; SOURCE LINE # 280
0026 7D01              MOV     R5,#01H
0028 7F01              MOV     R7,#01H
002A 120000      E     LCALL   _ShowOSDWindow_TW88
                                           ; SOURCE LINE # 281
002D 7F01              MOV     R7,#01H
002F 120000      E     LCALL   _ShowOSDWindowAll
                                           ; SOURCE LINE # 282
0032 120000      R     LCALL   L?0065
0035 020000      E     LJMP    _WriteI2C
             ; FUNCTION DisplayFormatOkOSD (END)

             ; FUNCTION DisplayFormatFailOSD (BEGIN)
                                           ; SOURCE LINE # 285
                                           ; SOURCE LINE # 286
                                           ; SOURCE LINE # 288
0000 120000      E     LCALL   ClearOSDInfo
                                           ; SOURCE LINE # 289
0003 7D96              MOV     R5,#096H
0005 E4                CLR     A
0006 FF                MOV     R7,A
0007 FE                MOV     R6,A
0008 120000      E     LCALL   _ClearDataCnt
C51 COMPILER V8.16   HS_DISPLAYOSD                                                         03/04/2011 15:51:19 PAGE 72  

                                           ; SOURCE LINE # 290
000B 120000      R     LCALL   L?0067
000E 120000      E     LCALL   _InitOSDWindow
                                           ; SOURCE LINE # 291
0011 120000      R     LCALL   L?0079
0014 120000      E     LCALL   _DrawAttrCnt
                                           ; SOURCE LINE # 292
0017 7A00        R     MOV     R2,#HIGH ?SC_64
0019 7900        R     MOV     R1,#LOW ?SC_64
001B 740B              MOV     A,#0BH
001D 120000      R     LCALL   L?0089
0020 120000      E     LCALL   _WriteStringToAddr
                                           ; SOURCE LINE # 293
0023 7F40              MOV     R7,#040H
0025 120000      E     LCALL   _SetDisplayedOSD
                                           ; SOURCE LINE # 294
0028 7D01              MOV     R5,#01H
002A 7F01              MOV     R7,#01H
002C 120000      E     LCALL   _ShowOSDWindow_TW88
                                           ; SOURCE LINE # 295
002F 7F01              MOV     R7,#01H
0031 120000      E     LCALL   _ShowOSDWindowAll
                                           ; SOURCE LINE # 296
0034 120000      R     LCALL   L?0065
0037 020000      E     LJMP    _WriteI2C
             ; FUNCTION DisplayFormatFailOSD (END)

             ; FUNCTION DisplayFWUpDate (BEGIN)
                                           ; SOURCE LINE # 299
                                           ; SOURCE LINE # 300
                                           ; SOURCE LINE # 302
0000 120000      E     LCALL   ClearOSDInfo
                                           ; SOURCE LINE # 303
0003 7D96              MOV     R5,#096H
0005 E4                CLR     A
0006 FF                MOV     R7,A
0007 FE                MOV     R6,A
0008 120000      E     LCALL   _ClearDataCnt
                                           ; SOURCE LINE # 304
000B 120000      R     LCALL   L?0067
000E 120000      E     LCALL   _InitOSDWindow
                                           ; SOURCE LINE # 305
0011 7B96              MOV     R3,#096H
0013 7D06              MOV     R5,#06H
0015 E4                CLR     A
0016 FF                MOV     R7,A
0017 FE                MOV     R6,A
0018 120000      E     LCALL   _DrawAttrCnt
                                           ; SOURCE LINE # 306
001B 7A00        R     MOV     R2,#HIGH ?SC_76
001D 7900        R     MOV     R1,#LOW ?SC_76
001F 740C              MOV     A,#0CH
0021 120000      R     LCALL   L?0089
0024 120000      E     LCALL   _WriteStringToAddr
                                           ; SOURCE LINE # 307
0027 7F40              MOV     R7,#040H
0029 120000      E     LCALL   _SetDisplayedOSD
                                           ; SOURCE LINE # 308
002C 7D01              MOV     R5,#01H
002E 7F01              MOV     R7,#01H
0030 120000      E     LCALL   _ShowOSDWindow_TW88
                                           ; SOURCE LINE # 309
C51 COMPILER V8.16   HS_DISPLAYOSD                                                         03/04/2011 15:51:19 PAGE 73  

0033 7F01              MOV     R7,#01H
0035 120000      E     LCALL   _ShowOSDWindowAll
                                           ; SOURCE LINE # 310
0038 120000      R     LCALL   L?0065
003B 020000      E     LJMP    _WriteI2C
             ; FUNCTION DisplayFWUpDate (END)

             ; FUNCTION DisplayFWUpDateOK (BEGIN)
                                           ; SOURCE LINE # 313
                                           ; SOURCE LINE # 314
                                           ; SOURCE LINE # 316
0000 120000      E     LCALL   ClearOSDInfo
                                           ; SOURCE LINE # 317
0003 7D96              MOV     R5,#096H
0005 E4                CLR     A
0006 FF                MOV     R7,A
0007 FE                MOV     R6,A
0008 120000      E     LCALL   _ClearDataCnt
                                           ; SOURCE LINE # 318
000B 120000      R     LCALL   L?0067
000E 120000      E     LCALL   _InitOSDWindow
                                           ; SOURCE LINE # 319
0011 120000      R     LCALL   L?0082
0014 120000      E     LCALL   _DrawAttrCnt
                                           ; SOURCE LINE # 320
0017 7BFF              MOV     R3,#0FFH
0019 7A00        R     MOV     R2,#HIGH ?SC_89
001B 7900        R     MOV     R1,#LOW ?SC_89
001D 7411              MOV     A,#011H
001F 120000      R     LCALL   L?0077
0022 120000      E     LCALL   _WriteStringToAddr
                                           ; SOURCE LINE # 321
0025 7F40              MOV     R7,#040H
0027 120000      E     LCALL   _SetDisplayedOSD
                                           ; SOURCE LINE # 322
002A 7D01              MOV     R5,#01H
002C 7F01              MOV     R7,#01H
002E 120000      E     LCALL   _ShowOSDWindow_TW88
                                           ; SOURCE LINE # 323
0031 7F01              MOV     R7,#01H
0033 120000      E     LCALL   _ShowOSDWindowAll
                                           ; SOURCE LINE # 324
0036 120000      R     LCALL   L?0065
0039 020000      E     LJMP    _WriteI2C
             ; FUNCTION DisplayFWUpDateOK (END)

             ; FUNCTION DisplayFWUpDateFail (BEGIN)
                                           ; SOURCE LINE # 327
                                           ; SOURCE LINE # 328
                                           ; SOURCE LINE # 330
0000 120000      E     LCALL   ClearOSDInfo
                                           ; SOURCE LINE # 331
0003 7D96              MOV     R5,#096H
0005 E4                CLR     A
0006 FF                MOV     R7,A
0007 FE                MOV     R6,A
0008 120000      E     LCALL   _ClearDataCnt
                                           ; SOURCE LINE # 332
000B 120000      R     LCALL   L?0067
000E 120000      E     LCALL   _InitOSDWindow
                                           ; SOURCE LINE # 333
0011 120000      R     LCALL   L?0080
C51 COMPILER V8.16   HS_DISPLAYOSD                                                         03/04/2011 15:51:19 PAGE 74  

0014 120000      E     LCALL   _DrawAttrCnt
                                           ; SOURCE LINE # 334
0017 7BFF              MOV     R3,#0FFH
0019 7A00        R     MOV     R2,#HIGH ?SC_107
001B 7900        R     MOV     R1,#LOW ?SC_107
001D 120000      R     LCALL   L?0075
0020 120000      E     LCALL   _WriteStringToAddr
                                           ; SOURCE LINE # 335
0023 7F40              MOV     R7,#040H
0025 120000      E     LCALL   _SetDisplayedOSD
                                           ; SOURCE LINE # 336
0028 7D01              MOV     R5,#01H
002A 7F01              MOV     R7,#01H
002C 120000      E     LCALL   _ShowOSDWindow_TW88
                                           ; SOURCE LINE # 337
002F 7F01              MOV     R7,#01H
0031 120000      E     LCALL   _ShowOSDWindowAll
                                           ; SOURCE LINE # 338
0034 120000      R     LCALL   L?0065
0037 020000      E     LJMP    _WriteI2C
             ; FUNCTION DisplayFWUpDateFail (END)

             ; FUNCTION DisplayDVRnotReady (BEGIN)
                                           ; SOURCE LINE # 341
                                           ; SOURCE LINE # 342
                                           ; SOURCE LINE # 344
0000 120000      E     LCALL   ClearOSDInfo
                                           ; SOURCE LINE # 345
0003 7D96              MOV     R5,#096H
0005 E4                CLR     A
0006 FF                MOV     R7,A
0007 FE                MOV     R6,A
0008 120000      E     LCALL   _ClearDataCnt
                                           ; SOURCE LINE # 346
000B 120000      R     LCALL   L?0067
000E 120000      E     LCALL   _InitOSDWindow
                                           ; SOURCE LINE # 347
0011 120000      R     LCALL   L?0080
0014 120000      E     LCALL   _DrawAttrCnt
                                           ; SOURCE LINE # 348
0017 7BFF              MOV     R3,#0FFH
0019 7A00        R     MOV     R2,#HIGH ?SC_122
001B 7900        R     MOV     R1,#LOW ?SC_122
001D 7800        E     MOV     R0,#LOW ?_WriteStringToAddr?BYTE+05H
001F 7411              MOV     A,#011H
0021 F2                MOVX    @R0,A
0022 7F60              MOV     R7,#060H
0024 7E00              MOV     R6,#00H
0026 120000      E     LCALL   _WriteStringToAddr
                                           ; SOURCE LINE # 349
0029 7F40              MOV     R7,#040H
002B 120000      E     LCALL   _SetDisplayedOSD
                                           ; SOURCE LINE # 350
002E 7D01              MOV     R5,#01H
0030 7F01              MOV     R7,#01H
0032 120000      E     LCALL   _ShowOSDWindow_TW88
                                           ; SOURCE LINE # 351
0035 7F01              MOV     R7,#01H
0037 120000      E     LCALL   _ShowOSDWindowAll
                                           ; SOURCE LINE # 352
003A 120000      R     LCALL   L?0065
003D 020000      E     LJMP    _WriteI2C
C51 COMPILER V8.16   HS_DISPLAYOSD                                                         03/04/2011 15:51:19 PAGE 75  

             ; FUNCTION DisplayDVRnotReady (END)

             ; FUNCTION DisplayFWVersion (BEGIN)
                                           ; SOURCE LINE # 355
                                           ; SOURCE LINE # 356
                                           ; SOURCE LINE # 359
0000 7800        R     MOV     R0,#LOW Str_DVRVersion
0002 7C00        R     MOV     R4,#HIGH Str_DVRVersion
0004 7A00        R     MOV     R2,#HIGH _?ix1004
0006 7900        R     MOV     R1,#LOW _?ix1004
0008 7F12              MOV     R7,#012H
000A 120000      R     LCALL   L?0086
                                           ; SOURCE LINE # 362
;---- Variable 'i' assigned to Register 'R7' ----
000D E4                CLR     A
000E FF                MOV     R7,A
000F         ?C0024:
000F 7800        E     MOV     R0,#LOW DVRVersionLen
0011 E2                MOVX    A,@R0
0012 FE                MOV     R6,A
0013 EF                MOV     A,R7
0014 C3                CLR     C
0015 9E                SUBB    A,R6
0016 500F              JNC     ?C0025
                                           ; SOURCE LINE # 363
                                           ; SOURCE LINE # 364
0018 7400        E     MOV     A,#LOW DVRVersion
001A 2F                ADD     A,R7
001B F8                MOV     R0,A
001C E2                MOVX    A,@R0
001D FE                MOV     R6,A
001E 7400        R     MOV     A,#LOW Str_DVRVersion
0020 2F                ADD     A,R7
0021 F8                MOV     R0,A
0022 EE                MOV     A,R6
0023 F2                MOVX    @R0,A
                                           ; SOURCE LINE # 365
0024 0F                INC     R7
0025 80E8              SJMP    ?C0024
0027         ?C0025:
                                           ; SOURCE LINE # 367
0027 120000      E     LCALL   ClearOSDInfo
                                           ; SOURCE LINE # 368
002A 7D96              MOV     R5,#096H
002C E4                CLR     A
002D FF                MOV     R7,A
002E FE                MOV     R6,A
002F 120000      E     LCALL   _ClearDataCnt
                                           ; SOURCE LINE # 369
0032 120000      R     LCALL   L?0067
0035 120000      E     LCALL   _InitOSDWindow
                                           ; SOURCE LINE # 370
0038 120000      R     LCALL   L?0082
003B 120000      E     LCALL   _DrawAttrCnt
                                           ; SOURCE LINE # 371
003E 7A00        R     MOV     R2,#HIGH ?SC_140
0040 7900        R     MOV     R1,#LOW ?SC_140
0042 120000      R     LCALL   L?0084
0045 E4                CLR     A
0046 FF                MOV     R7,A
0047 FE                MOV     R6,A
0048 120000      E     LCALL   _WriteStringToAddr
C51 COMPILER V8.16   HS_DISPLAYOSD                                                         03/04/2011 15:51:19 PAGE 76  

                                           ; SOURCE LINE # 372
004B 7BFF              MOV     R3,#0FFH
004D 7A00        E     MOV     R2,#HIGH Str_VER_E
004F 7900        E     MOV     R1,#LOW Str_VER_E
0051 7800        E     MOV     R0,#LOW ?_WriteStringToAddr?BYTE+05H
0053 7408              MOV     A,#08H
0055 F2                MOVX    @R0,A
0056 7F1E              MOV     R7,#01EH
0058 7E00              MOV     R6,#00H
005A 120000      E     LCALL   _WriteStringToAddr
                                           ; SOURCE LINE # 374
005D 7A00        R     MOV     R2,#HIGH ?SC_145
005F 7900        R     MOV     R1,#LOW ?SC_145
0061 120000      R     LCALL   L?0084
0064 7F3C              MOV     R7,#03CH
0066 7E00              MOV     R6,#00H
0068 120000      E     LCALL   _WriteStringToAddr
                                           ; SOURCE LINE # 375
006B 7BFE              MOV     R3,#0FEH
006D 7A00        R     MOV     R2,#HIGH Str_DVRVersion
006F 7900        R     MOV     R1,#LOW Str_DVRVersion
0071 7800        E     MOV     R0,#LOW DVRVersionLen
0073 E2                MOVX    A,@R0
0074 7800        E     MOV     R0,#LOW ?_WriteStringToAddr?BYTE+05H
0076 F2                MOVX    @R0,A
0077 7F5A              MOV     R7,#05AH
0079 7E00              MOV     R6,#00H
007B 120000      E     LCALL   _WriteStringToAddr
                                           ; SOURCE LINE # 383
007E 7F40              MOV     R7,#040H
0080 120000      E     LCALL   _SetDisplayedOSD
                                           ; SOURCE LINE # 384
0083 7D01              MOV     R5,#01H
0085 7F01              MOV     R7,#01H
0087 120000      E     LCALL   _ShowOSDWindow_TW88
                                           ; SOURCE LINE # 385
008A 7F01              MOV     R7,#01H
008C 120000      E     LCALL   _ShowOSDWindowAll
                                           ; SOURCE LINE # 386
008F 120000      R     LCALL   L?0065
0092 020000      E     LJMP    _WriteI2C
             ; FUNCTION DisplayFWVersion (END)

             ; FUNCTION DisplayDVRStatus (BEGIN)
                                           ; SOURCE LINE # 391
                                           ; SOURCE LINE # 392
                                           ; SOURCE LINE # 399
0000 E4                CLR     A
0001 7800        R     MOV     R0,#LOW RecordStatus
0003 F2                MOVX    @R0,A
                                           ; SOURCE LINE # 402
0004 7B19              MOV     R3,#019H
0006 7D02              MOV     R5,#02H
0008 7FC3              MOV     R7,#0C3H
000A FE                MOV     R6,A
000B 120000      E     LCALL   _DrawAttrCnt
                                           ; SOURCE LINE # 403
000E 7B01              MOV     R3,#01H
0010 7D04              MOV     R5,#04H
0012 7FDD              MOV     R7,#0DDH
0014 7E00              MOV     R6,#00H
0016 120000      E     LCALL   _DrawAttrCnt
C51 COMPILER V8.16   HS_DISPLAYOSD                                                         03/04/2011 15:51:19 PAGE 77  

                                           ; SOURCE LINE # 404
0019 7B02              MOV     R3,#02H
001B 7D06              MOV     R5,#06H
001D 7FDF              MOV     R7,#0DFH
001F 7E00              MOV     R6,#00H
0021 120000      E     LCALL   _DrawAttrCnt
                                           ; SOURCE LINE # 405
0024 7800        E     MOV     R0,#LOW year1
0026 7FC4              MOV     R7,#0C4H
0028 120000      R     LCALL   L?0063
                                           ; SOURCE LINE # 406
002B 7800        E     MOV     R0,#LOW year2
002D 7FC6              MOV     R7,#0C6H
002F 120000      R     LCALL   L?0063
                                           ; SOURCE LINE # 407
0032 120000      R     LCALL   L?0072
0035 7FC8              MOV     R7,#0C8H
0037 7E00              MOV     R6,#00H
0039 120000      E     LCALL   _WriteStringToAddr
                                           ; SOURCE LINE # 408
003C 7800        E     MOV     R0,#LOW month
003E 7FC9              MOV     R7,#0C9H
0040 120000      R     LCALL   L?0070
                                           ; SOURCE LINE # 409
0043 120000      R     LCALL   L?0072
0046 7FCB              MOV     R7,#0CBH
0048 7E00              MOV     R6,#00H
004A 120000      E     LCALL   _WriteStringToAddr
                                           ; SOURCE LINE # 410
004D 7800        E     MOV     R0,#LOW day
004F 7FCC              MOV     R7,#0CCH
0051 120000      R     LCALL   L?0070
                                           ; SOURCE LINE # 411
0054 7800        E     MOV     R0,#LOW hour
0056 7FCF              MOV     R7,#0CFH
0058 120000      R     LCALL   L?0083
                                           ; SOURCE LINE # 412
005B 7800        E     MOV     R0,#LOW minute
005D 7FD2              MOV     R7,#0D2H
005F 120000      R     LCALL   L?0083
                                           ; SOURCE LINE # 414
0062 7800        E     MOV     R0,#LOW second
0064 E2                MOVX    A,@R0
0065 30E011            JNB     ACC.0,?C0028
                                           ; SOURCE LINE # 415
0068 7A00        R     MOV     R2,#HIGH ?SC_152
006A 7900        R     MOV     R1,#LOW ?SC_152
006C 120000      R     LCALL   L?0090
006F F2                MOVX    @R0,A
0070 7FD1              MOV     R7,#0D1H
0072 7E00              MOV     R6,#00H
0074 120000      E     LCALL   _WriteStringToAddr
0077 8009              SJMP    ?C0029
0079         ?C0028:
                                           ; SOURCE LINE # 417
0079 7D01              MOV     R5,#01H
007B 7FD1              MOV     R7,#0D1H
007D 7E00              MOV     R6,#00H
007F 120000      E     LCALL   _ClearDataCnt
0082         ?C0029:
                                           ; SOURCE LINE # 424
0082 7800        E     MOV     R0,#LOW DVR_SDCardAvailable
C51 COMPILER V8.16   HS_DISPLAYOSD                                                         03/04/2011 15:51:19 PAGE 78  

0084 E2                MOVX    A,@R0
0085 F4                CPL     A
0086 7003              JNZ     $ + 5H
0088 020000      R     LJMP    ?C0030
                                           ; SOURCE LINE # 425
                                           ; SOURCE LINE # 427
008B 7800        E     MOV     R0,#LOW DVR_Busy
008D E2                MOVX    A,@R0
008E 600B              JZ      ?C0031
                                           ; SOURCE LINE # 428
                                           ; SOURCE LINE # 429
0090 7BFF              MOV     R3,#0FFH
0092 7A00        E     MOV     R2,#HIGH SCANSDCARD_ICON
0094 7900        E     MOV     R1,#LOW SCANSDCARD_ICON
0096 120000      R     LCALL   L?0085
                                           ; SOURCE LINE # 432
0099 8031              SJMP    ?C0050
009B         ?C0031:
                                           ; SOURCE LINE # 433
009B 7800        E     MOV     R0,#LOW DVR_RecordStatus
009D E2                MOVX    A,@R0
009E 7BFF              MOV     R3,#0FFH
00A0 30E706            JNB     ACC.7,?C0033
                                           ; SOURCE LINE # 434
                                           ; SOURCE LINE # 435
00A3 7A00        E     MOV     R2,#HIGH SDCardOverWrite_ICON
00A5 7900        E     MOV     R1,#LOW SDCardOverWrite_ICON
                                           ; SOURCE LINE # 436
                                           ; SOURCE LINE # 437
                                           ; SOURCE LINE # 438
00A7 8004              SJMP    ?C0048
00A9         ?C0033:
                                           ; SOURCE LINE # 441
                                           ; SOURCE LINE # 442
00A9 7A00        E     MOV     R2,#HIGH SDCARD_ICON
00AB 7900        E     MOV     R1,#LOW SDCARD_ICON
00AD         ?C0048:
00AD 120000      R     LCALL   L?0085
00B0 7E00              MOV     R6,#00H
00B2 120000      E     LCALL   _WriteStringToAddr
                                           ; SOURCE LINE # 443
00B5 7800        E     MOV     R0,#LOW DVR_SDCardAvailable
00B7 E2                MOVX    A,@R0
00B8 FD                MOV     R5,A
00B9 7C00              MOV     R4,#00H
00BB 7B04              MOV     R3,#04H
00BD 7FD9              MOV     R7,#0D9H
00BF 120000      R     LCALL   _DisplayNumber
                                           ; SOURCE LINE # 444
00C2 7A00        R     MOV     R2,#HIGH ?SC_154
00C4 7900        R     MOV     R1,#LOW ?SC_154
00C6 120000      R     LCALL   L?0090
00C9 F2                MOVX    @R0,A
00CA 7FDB              MOV     R7,#0DBH
00CC         ?C0050:
00CC 7E00              MOV     R6,#00H
00CE 120000      E     LCALL   _WriteStringToAddr
                                           ; SOURCE LINE # 445
00D1         ?C0032:
                                           ; SOURCE LINE # 446
00D1 7800        E     MOV     R0,#LOW DVR_RecordStatus
00D3 E2                MOVX    A,@R0
C51 COMPILER V8.16   HS_DISPLAYOSD                                                         03/04/2011 15:51:19 PAGE 79  

00D4 30E20C            JNB     ACC.2,?C0035
                                           ; SOURCE LINE # 447
                                           ; SOURCE LINE # 448
00D7 7BFF              MOV     R3,#0FFH
00D9 7A00        R     MOV     R2,#HIGH ?SC_156
00DB 7900        R     MOV     R1,#LOW ?SC_156
00DD 7800        E     MOV     R0,#LOW ?_WriteStringToAddr?BYTE+05H
00DF 7401              MOV     A,#01H
                                           ; SOURCE LINE # 459
                                           ; SOURCE LINE # 460
00E1 802A              SJMP    ?C0052
00E3         ?C0035:
                                           ; SOURCE LINE # 462
00E3 7800        E     MOV     R0,#LOW DVR_RecordStatus
00E5 E2                MOVX    A,@R0
00E6 30E110            JNB     ACC.1,?C0037
00E9 7800        R     MOV     R0,#LOW RecordStatus
00EB E2                MOVX    A,@R0
00EC 700B              JNZ     ?C0037
                                           ; SOURCE LINE # 463
                                           ; SOURCE LINE # 464
00EE 7BFF              MOV     R3,#0FFH
00F0 7A00        R     MOV     R2,#HIGH ?SC_158
00F2 7900        R     MOV     R1,#LOW ?SC_158
00F4 7800        E     MOV     R0,#LOW ?_WriteStringToAddr?BYTE+05H
00F6 04                INC     A
00F7         ?C0051:
                                           ; SOURCE LINE # 475
                                           ; SOURCE LINE # 476
00F7 8014              SJMP    ?C0052
00F9         ?C0037:
                                           ; SOURCE LINE # 478
00F9 7800        E     MOV     R0,#LOW DVR_RecordStatus
00FB E2                MOVX    A,@R0
00FC 30E01B            JNB     ACC.0,?C0036
00FF 7800        R     MOV     R0,#LOW RecordStatus
0101 E2                MOVX    A,@R0
0102 7016              JNZ     ?C0036
                                           ; SOURCE LINE # 479
                                           ; SOURCE LINE # 480
0104 7BFF              MOV     R3,#0FFH
0106 7A00        R     MOV     R2,#HIGH ?SC_160
0108 7900        R     MOV     R1,#LOW ?SC_160
010A 7800        E     MOV     R0,#LOW ?_WriteStringToAddr?BYTE+05H
010C 04                INC     A
010D         ?C0052:
010D F2                MOVX    @R0,A
010E 7FDD              MOV     R7,#0DDH
0110 7E00              MOV     R6,#00H
0112 120000      E     LCALL   _WriteStringToAddr
                                           ; SOURCE LINE # 491
0115 7800        R     MOV     R0,#LOW RecordStatus
0117 7401              MOV     A,#01H
0119 F2                MOVX    @R0,A
                                           ; SOURCE LINE # 493
011A         ?C0036:
                                           ; SOURCE LINE # 495
011A 7800        R     MOV     R0,#LOW RecordStatus
011C E2                MOVX    A,@R0
011D 7022              JNZ     ?C0041
                                           ; SOURCE LINE # 496
011F 7D04              MOV     R5,#04H
C51 COMPILER V8.16   HS_DISPLAYOSD                                                         03/04/2011 15:51:19 PAGE 80  

0121 7FDD              MOV     R7,#0DDH
0123 FE                MOV     R6,A
                                           ; SOURCE LINE # 497
0124 8018              SJMP    ?C0053
0126         ?C0030:
                                           ; SOURCE LINE # 499
                                           ; SOURCE LINE # 500
0126 7BFF              MOV     R3,#0FFH
0128 7A00        E     MOV     R2,#HIGH NoSDCard_ICON
012A 7900        E     MOV     R1,#LOW NoSDCard_ICON
012C 7800        E     MOV     R0,#LOW ?_WriteStringToAddr?BYTE+05H
012E 7404              MOV     A,#04H
0130 F2                MOVX    @R0,A
0131 7FD7              MOV     R7,#0D7H
0133 7E00              MOV     R6,#00H
0135 120000      E     LCALL   _WriteStringToAddr
                                           ; SOURCE LINE # 501
0138 7D08              MOV     R5,#08H
013A 7FD9              MOV     R7,#0D9H
013C 7E00              MOV     R6,#00H
013E         ?C0053:
013E 120000      E     LCALL   _ClearDataCnt
                                           ; SOURCE LINE # 503
0141         ?C0041:
                                           ; SOURCE LINE # 505
0141 7FBB              MOV     R7,#0BBH
0143 7E00              MOV     R6,#00H
0145 120000      E     LCALL   _ReadEEP
0148 EF                MOV     A,R7
0149 7004              JNZ     ?C0042
                                           ; SOURCE LINE # 506
014B 7D01              MOV     R5,#01H
014D 8002              SJMP    ?C0049
014F         ?C0042:
                                           ; SOURCE LINE # 508
014F E4                CLR     A
0150 FD                MOV     R5,A
0151         ?C0049:
0151 7F04              MOV     R7,#04H
0153 120000      E     LCALL   _ShowOSDWindow_TW88
0156         ?C0043:
                                           ; SOURCE LINE # 510
0156 7F01              MOV     R7,#01H
0158 120000      E     LCALL   _ShowOSDWindowAll
                                           ; SOURCE LINE # 511
015B 120000      R     LCALL   L?0065
015E 020000      E     LJMP    _WriteI2C
                                           ; SOURCE LINE # 513
0161         L?0063:
0161 E2                MOVX    A,@R0
0162 FD                MOV     R5,A
0163 7C00              MOV     R4,#00H
0165 7B04              MOV     R3,#04H
0167 120000      R     LCALL   _DisplayNumber
016A 22                RET     
016B         L?0070:
016B E2                MOVX    A,@R0
016C FD                MOV     R5,A
016D 7C00              MOV     R4,#00H
016F 7B04              MOV     R3,#04H
0171 120000      R     LCALL   _DisplayNumber
0174 22                RET     
C51 COMPILER V8.16   HS_DISPLAYOSD                                                         03/04/2011 15:51:19 PAGE 81  

0175         L?0083:
0175 E2                MOVX    A,@R0
0176 FD                MOV     R5,A
0177 7C00              MOV     R4,#00H
0179 7B04              MOV     R3,#04H
017B 120000      R     LCALL   _DisplayNumber
017E 22                RET     
             ; FUNCTION DisplayDVRStatus (END)

C51 COMPILER V8.16   HS_DISPLAYOSD                                                         03/04/2011 15:51:19 PAGE 82  

NAME                                    CLASS   MSPACE  TYPE    OFFSET  SIZE
====                                    =====   ======  ====    ======  ====


SetDATETIME. . . . . . . . . . . . . .  E_CONST  -----  INT      -----  2
second . . . . . . . . . . . . . . . .  EXTERN   PDATA  U_CHAR   -----  1
DWORD. . . . . . . . . . . . . . . . .  TYPEDEF  -----  U_LONG   -----  4
SendDVRStatus. . . . . . . . . . . . .  E_CONST  -----  INT      -----  2
GetDVRParam. . . . . . . . . . . . . .  E_CONST  -----  INT      -----  2
ClearGAUGEINFO . . . . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
CAM_R. . . . . . . . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
_ShowOSDWindow_TW88. . . . . . . . . .  EXTERN   CODE   PROC     -----  -----
Halt_OK. . . . . . . . . . . . . . . .  E_CONST  -----  INT      -----  2
SendDVRParamDT . . . . . . . . . . . .  E_CONST  -----  INT      -----  2
CAM_BAR. . . . . . . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
CAM_ABR. . . . . . . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
CAM_CAR. . . . . . . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
CAM_ACR. . . . . . . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
CAM_CBR. . . . . . . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
CAM_BCR. . . . . . . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
DisplayedOSD . . . . . . . . . . . . .  EXTERN   DATA   U_CHAR   -----  1
NumberStringType . . . . . . . . . . .  * TAG *  -----  STRUCT   -----  11
  x. . . . . . . . . . . . . . . . . .  MEMBER   -----  U_CHAR   0000H  1
  y. . . . . . . . . . . . . . . . . .  MEMBER   -----  U_CHAR   0001H  1
  width. . . . . . . . . . . . . . . .  MEMBER   -----  U_CHAR   0002H  1
  BackColor. . . . . . . . . . . . . .  MEMBER   -----  U_CHAR   0003H  1
  Radix. . . . . . . . . . . . . . . .  MEMBER   -----  U_CHAR   0004H  1
  NumColor . . . . . . . . . . . . . .  MEMBER   -----  U_CHAR   0005H  1
  MaxLen . . . . . . . . . . . . . . .  MEMBER   -----  U_CHAR   0006H  1
  PrePostCharLen . . . . . . . . . . .  MEMBER   -----  U_CHAR   0007H  1
  PrePostChar. . . . . . . . . . . . .  MEMBER   -----  ARRAY    0008H  3
_ClearDataCnt. . . . . . . . . . . . .  EXTERN   CODE   PROC     -----  -----
SetDVRParam. . . . . . . . . . . . . .  E_CONST  -----  INT      -----  2
CAM_PTZ_RIGHT. . . . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
DisplayDVRnotReady . . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
minute . . . . . . . . . . . . . . . .  EXTERN   PDATA  U_CHAR   -----  1
FontData . . . . . . . . . . . . . . .  * TAG *  -----  STRUCT   -----  27
  font . . . . . . . . . . . . . . . .  MEMBER   -----  ARRAY    0000H  27
GetDVRStatus . . . . . . . . . . . . .  E_CONST  -----  INT      -----  2
GaugeString1 . . . . . . . . . . . . .  PUBLIC   CODE   ARRAY    00B9H  4
GaugeString2 . . . . . . . . . . . . .  PUBLIC   CODE   ARRAY    00BDH  4
GaugeString3 . . . . . . . . . . . . .  PUBLIC   CODE   ARRAY    00C1H  4
GaugeString4 . . . . . . . . . . . . .  PUBLIC   CODE   ARRAY    00C5H  4
GaugeString5 . . . . . . . . . . . . .  PUBLIC   CODE   ARRAY    00C9H  25
GaugeString6 . . . . . . . . . . . . .  PUBLIC   CODE   ARRAY    00E2H  29
CAM_SET. . . . . . . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
AVMode . . . . . . . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
SourceModeType . . . . . . . . . . . .  TYPEDEF  -----  U_CHAR   -----  1
_ShowOSDWindowAll. . . . . . . . . . .  EXTERN   CODE   PROC     -----  -----
CAM_NUM. . . . . . . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
CMD_NUM. . . . . . . . . . . . . . . .  E_CONST  -----  INT      -----  2
month. . . . . . . . . . . . . . . . .  EXTERN   PDATA  U_CHAR   -----  1
MANUALRECSTART . . . . . . . . . . . .  E_CONST  -----  INT      -----  2
Str_VER_E. . . . . . . . . . . . . . .  EXTERN   CODE   ARRAY    -----  -----
DisplayFormatFailOSD . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
DisplayGaugeOSD. . . . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
  i. . . . . . . . . . . . . . . . . .  AUTO     PDATA  U_CHAR   0000H  1
DisplayFormatOSD . . . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
CAM_RAB_H. . . . . . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
OSDStrInfo . . . . . . . . . . . . . .  * TAG *  -----  STRUCT   -----  8
  cnt. . . . . . . . . . . . . . . . .  MEMBER   -----  U_CHAR   0000H  1
C51 COMPILER V8.16   HS_DISPLAYOSD                                                         03/04/2011 15:51:19 PAGE 83  

NAME                                    CLASS   MSPACE  TYPE    OFFSET  SIZE
====                                    =====   ======  ====    ======  ====


  addr . . . . . . . . . . . . . . . .  MEMBER   -----  U_INT    0001H  2
  attr . . . . . . . . . . . . . . . .  MEMBER   -----  U_CHAR   0003H  1
  str. . . . . . . . . . . . . . . . .  MEMBER   -----  U_LONG   0004H  4
SetFormatSD. . . . . . . . . . . . . .  E_CONST  -----  INT      -----  2
CAM_BA . . . . . . . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
CAM_AB . . . . . . . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
BYTE . . . . . . . . . . . . . . . . .  TYPEDEF  -----  U_CHAR   -----  1
TimeType . . . . . . . . . . . . . . .  * TAG *  -----  STRUCT   -----  7
  x. . . . . . . . . . . . . . . . . .  MEMBER   -----  U_CHAR   0000H  1
  y. . . . . . . . . . . . . . . . . .  MEMBER   -----  U_CHAR   0001H  1
  width. . . . . . . . . . . . . . . .  MEMBER   -----  U_CHAR   0002H  1
  BackColor. . . . . . . . . . . . . .  MEMBER   -----  U_CHAR   0003H  1
  Format . . . . . . . . . . . . . . .  MEMBER   -----  U_CHAR   0004H  1
  TimeColor. . . . . . . . . . . . . .  MEMBER   -----  U_CHAR   0005H  1
  CursorColor. . . . . . . . . . . . .  MEMBER   -----  U_CHAR   0006H  1
CAM_CA . . . . . . . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
CAM_AC . . . . . . . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
CAM_PTZ_UP . . . . . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
CAM_BC . . . . . . . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
CAM_CB . . . . . . . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
DVR_RecordStatus . . . . . . . . . . .  EXTERN   PDATA  U_CHAR   -----  1
SourceModeTypeEnum . . . . . . . . . .  * TAG *  -----  ENUM     -----  -----
_SetDisplayedOSD . . . . . . . . . . .  EXTERN   CODE   PROC     -----  -----
struct_IdName. . . . . . . . . . . . .  * TAG *  -----  STRUCT   -----  17
  Id . . . . . . . . . . . . . . . . .  MEMBER   -----  U_CHAR   0000H  1
  Name . . . . . . . . . . . . . . . .  MEMBER   -----  ARRAY    0001H  16
SetFormatSDDone. . . . . . . . . . . .  E_CONST  -----  INT      -----  2
EnumType . . . . . . . . . . . . . . .  * TAG *  -----  STRUCT   -----  17
  Sz . . . . . . . . . . . . . . . . .  MEMBER   -----  U_CHAR   0000H  1
  ByLang . . . . . . . . . . . . . . .  MEMBER   -----  U_CHAR   0001H  1
  Str. . . . . . . . . . . . . . . . .  MEMBER   -----  ARRAY    0002H  15
MenuType . . . . . . . . . . . . . . .  * TAG *  -----  STRUCT   -----  4
  width. . . . . . . . . . . . . . . .  MEMBER   -----  U_CHAR   0000H  1
  height . . . . . . . . . . . . . . .  MEMBER   -----  U_CHAR   0001H  1
  TitleColor . . . . . . . . . . . . .  MEMBER   -----  U_CHAR   0002H  1
  CursorColor. . . . . . . . . . . . .  MEMBER   -----  U_CHAR   0003H  1
CAM_RAB_T. . . . . . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
WORD . . . . . . . . . . . . . . . . .  TYPEDEF  -----  U_INT    -----  2
SDCARD_ICON. . . . . . . . . . . . . .  EXTERN   CODE   ARRAY    -----  -----
CAM_PTZ_LEFT . . . . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
day. . . . . . . . . . . . . . . . . .  EXTERN   PDATA  U_CHAR   -----  1
DisplayFWUpDateFail. . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
hour . . . . . . . . . . . . . . . . .  EXTERN   PDATA  U_CHAR   -----  1
CAM_Iris_Open. . . . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
DisplayFWUpDate. . . . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
Init_Osd_DisplayGAUGEWindow. . . . . .  PUBLIC   CODE   ARRAY    00FFH  19
_?ix1000 . . . . . . . . . . . . . . .  STATIC   CODE   ARRAY    0112H  6
CAM_ZOOM_OUT_START . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
_?ix1001 . . . . . . . . . . . . . . .  STATIC   CODE   ARRAY    0118H  6
_?ix1002 . . . . . . . . . . . . . . .  STATIC   CODE   ARRAY    011EH  6
CAM_AR . . . . . . . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
_?ix1003 . . . . . . . . . . . . . . .  STATIC   CODE   ARRAY    0124H  2
CAM_BR . . . . . . . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
CAM_RB . . . . . . . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
_?ix1004 . . . . . . . . . . . . . . .  STATIC   CODE   ARRAY    0126H  18
CAM_CR . . . . . . . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
_DisplayNumber . . . . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
C51 COMPILER V8.16   HS_DISPLAYOSD                                                         03/04/2011 15:51:19 PAGE 84  

NAME                                    CLASS   MSPACE  TYPE    OFFSET  SIZE
====                                    =====   ======  ====    ======  ====


  addr . . . . . . . . . . . . . . . .  AUTO     PDATA  U_CHAR   0000H  1
  val. . . . . . . . . . . . . . . . .  AUTO     PDATA  U_INT    0001H  2
  type . . . . . . . . . . . . . . . .  AUTO     PDATA  U_CHAR   0003H  1
  Bar_str. . . . . . . . . . . . . . .  AUTO     PDATA  ARRAY    0004H  6
  Bar_str_AC . . . . . . . . . . . . .  AUTO     PDATA  ARRAY    000AH  6
  Bar_str_Battery. . . . . . . . . . .  AUTO     PDATA  ARRAY    0010H  6
  Num_str. . . . . . . . . . . . . . .  AUTO     PDATA  ARRAY    0016H  2
CAM_MENU_ENTER . . . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
Register . . . . . . . . . . . . . . .  TYPEDEF  -----  U_CHAR   -----  1
CAM_PTZ_DOWN . . . . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
_WriteStringToAddr . . . . . . . . . .  EXTERN   CODE   PROC     -----  -----
SDCardOverWrite_ICON . . . . . . . . .  EXTERN   CODE   ARRAY    -----  -----
_WriteI2C. . . . . . . . . . . . . . .  EXTERN   CODE   PROC     -----  -----
CAM_CALL . . . . . . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
DisplayDVRStatus . . . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
  RecordStatus . . . . . . . . . . . .  AUTO     PDATA  U_CHAR   0000H  1
RS485_RX . . . . . . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
Baud_rate2400. . . . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
RS485_TX . . . . . . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
_DrawAttrCnt . . . . . . . . . . . . .  EXTERN   CODE   PROC     -----  -----
FW_Update_Start. . . . . . . . . . . .  E_CONST  -----  INT      -----  2
NumType. . . . . . . . . . . . . . . .  * TAG *  -----  STRUCT   -----  5
  PrePostCharLen . . . . . . . . . . .  MEMBER   -----  U_CHAR   0000H  1
  PrePostChar. . . . . . . . . . . . .  MEMBER   -----  ARRAY    0001H  4
DVRVersion . . . . . . . . . . . . . .  EXTERN   PDATA  ARRAY    -----  11
CAM_PTZ_STOP . . . . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
RegisterInfo . . . . . . . . . . . . .  * TAG *  -----  STRUCT   -----  6
  Min. . . . . . . . . . . . . . . . .  MEMBER   -----  INT      0000H  2
  Max. . . . . . . . . . . . . . . . .  MEMBER   -----  INT      0002H  2
  Default. . . . . . . . . . . . . . .  MEMBER   -----  INT      0004H  2
_ReadEEP . . . . . . . . . . . . . . .  EXTERN   CODE   PROC     -----  -----
Baud_rate4800. . . . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
DisplayFWUpDateOK. . . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
_PCMDATA . . . . . . . . . . . . . . .  * TAG *  -----  STRUCT   -----  22
  Support. . . . . . . . . . . . . . .  MEMBER   -----  U_CHAR   0000H  1
  HAN. . . . . . . . . . . . . . . . .  MEMBER   -----  U_INT    0001H  2
  VAN. . . . . . . . . . . . . . . . .  MEMBER   -----  U_INT    0003H  2
  IVF. . . . . . . . . . . . . . . . .  MEMBER   -----  U_INT    0005H  2
  CLOCK. . . . . . . . . . . . . . . .  MEMBER   -----  U_INT    0007H  2
  low. . . . . . . . . . . . . . . . .  MEMBER   -----  U_INT    0009H  2
  high . . . . . . . . . . . . . . . .  MEMBER   -----  U_INT    000BH  2
  Hstart . . . . . . . . . . . . . . .  MEMBER   -----  U_INT    000DH  2
  Vstart . . . . . . . . . . . . . . .  MEMBER   -----  U_INT    000FH  2
  IPF. . . . . . . . . . . . . . . . .  MEMBER   -----  U_INT    0011H  2
  PPF. . . . . . . . . . . . . . . . .  MEMBER   -----  U_INT    0013H  2
  VBack. . . . . . . . . . . . . . . .  MEMBER   -----  U_CHAR   0015H  1
NoSDCard_ICON. . . . . . . . . . . . .  EXTERN   CODE   ARRAY    -----  -----
Baud_rate9600. . . . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
CAM_QUAD . . . . . . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
FW_Update_OK . . . . . . . . . . . . .  E_CONST  -----  INT      -----  2
ClearOSDInfo . . . . . . . . . . . . .  EXTERN   CODE   PROC     -----  -----
CAM_ZOOM_IN_START. . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
year1. . . . . . . . . . . . . . . . .  EXTERN   PDATA  U_CHAR   -----  1
MANUALRECSTOP. . . . . . . . . . . . .  E_CONST  -----  INT      -----  2
DisplayFWVersion . . . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
  i. . . . . . . . . . . . . . . . . .  * REG *  DATA   U_CHAR   0007H  1
  Str_DVRVersion . . . . . . . . . . .  AUTO     PDATA  ARRAY    0000H  18
C51 COMPILER V8.16   HS_DISPLAYOSD                                                         03/04/2011 15:51:19 PAGE 85  

NAME                                    CLASS   MSPACE  TYPE    OFFSET  SIZE
====                                    =====   ======  ====    ======  ====


SCANSDCARD_ICON. . . . . . . . . . . .  EXTERN   CODE   ARRAY    -----  -----
year2. . . . . . . . . . . . . . . . .  EXTERN   PDATA  U_CHAR   -----  1
SetDVRDefault. . . . . . . . . . . . .  E_CONST  -----  INT      -----  2
DefineMenu . . . . . . . . . . . . . .  * TAG *  -----  STRUCT   -----  16
  Icon . . . . . . . . . . . . . . . .  MEMBER   -----  PTR      0000H  2
  Desc . . . . . . . . . . . . . . . .  MEMBER   -----  PTR      0002H  3
  PreFnId. . . . . . . . . . . . . . .  MEMBER   -----  U_CHAR   0005H  1
  PostFnId . . . . . . . . . . . . . .  MEMBER   -----  U_CHAR   0006H  1
  IconColor. . . . . . . . . . . . . .  MEMBER   -----  U_CHAR   0007H  1
  DescColor. . . . . . . . . . . . . .  MEMBER   -----  U_CHAR   0008H  1
  Child. . . . . . . . . . . . . . . .  MEMBER   -----  PTR      0009H  2
  Type . . . . . . . . . . . . . . . .  MEMBER   -----  U_CHAR   000BH  1
  ActiveWithCursor . . . . . . . . . .  MEMBER   -----  U_CHAR   000CH  1
  Id . . . . . . . . . . . . . . . . .  MEMBER   -----  U_CHAR   000DH  1
  TypeData . . . . . . . . . . . . . .  MEMBER   -----  PTR      000EH  2
VGAMode. . . . . . . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
GaugeString. . . . . . . . . . . . . .  PUBLIC   CODE   ARRAY    00A2H  23
CMD_UNKNOWN. . . . . . . . . . . . . .  E_CONST  -----  INT      -----  2
DVR_SDCardAvailable. . . . . . . . . .  EXTERN   PDATA  U_CHAR   -----  1
SEQ. . . . . . . . . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
DisplayFormatOkOSD . . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
LongRegisterInfo . . . . . . . . . . .  * TAG *  -----  STRUCT   -----  6
  Min. . . . . . . . . . . . . . . . .  MEMBER   -----  U_INT    0000H  2
  Max. . . . . . . . . . . . . . . . .  MEMBER   -----  U_INT    0002H  2
  Default. . . . . . . . . . . . . . .  MEMBER   -----  U_INT    0004H  2
HS_DvrCommand. . . . . . . . . . . . .  * TAG *  -----  ENUM     -----  -----
SendDVRParam . . . . . . . . . . . . .  E_CONST  -----  INT      -----  2
DisplaylockOSD . . . . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
PictureInfo. . . . . . . . . . . . . .  * TAG *  -----  STRUCT   -----  4
  Register_Addr. . . . . . . . . . . .  MEMBER   -----  U_CHAR   0000H  1
  EEPROM_Addr. . . . . . . . . . . . .  MEMBER   -----  U_CHAR   0001H  1
  Control_Range. . . . . . . . . . . .  MEMBER   -----  PTR      0002H  2
CAM_ABR_T3 . . . . . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
CAM_ABR_T4 . . . . . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
CMD_NULL . . . . . . . . . . . . . . .  E_CONST  -----  INT      -----  2
DVR_Busy . . . . . . . . . . . . . . .  EXTERN   PDATA  U_CHAR   -----  1
GetDATETIME. . . . . . . . . . . . . .  E_CONST  -----  INT      -----  2
CAM_A. . . . . . . . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
SNAPSHOT . . . . . . . . . . . . . . .  E_CONST  -----  INT      -----  2
DisplayactvOSD . . . . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
CAM_B. . . . . . . . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
CAM_C. . . . . . . . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
CAM_D. . . . . . . . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
CAM_CAB. . . . . . . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
CAM_BAC. . . . . . . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
CAM_ABC. . . . . . . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
DVRVersionLen. . . . . . . . . . . . .  EXTERN   PDATA  U_CHAR   -----  1
GetDVRVersion. . . . . . . . . . . . .  E_CONST  -----  INT      -----  2
_InitOSDWindow . . . . . . . . . . . .  EXTERN   CODE   PROC     -----  -----
Halt_Start . . . . . . . . . . . . . .  E_CONST  -----  INT      -----  2
SendAlarm. . . . . . . . . . . . . . .  E_CONST  -----  INT      -----  2
GetLCDMode . . . . . . . . . . . . . .  E_CONST  -----  INT      -----  2


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =   1788    ----
   CONSTANT SIZE    =    312    ----
   XDATA SIZE       =   ----    ----
C51 COMPILER V8.16   HS_DISPLAYOSD                                                         03/04/2011 15:51:19 PAGE 86  

   PDATA SIZE       =   ----      44
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
